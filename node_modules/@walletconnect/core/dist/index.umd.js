(function(Y,Rt){typeof exports=="object"&&typeof module<"u"?Rt(exports):typeof define=="function"&&define.amd?define(["exports"],Rt):(Y=typeof globalThis<"u"?globalThis:Y||self,Rt(Y["@walletconnect/core"]={}))})(this,function(Y){"use strict";var Rt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Co(t){var e=t.default;if(typeof e=="function"){var r=function(){return e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(i){var s=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(r,i,s.get?s:{enumerable:!0,get:function(){return t[i]}})}),r}var br={exports:{}},nn=typeof Reflect=="object"?Reflect:null,qf=nn&&typeof nn.apply=="function"?nn.apply:function(e,r,i){return Function.prototype.apply.call(e,r,i)},Es;nn&&typeof nn.ownKeys=="function"?Es=nn.ownKeys:Object.getOwnPropertySymbols?Es=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Es=function(e){return Object.getOwnPropertyNames(e)};function xl(t){console&&console.warn&&console.warn(t)}var jf=Number.isNaN||function(e){return e!==e};function ft(){ft.init.call(this)}br.exports=ft,br.exports.once=Al,ft.EventEmitter=ft,ft.prototype._events=void 0,ft.prototype._eventsCount=0,ft.prototype._maxListeners=void 0;var Kf=10;function xs(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(ft,"defaultMaxListeners",{enumerable:!0,get:function(){return Kf},set:function(t){if(typeof t!="number"||t<0||jf(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");Kf=t}}),ft.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},ft.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||jf(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function Hf(t){return t._maxListeners===void 0?ft.defaultMaxListeners:t._maxListeners}ft.prototype.getMaxListeners=function(){return Hf(this)},ft.prototype.emit=function(e){for(var r=[],i=1;i<arguments.length;i++)r.push(arguments[i]);var s=e==="error",n=this._events;if(n!==void 0)s=s&&n.error===void 0;else if(!s)return!1;if(s){var o;if(r.length>0&&(o=r[0]),o instanceof Error)throw o;var f=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw f.context=o,f}var d=n[e];if(d===void 0)return!1;if(typeof d=="function")qf(d,this,r);else for(var u=d.length,v=Jf(d,u),i=0;i<u;++i)qf(v[i],this,r);return!0};function Vf(t,e,r,i){var s,n,o;if(xs(r),n=t._events,n===void 0?(n=t._events=Object.create(null),t._eventsCount=0):(n.newListener!==void 0&&(t.emit("newListener",e,r.listener?r.listener:r),n=t._events),o=n[e]),o===void 0)o=n[e]=r,++t._eventsCount;else if(typeof o=="function"?o=n[e]=i?[r,o]:[o,r]:i?o.unshift(r):o.push(r),s=Hf(t),s>0&&o.length>s&&!o.warned){o.warned=!0;var f=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");f.name="MaxListenersExceededWarning",f.emitter=t,f.type=e,f.count=o.length,xl(f)}return t}ft.prototype.addListener=function(e,r){return Vf(this,e,r,!1)},ft.prototype.on=ft.prototype.addListener,ft.prototype.prependListener=function(e,r){return Vf(this,e,r,!0)};function Sl(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Wf(t,e,r){var i={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},s=Sl.bind(i);return s.listener=r,i.wrapFn=s,s}ft.prototype.once=function(e,r){return xs(r),this.on(e,Wf(this,e,r)),this},ft.prototype.prependOnceListener=function(e,r){return xs(r),this.prependListener(e,Wf(this,e,r)),this},ft.prototype.removeListener=function(e,r){var i,s,n,o,f;if(xs(r),s=this._events,s===void 0)return this;if(i=s[e],i===void 0)return this;if(i===r||i.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete s[e],s.removeListener&&this.emit("removeListener",e,i.listener||r));else if(typeof i!="function"){for(n=-1,o=i.length-1;o>=0;o--)if(i[o]===r||i[o].listener===r){f=i[o].listener,n=o;break}if(n<0)return this;n===0?i.shift():Ml(i,n),i.length===1&&(s[e]=i[0]),s.removeListener!==void 0&&this.emit("removeListener",e,f||r)}return this},ft.prototype.off=ft.prototype.removeListener,ft.prototype.removeAllListeners=function(e){var r,i,s;if(i=this._events,i===void 0)return this;if(i.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):i[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete i[e]),this;if(arguments.length===0){var n=Object.keys(i),o;for(s=0;s<n.length;++s)o=n[s],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=i[e],typeof r=="function")this.removeListener(e,r);else if(r!==void 0)for(s=r.length-1;s>=0;s--)this.removeListener(e,r[s]);return this};function Gf(t,e,r){var i=t._events;if(i===void 0)return[];var s=i[e];return s===void 0?[]:typeof s=="function"?r?[s.listener||s]:[s]:r?Il(s):Jf(s,s.length)}ft.prototype.listeners=function(e){return Gf(this,e,!0)},ft.prototype.rawListeners=function(e){return Gf(this,e,!1)},ft.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):Yf.call(t,e)},ft.prototype.listenerCount=Yf;function Yf(t){var e=this._events;if(e!==void 0){var r=e[t];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}ft.prototype.eventNames=function(){return this._eventsCount>0?Es(this._events):[]};function Jf(t,e){for(var r=new Array(e),i=0;i<e;++i)r[i]=t[i];return r}function Ml(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function Il(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}function Al(t,e){return new Promise(function(r,i){function s(o){t.removeListener(e,n),i(o)}function n(){typeof t.removeListener=="function"&&t.removeListener("error",s),r([].slice.call(arguments))}Xf(t,e,n,{once:!0}),e!=="error"&&Dl(t,s,{once:!0})})}function Dl(t,e,r){typeof t.on=="function"&&Xf(t,"error",e,r)}function Xf(t,e,r,i){if(typeof t.on=="function")i.once?t.once(e,r):t.on(e,r);else if(typeof t.addEventListener=="function")t.addEventListener(e,function s(n){i.once&&t.removeEventListener(e,s),r(n)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var ie={};/*! *****************************************************************************
	Copyright (c) Microsoft Corporation.

	Permission to use, copy, modify, and/or distribute this software for any
	purpose with or without fee is hereby granted.

	THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
	REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
	AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
	INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
	LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
	OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
	PERFORMANCE OF THIS SOFTWARE.
	***************************************************************************** */var Bo=function(t,e){return Bo=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},Bo(t,e)};function Ol(t,e){Bo(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Lo=function(){return Lo=Object.assign||function(e){for(var r,i=1,s=arguments.length;i<s;i++){r=arguments[i];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Lo.apply(this,arguments)};function Rl(t,e){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(r[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(r[i[s]]=t[i[s]]);return r}function Tl(t,e,r,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,r):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(t,e,r,i);else for(var f=t.length-1;f>=0;f--)(o=t[f])&&(n=(s<3?o(n):s>3?o(e,r,n):o(e,r))||n);return s>3&&n&&Object.defineProperty(e,r,n),n}function Nl(t,e){return function(r,i){e(r,i,t)}}function Pl(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function Cl(t,e,r,i){function s(n){return n instanceof r?n:new r(function(o){o(n)})}return new(r||(r=Promise))(function(n,o){function f(v){try{u(i.next(v))}catch(w){o(w)}}function d(v){try{u(i.throw(v))}catch(w){o(w)}}function u(v){v.done?n(v.value):s(v.value).then(f,d)}u((i=i.apply(t,e||[])).next())})}function Bl(t,e){var r={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]},i,s,n,o;return o={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function f(u){return function(v){return d([u,v])}}function d(u){if(i)throw new TypeError("Generator is already executing.");for(;r;)try{if(i=1,s&&(n=u[0]&2?s.return:u[0]?s.throw||((n=s.return)&&n.call(s),0):s.next)&&!(n=n.call(s,u[1])).done)return n;switch(s=0,n&&(u=[u[0]&2,n.value]),u[0]){case 0:case 1:n=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,s=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(n=r.trys,!(n=n.length>0&&n[n.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!n||u[1]>n[0]&&u[1]<n[3])){r.label=u[1];break}if(u[0]===6&&r.label<n[1]){r.label=n[1],n=u;break}if(n&&r.label<n[2]){r.label=n[2],r.ops.push(u);break}n[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(v){u=[6,v],s=0}finally{i=n=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function Ll(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}function Fl(t,e){for(var r in t)r!=="default"&&!e.hasOwnProperty(r)&&(e[r]=t[r])}function Fo(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],i=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Zf(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var i=r.call(t),s,n=[],o;try{for(;(e===void 0||e-- >0)&&!(s=i.next()).done;)n.push(s.value)}catch(f){o={error:f}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return n}function $l(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Zf(arguments[e]));return t}function Ul(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var i=Array(t),s=0,e=0;e<r;e++)for(var n=arguments[e],o=0,f=n.length;o<f;o++,s++)i[s]=n[o];return i}function Un(t){return this instanceof Un?(this.v=t,this):new Un(t)}function zl(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=r.apply(t,e||[]),s,n=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(S){i[S]&&(s[S]=function(I){return new Promise(function(M,R){n.push([S,I,M,R])>1||f(S,I)})})}function f(S,I){try{d(i[S](I))}catch(M){w(n[0][3],M)}}function d(S){S.value instanceof Un?Promise.resolve(S.value.v).then(u,v):w(n[0][2],S)}function u(S){f("next",S)}function v(S){f("throw",S)}function w(S,I){S(I),n.shift(),n.length&&f(n[0][0],n[0][1])}}function kl(t){var e,r;return e={},i("next"),i("throw",function(s){throw s}),i("return"),e[Symbol.iterator]=function(){return this},e;function i(s,n){e[s]=t[s]?function(o){return(r=!r)?{value:Un(t[s](o)),done:s==="return"}:n?n(o):o}:n}}function ql(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof Fo=="function"?Fo(t):t[Symbol.iterator](),r={},i("next"),i("throw"),i("return"),r[Symbol.asyncIterator]=function(){return this},r);function i(n){r[n]=t[n]&&function(o){return new Promise(function(f,d){o=t[n](o),s(f,d,o.done,o.value)})}}function s(n,o,f,d){Promise.resolve(d).then(function(u){n({value:u,done:f})},o)}}function jl(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function Kl(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function Hl(t){return t&&t.__esModule?t:{default:t}}function Vl(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function Wl(t,e,r){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,r),r}var Gl=Object.freeze({__proto__:null,__extends:Ol,get __assign(){return Lo},__rest:Rl,__decorate:Tl,__param:Nl,__metadata:Pl,__awaiter:Cl,__generator:Bl,__createBinding:Ll,__exportStar:Fl,__values:Fo,__read:Zf,__spread:$l,__spreadArrays:Ul,__await:Un,__asyncGenerator:zl,__asyncDelegator:kl,__asyncValues:ql,__makeTemplateObject:jl,__importStar:Kl,__importDefault:Hl,__classPrivateFieldGet:Vl,__classPrivateFieldSet:Wl}),Ss=Co(Gl),$o={},zn={},Qf;function Yl(){if(Qf)return zn;Qf=1,Object.defineProperty(zn,"__esModule",{value:!0}),zn.delay=void 0;function t(e){return new Promise(r=>{setTimeout(()=>{r(!0)},e)})}return zn.delay=t,zn}var $i={},Uo={},Ui={},ec;function Jl(){return ec||(ec=1,Object.defineProperty(Ui,"__esModule",{value:!0}),Ui.ONE_THOUSAND=Ui.ONE_HUNDRED=void 0,Ui.ONE_HUNDRED=100,Ui.ONE_THOUSAND=1e3),Ui}var zo={},tc;function Xl(){return tc||(tc=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_YEAR=t.FOUR_WEEKS=t.THREE_WEEKS=t.TWO_WEEKS=t.ONE_WEEK=t.THIRTY_DAYS=t.SEVEN_DAYS=t.FIVE_DAYS=t.THREE_DAYS=t.ONE_DAY=t.TWENTY_FOUR_HOURS=t.TWELVE_HOURS=t.SIX_HOURS=t.THREE_HOURS=t.ONE_HOUR=t.SIXTY_MINUTES=t.THIRTY_MINUTES=t.TEN_MINUTES=t.FIVE_MINUTES=t.ONE_MINUTE=t.SIXTY_SECONDS=t.THIRTY_SECONDS=t.TEN_SECONDS=t.FIVE_SECONDS=t.ONE_SECOND=void 0,t.ONE_SECOND=1,t.FIVE_SECONDS=5,t.TEN_SECONDS=10,t.THIRTY_SECONDS=30,t.SIXTY_SECONDS=60,t.ONE_MINUTE=t.SIXTY_SECONDS,t.FIVE_MINUTES=t.ONE_MINUTE*5,t.TEN_MINUTES=t.ONE_MINUTE*10,t.THIRTY_MINUTES=t.ONE_MINUTE*30,t.SIXTY_MINUTES=t.ONE_MINUTE*60,t.ONE_HOUR=t.SIXTY_MINUTES,t.THREE_HOURS=t.ONE_HOUR*3,t.SIX_HOURS=t.ONE_HOUR*6,t.TWELVE_HOURS=t.ONE_HOUR*12,t.TWENTY_FOUR_HOURS=t.ONE_HOUR*24,t.ONE_DAY=t.TWENTY_FOUR_HOURS,t.THREE_DAYS=t.ONE_DAY*3,t.FIVE_DAYS=t.ONE_DAY*5,t.SEVEN_DAYS=t.ONE_DAY*7,t.THIRTY_DAYS=t.ONE_DAY*30,t.ONE_WEEK=t.SEVEN_DAYS,t.TWO_WEEKS=t.ONE_WEEK*2,t.THREE_WEEKS=t.ONE_WEEK*3,t.FOUR_WEEKS=t.ONE_WEEK*4,t.ONE_YEAR=t.ONE_DAY*365}(zo)),zo}var rc;function ic(){return rc||(rc=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Ss;e.__exportStar(Jl(),t),e.__exportStar(Xl(),t)}(Uo)),Uo}var nc;function Zl(){if(nc)return $i;nc=1,Object.defineProperty($i,"__esModule",{value:!0}),$i.fromMiliseconds=$i.toMiliseconds=void 0;const t=ic();function e(i){return i*t.ONE_THOUSAND}$i.toMiliseconds=e;function r(i){return Math.floor(i/t.ONE_THOUSAND)}return $i.fromMiliseconds=r,$i}var sc;function Ql(){return sc||(sc=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Ss;e.__exportStar(Yl(),t),e.__exportStar(Zl(),t)}($o)),$o}var sn={},oc;function e1(){if(oc)return sn;oc=1,Object.defineProperty(sn,"__esModule",{value:!0}),sn.Watch=void 0;class t{constructor(){this.timestamps=new Map}start(r){if(this.timestamps.has(r))throw new Error(`Watch already started for label: ${r}`);this.timestamps.set(r,{started:Date.now()})}stop(r){const i=this.get(r);if(typeof i.elapsed<"u")throw new Error(`Watch already stopped for label: ${r}`);const s=Date.now()-i.started;this.timestamps.set(r,{started:i.started,elapsed:s})}get(r){const i=this.timestamps.get(r);if(typeof i>"u")throw new Error(`No timestamp found for label: ${r}`);return i}elapsed(r){const i=this.get(r);return i.elapsed||Date.now()-i.started}}return sn.Watch=t,sn.default=t,sn}var ko={},kn={},ac;function t1(){if(ac)return kn;ac=1,Object.defineProperty(kn,"__esModule",{value:!0}),kn.IWatch=void 0;class t{}return kn.IWatch=t,kn}var fc;function r1(){return fc||(fc=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),Ss.__exportStar(t1(),t)}(ko)),ko}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Ss;e.__exportStar(Ql(),t),e.__exportStar(e1(),t),e.__exportStar(r1(),t),e.__exportStar(ic(),t)})(ie);class zi{}class i1 extends zi{constructor(e){super()}}const cc=ie.FIVE_SECONDS,on={pulse:"heartbeat_pulse"};class qo extends i1{constructor(e){super(e),this.events=new br.exports.EventEmitter,this.interval=cc,this.interval=e?.interval||cc}static async init(e){const r=new qo(e);return await r.init(),r}async init(){await this.initialize()}stop(){clearInterval(this.intervalRef)}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async initialize(){this.intervalRef=setInterval(()=>this.pulse(),ie.toMiliseconds(this.interval))}pulse(){this.events.emit(on.pulse)}}const n1=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,s1=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,o1=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function a1(t,e){if(t==="__proto__"||t==="constructor"&&e&&typeof e=="object"&&"prototype"in e){f1(t);return}return e}function f1(t){console.warn(`[destr] Dropping "${t}" key to prevent prototype pollution.`)}function Ms(t,e={}){if(typeof t!="string")return t;const r=t.trim();if(t[0]==='"'&&t.endsWith('"')&&!t.includes("\\"))return r.slice(1,-1);if(r.length<=9){const i=r.toLowerCase();if(i==="true")return!0;if(i==="false")return!1;if(i==="undefined")return;if(i==="null")return null;if(i==="nan")return Number.NaN;if(i==="infinity")return Number.POSITIVE_INFINITY;if(i==="-infinity")return Number.NEGATIVE_INFINITY}if(!o1.test(t)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return t}try{if(n1.test(t)||s1.test(t)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(t,a1)}return JSON.parse(t)}catch(i){if(e.strict)throw i;return t}}function c1(t){return!t||typeof t.then!="function"?Promise.resolve(t):t}function Et(t,...e){try{return c1(t(...e))}catch(r){return Promise.reject(r)}}function h1(t){const e=typeof t;return t===null||e!=="object"&&e!=="function"}function u1(t){const e=Object.getPrototypeOf(t);return!e||e.isPrototypeOf(Object)}function Is(t){if(h1(t))return String(t);if(u1(t)||Array.isArray(t))return JSON.stringify(t);if(typeof t.toJSON=="function")return Is(t.toJSON());throw new Error("[unstorage] Cannot stringify value!")}const jo="base64:";function d1(t){return typeof t=="string"?t:jo+b1(t)}function l1(t){return typeof t!="string"||!t.startsWith(jo)?t:p1(t.slice(jo.length))}function p1(t){return globalThis.Buffer?Buffer.from(t,"base64"):Uint8Array.from(globalThis.atob(t),e=>e.codePointAt(0))}function b1(t){return globalThis.Buffer?Buffer.from(t).toString("base64"):globalThis.btoa(String.fromCodePoint(...t))}function Yt(t){return t&&t.split("?")[0]?.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,"")||""}function v1(...t){return Yt(t.join(":"))}function As(t){return t=Yt(t),t?t+":":""}function aw(t){return t}const g1="memory",y1=()=>{const t=new Map;return{name:g1,getInstance:()=>t,hasItem(e){return t.has(e)},getItem(e){return t.get(e)??null},getItemRaw(e){return t.get(e)??null},setItem(e,r){t.set(e,r)},setItemRaw(e,r){t.set(e,r)},removeItem(e){t.delete(e)},getKeys(){return[...t.keys()]},clear(){t.clear()},dispose(){t.clear()}}};function m1(t={}){const e={mounts:{"":t.driver||y1()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},r=u=>{for(const v of e.mountpoints)if(u.startsWith(v))return{base:v,relativeKey:u.slice(v.length),driver:e.mounts[v]};return{base:"",relativeKey:u,driver:e.mounts[""]}},i=(u,v)=>e.mountpoints.filter(w=>w.startsWith(u)||v&&u.startsWith(w)).map(w=>({relativeBase:u.length>w.length?u.slice(w.length):void 0,mountpoint:w,driver:e.mounts[w]})),s=(u,v)=>{if(e.watching){v=Yt(v);for(const w of e.watchListeners)w(u,v)}},n=async()=>{if(!e.watching){e.watching=!0;for(const u in e.mounts)e.unwatch[u]=await hc(e.mounts[u],s,u)}},o=async()=>{if(e.watching){for(const u in e.unwatch)await e.unwatch[u]();e.unwatch={},e.watching=!1}},f=(u,v,w)=>{const S=new Map,I=M=>{let R=S.get(M.base);return R||(R={driver:M.driver,base:M.base,items:[]},S.set(M.base,R)),R};for(const M of u){const R=typeof M=="string",N=Yt(R?M:M.key),C=R?void 0:M.value,B=R||!M.options?v:{...v,...M.options},F=r(N);I(F).items.push({key:N,value:C,relativeKey:F.relativeKey,options:B})}return Promise.all([...S.values()].map(M=>w(M))).then(M=>M.flat())},d={hasItem(u,v={}){u=Yt(u);const{relativeKey:w,driver:S}=r(u);return Et(S.hasItem,w,v)},getItem(u,v={}){u=Yt(u);const{relativeKey:w,driver:S}=r(u);return Et(S.getItem,w,v).then(I=>Ms(I))},getItems(u,v={}){return f(u,v,w=>w.driver.getItems?Et(w.driver.getItems,w.items.map(S=>({key:S.relativeKey,options:S.options})),v).then(S=>S.map(I=>({key:v1(w.base,I.key),value:Ms(I.value)}))):Promise.all(w.items.map(S=>Et(w.driver.getItem,S.relativeKey,S.options).then(I=>({key:S.key,value:Ms(I)})))))},getItemRaw(u,v={}){u=Yt(u);const{relativeKey:w,driver:S}=r(u);return S.getItemRaw?Et(S.getItemRaw,w,v):Et(S.getItem,w,v).then(I=>l1(I))},async setItem(u,v,w={}){if(v===void 0)return d.removeItem(u);u=Yt(u);const{relativeKey:S,driver:I}=r(u);I.setItem&&(await Et(I.setItem,S,Is(v),w),I.watch||s("update",u))},async setItems(u,v){await f(u,v,async w=>{if(w.driver.setItems)return Et(w.driver.setItems,w.items.map(S=>({key:S.relativeKey,value:Is(S.value),options:S.options})),v);w.driver.setItem&&await Promise.all(w.items.map(S=>Et(w.driver.setItem,S.relativeKey,Is(S.value),S.options)))})},async setItemRaw(u,v,w={}){if(v===void 0)return d.removeItem(u,w);u=Yt(u);const{relativeKey:S,driver:I}=r(u);if(I.setItemRaw)await Et(I.setItemRaw,S,v,w);else if(I.setItem)await Et(I.setItem,S,d1(v),w);else return;I.watch||s("update",u)},async removeItem(u,v={}){typeof v=="boolean"&&(v={removeMeta:v}),u=Yt(u);const{relativeKey:w,driver:S}=r(u);S.removeItem&&(await Et(S.removeItem,w,v),(v.removeMeta||v.removeMata)&&await Et(S.removeItem,w+"$",v),S.watch||s("remove",u))},async getMeta(u,v={}){typeof v=="boolean"&&(v={nativeOnly:v}),u=Yt(u);const{relativeKey:w,driver:S}=r(u),I=Object.create(null);if(S.getMeta&&Object.assign(I,await Et(S.getMeta,w,v)),!v.nativeOnly){const M=await Et(S.getItem,w+"$",v).then(R=>Ms(R));M&&typeof M=="object"&&(typeof M.atime=="string"&&(M.atime=new Date(M.atime)),typeof M.mtime=="string"&&(M.mtime=new Date(M.mtime)),Object.assign(I,M))}return I},setMeta(u,v,w={}){return this.setItem(u+"$",v,w)},removeMeta(u,v={}){return this.removeItem(u+"$",v)},async getKeys(u,v={}){u=As(u);const w=i(u,!0);let S=[];const I=[];for(const M of w){const R=await Et(M.driver.getKeys,M.relativeBase,v);for(const N of R){const C=M.mountpoint+Yt(N);S.some(B=>C.startsWith(B))||I.push(C)}S=[M.mountpoint,...S.filter(N=>!N.startsWith(M.mountpoint))]}return u?I.filter(M=>M.startsWith(u)&&M[M.length-1]!=="$"):I.filter(M=>M[M.length-1]!=="$")},async clear(u,v={}){u=As(u),await Promise.all(i(u,!1).map(async w=>{if(w.driver.clear)return Et(w.driver.clear,w.relativeBase,v);if(w.driver.removeItem){const S=await w.driver.getKeys(w.relativeBase||"",v);return Promise.all(S.map(I=>w.driver.removeItem(I,v)))}}))},async dispose(){await Promise.all(Object.values(e.mounts).map(u=>uc(u)))},async watch(u){return await n(),e.watchListeners.push(u),async()=>{e.watchListeners=e.watchListeners.filter(v=>v!==u),e.watchListeners.length===0&&await o()}},async unwatch(){e.watchListeners=[],await o()},mount(u,v){if(u=As(u),u&&e.mounts[u])throw new Error(`already mounted at ${u}`);return u&&(e.mountpoints.push(u),e.mountpoints.sort((w,S)=>S.length-w.length)),e.mounts[u]=v,e.watching&&Promise.resolve(hc(v,s,u)).then(w=>{e.unwatch[u]=w}).catch(console.error),d},async unmount(u,v=!0){u=As(u),!(!u||!e.mounts[u])&&(e.watching&&u in e.unwatch&&(e.unwatch[u]?.(),delete e.unwatch[u]),v&&await uc(e.mounts[u]),e.mountpoints=e.mountpoints.filter(w=>w!==u),delete e.mounts[u])},getMount(u=""){u=Yt(u)+":";const v=r(u);return{driver:v.driver,base:v.base}},getMounts(u="",v={}){return u=Yt(u),i(u,v.parents).map(S=>({driver:S.driver,base:S.mountpoint}))},keys:(u,v={})=>d.getKeys(u,v),get:(u,v={})=>d.getItem(u,v),set:(u,v,w={})=>d.setItem(u,v,w),has:(u,v={})=>d.hasItem(u,v),del:(u,v={})=>d.removeItem(u,v),remove:(u,v={})=>d.removeItem(u,v)};return d}function hc(t,e,r){return t.watch?t.watch((i,s)=>e(i,r+s)):()=>{}}async function uc(t){typeof t.dispose=="function"&&await Et(t.dispose)}function ki(t){return new Promise((e,r)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>r(t.error)})}function dc(t,e){const r=indexedDB.open(t);r.onupgradeneeded=()=>r.result.createObjectStore(e);const i=ki(r);return(s,n)=>i.then(o=>n(o.transaction(e,s).objectStore(e)))}let Ko;function qn(){return Ko||(Ko=dc("keyval-store","keyval")),Ko}function lc(t,e=qn()){return e("readonly",r=>ki(r.get(t)))}function w1(t,e,r=qn()){return r("readwrite",i=>(i.put(e,t),ki(i.transaction)))}function _1(t,e=qn()){return e("readwrite",r=>(r.delete(t),ki(r.transaction)))}function E1(t=qn()){return t("readwrite",e=>(e.clear(),ki(e.transaction)))}function x1(t,e){return t.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},ki(t.transaction)}function S1(t=qn()){return t("readonly",e=>{if(e.getAllKeys)return ki(e.getAllKeys());const r=[];return x1(e,i=>r.push(i.key)).then(()=>r)})}const M1=t=>JSON.stringify(t,(e,r)=>typeof r=="bigint"?r.toString()+"n":r),I1=t=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,r=t.replace(e,'$1"$2n"$3');return JSON.parse(r,(i,s)=>typeof s=="string"&&s.match(/^\d+n$/)?BigInt(s.substring(0,s.length-1)):s)};function an(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return I1(t)}catch{return t}}function qi(t){return typeof t=="string"?t:M1(t)||""}const A1="idb-keyval";var D1=(t={})=>{const e=t.base&&t.base.length>0?`${t.base}:`:"",r=s=>e+s;let i;return t.dbName&&t.storeName&&(i=dc(t.dbName,t.storeName)),{name:A1,options:t,async hasItem(s){return!(typeof await lc(r(s),i)>"u")},async getItem(s){return await lc(r(s),i)??null},setItem(s,n){return w1(r(s),n,i)},removeItem(s){return _1(r(s),i)},getKeys(){return S1(i)},clear(){return E1(i)}}};const O1="WALLET_CONNECT_V2_INDEXED_DB",R1="keyvaluestorage";class T1{constructor(){this.indexedDb=m1({driver:D1({dbName:O1,storeName:R1})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){const r=await this.indexedDb.getItem(e);if(r!==null)return r}async setItem(e,r){await this.indexedDb.setItem(e,qi(r))}async removeItem(e){await this.indexedDb.removeItem(e)}}var Ho=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ds={exports:{}};(function(){let t;function e(){}t=e,t.prototype.getItem=function(r){return this.hasOwnProperty(r)?String(this[r]):null},t.prototype.setItem=function(r,i){this[r]=String(i)},t.prototype.removeItem=function(r){delete this[r]},t.prototype.clear=function(){const r=this;Object.keys(r).forEach(function(i){r[i]=void 0,delete r[i]})},t.prototype.key=function(r){return r=r||0,Object.keys(this)[r]},t.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof Ho<"u"&&Ho.localStorage?Ds.exports=Ho.localStorage:typeof window<"u"&&window.localStorage?Ds.exports=window.localStorage:Ds.exports=new e})();function N1(t){var e;return[t[0],an((e=t[1])!=null?e:"")]}class P1{constructor(){this.localStorage=Ds.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(N1)}async getItem(e){const r=this.localStorage.getItem(e);if(r!==null)return an(r)}async setItem(e,r){this.localStorage.setItem(e,qi(r))}async removeItem(e){this.localStorage.removeItem(e)}}const C1="wc_storage_version",pc=1,B1=async(t,e,r)=>{const i=C1,s=await e.getItem(i);if(s&&s>=pc){r(e);return}const n=await t.getKeys();if(!n.length){r(e);return}const o=[];for(;n.length;){const f=n.shift();if(!f)continue;const d=f.toLowerCase();if(d.includes("wc@")||d.includes("walletconnect")||d.includes("wc_")||d.includes("wallet_connect")){const u=await t.getItem(f);await e.setItem(f,u),o.push(f)}}await e.setItem(i,pc),r(e),L1(t,o)},L1=async(t,e)=>{e.length&&e.forEach(async r=>{await t.removeItem(r)})};class F1{constructor(){this.initialized=!1,this.setInitialized=r=>{this.storage=r,this.initialized=!0};const e=new P1;this.storage=e;try{const r=new T1;B1(e,r,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,r){return await this.initialize(),this.storage.setItem(e,r)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{const r=setInterval(()=>{this.initialized&&(clearInterval(r),e())},20)})}}function $1(t){try{return JSON.stringify(t)}catch{return'"[Circular]"'}}var U1=z1;function z1(t,e,r){var i=r&&r.stringify||$1,s=1;if(typeof t=="object"&&t!==null){var n=e.length+s;if(n===1)return t;var o=new Array(n);o[0]=i(t);for(var f=1;f<n;f++)o[f]=i(e[f]);return o.join(" ")}if(typeof t!="string")return t;var d=e.length;if(d===0)return t;for(var u="",v=1-s,w=-1,S=t&&t.length||0,I=0;I<S;){if(t.charCodeAt(I)===37&&I+1<S){switch(w=w>-1?w:0,t.charCodeAt(I+1)){case 100:case 102:if(v>=d||e[v]==null)break;w<I&&(u+=t.slice(w,I)),u+=Number(e[v]),w=I+2,I++;break;case 105:if(v>=d||e[v]==null)break;w<I&&(u+=t.slice(w,I)),u+=Math.floor(Number(e[v])),w=I+2,I++;break;case 79:case 111:case 106:if(v>=d||e[v]===void 0)break;w<I&&(u+=t.slice(w,I));var M=typeof e[v];if(M==="string"){u+="'"+e[v]+"'",w=I+2,I++;break}if(M==="function"){u+=e[v].name||"<anonymous>",w=I+2,I++;break}u+=i(e[v]),w=I+2,I++;break;case 115:if(v>=d)break;w<I&&(u+=t.slice(w,I)),u+=String(e[v]),w=I+2,I++;break;case 37:w<I&&(u+=t.slice(w,I)),u+="%",w=I+2,I++,v--;break}++v}++I}return w===-1?t:(w<S&&(u+=t.slice(w)),u)}const bc=U1;var Ei=Ur;const jn=J1().console||{},k1={mapHttpRequest:Rs,mapHttpResponse:Rs,wrapRequestSerializer:Wo,wrapResponseSerializer:Wo,wrapErrorSerializer:Wo,req:Rs,res:Rs,err:V1};function q1(t,e){return Array.isArray(t)?t.filter(function(i){return i!=="!stdSerializers.err"}):t===!0?Object.keys(e):!1}function Ur(t){t=t||{},t.browser=t.browser||{};const e=t.browser.transmit;if(e&&typeof e.send!="function")throw Error("pino: transmit option must have a send function");const r=t.browser.write||jn;t.browser.write&&(t.browser.asObject=!0);const i=t.serializers||{},s=q1(t.browser.serialize,i);let n=t.browser.serialize;Array.isArray(t.browser.serialize)&&t.browser.serialize.indexOf("!stdSerializers.err")>-1&&(n=!1);const o=["error","fatal","warn","info","debug","trace"];typeof r=="function"&&(r.error=r.fatal=r.warn=r.info=r.debug=r.trace=r),t.enabled===!1&&(t.level="silent");const f=t.level||"info",d=Object.create(r);d.log||(d.log=Kn),Object.defineProperty(d,"levelVal",{get:v}),Object.defineProperty(d,"level",{get:w,set:S});const u={transmit:e,serialize:s,asObject:t.browser.asObject,levels:o,timestamp:W1(t)};d.levels=Ur.levels,d.level=f,d.setMaxListeners=d.getMaxListeners=d.emit=d.addListener=d.on=d.prependListener=d.once=d.prependOnceListener=d.removeListener=d.removeAllListeners=d.listeners=d.listenerCount=d.eventNames=d.write=d.flush=Kn,d.serializers=i,d._serialize=s,d._stdErrSerialize=n,d.child=I,e&&(d._logEvent=Vo());function v(){return this.level==="silent"?1/0:this.levels.values[this.level]}function w(){return this._level}function S(M){if(M!=="silent"&&!this.levels.values[M])throw Error("unknown level "+M);this._level=M,fn(u,d,"error","log"),fn(u,d,"fatal","error"),fn(u,d,"warn","error"),fn(u,d,"info","log"),fn(u,d,"debug","log"),fn(u,d,"trace","log")}function I(M,R){if(!M)throw new Error("missing bindings for child Pino");R=R||{},s&&M.serializers&&(R.serializers=M.serializers);const N=R.serializers;if(s&&N){var C=Object.assign({},i,N),B=t.browser.serialize===!0?Object.keys(C):s;delete M.serializers,Os([M],B,C,this._stdErrSerialize)}function F(k){this._childLevel=(k._childLevel|0)+1,this.error=cn(k,M,"error"),this.fatal=cn(k,M,"fatal"),this.warn=cn(k,M,"warn"),this.info=cn(k,M,"info"),this.debug=cn(k,M,"debug"),this.trace=cn(k,M,"trace"),C&&(this.serializers=C,this._serialize=B),e&&(this._logEvent=Vo([].concat(k._logEvent.bindings,M)))}return F.prototype=this,new F(this)}return d}Ur.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},Ur.stdSerializers=k1,Ur.stdTimeFunctions=Object.assign({},{nullTime:vc,epochTime:gc,unixTime:G1,isoTime:Y1});function fn(t,e,r,i){const s=Object.getPrototypeOf(e);e[r]=e.levelVal>e.levels.values[r]?Kn:s[r]?s[r]:jn[r]||jn[i]||Kn,j1(t,e,r)}function j1(t,e,r){!t.transmit&&e[r]===Kn||(e[r]=function(i){return function(){const n=t.timestamp(),o=new Array(arguments.length),f=Object.getPrototypeOf&&Object.getPrototypeOf(this)===jn?jn:this;for(var d=0;d<o.length;d++)o[d]=arguments[d];if(t.serialize&&!t.asObject&&Os(o,this._serialize,this.serializers,this._stdErrSerialize),t.asObject?i.call(f,K1(this,r,o,n)):i.apply(f,o),t.transmit){const u=t.transmit.level||e.level,v=Ur.levels.values[u],w=Ur.levels.values[r];if(w<v)return;H1(this,{ts:n,methodLevel:r,methodValue:w,transmitLevel:u,transmitValue:Ur.levels.values[t.transmit.level||e.level],send:t.transmit.send,val:e.levelVal},o)}}}(e[r]))}function K1(t,e,r,i){t._serialize&&Os(r,t._serialize,t.serializers,t._stdErrSerialize);const s=r.slice();let n=s[0];const o={};i&&(o.time=i),o.level=Ur.levels.values[e];let f=(t._childLevel|0)+1;if(f<1&&(f=1),n!==null&&typeof n=="object"){for(;f--&&typeof s[0]=="object";)Object.assign(o,s.shift());n=s.length?bc(s.shift(),s):void 0}else typeof n=="string"&&(n=bc(s.shift(),s));return n!==void 0&&(o.msg=n),o}function Os(t,e,r,i){for(const s in t)if(i&&t[s]instanceof Error)t[s]=Ur.stdSerializers.err(t[s]);else if(typeof t[s]=="object"&&!Array.isArray(t[s]))for(const n in t[s])e&&e.indexOf(n)>-1&&n in r&&(t[s][n]=r[n](t[s][n]))}function cn(t,e,r){return function(){const i=new Array(1+arguments.length);i[0]=e;for(var s=1;s<i.length;s++)i[s]=arguments[s-1];return t[r].apply(this,i)}}function H1(t,e,r){const i=e.send,s=e.ts,n=e.methodLevel,o=e.methodValue,f=e.val,d=t._logEvent.bindings;Os(r,t._serialize||Object.keys(t.serializers),t.serializers,t._stdErrSerialize===void 0?!0:t._stdErrSerialize),t._logEvent.ts=s,t._logEvent.messages=r.filter(function(u){return d.indexOf(u)===-1}),t._logEvent.level.label=n,t._logEvent.level.value=o,i(n,t._logEvent,f),t._logEvent=Vo(d)}function Vo(t){return{ts:0,messages:[],bindings:t||[],level:{label:"",value:0}}}function V1(t){const e={type:t.constructor.name,msg:t.message,stack:t.stack};for(const r in t)e[r]===void 0&&(e[r]=t[r]);return e}function W1(t){return typeof t.timestamp=="function"?t.timestamp:t.timestamp===!1?vc:gc}function Rs(){return{}}function Wo(t){return t}function Kn(){}function vc(){return!1}function gc(){return Date.now()}function G1(){return Math.round(Date.now()/1e3)}function Y1(){return new Date(Date.now()).toISOString()}function J1(){function t(e){return typeof e<"u"&&e}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return t(self)||t(window)||t(this)||{}}}const X1={level:"info"},Hn="custom_context",Go=1e3*1024;class Z1{constructor(e){this.nodeValue=e,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}}class yc{constructor(e){this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=e,this.sizeInBytes=0}append(e){const r=new Z1(e);if(r.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${e} with size ${r.size}`);for(;this.size+r.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=r),this.tail=r):(this.head=r,this.tail=r),this.lengthInNodes++,this.sizeInBytes+=r.size}shift(){if(!this.head)return;const e=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=e.size}toArray(){const e=[];let r=this.head;for(;r!==null;)e.push(r.value),r=r.next;return e}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let e=this.head;return{next:()=>{if(!e)return{done:!0,value:null};const r=e.value;return e=e.next,{done:!1,value:r}}}}}class mc{constructor(e,r=Go){this.level=e??"error",this.levelValue=Ei.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=r,this.logs=new yc(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(e,r){r===Ei.levels.values.error?console.error(e):r===Ei.levels.values.warn?console.warn(e):r===Ei.levels.values.debug?console.debug(e):r===Ei.levels.values.trace?console.trace(e):console.log(e)}appendToLogs(e){this.logs.append(qi({timestamp:new Date().toISOString(),log:e}));const r=typeof e=="string"?JSON.parse(e).level:e.level;r>=this.levelValue&&this.forwardToConsole(e,r)}getLogs(){return this.logs}clearLogs(){this.logs=new yc(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(e){const r=this.getLogArray();return r.push(qi({extraMetadata:e})),new Blob(r,{type:"application/json"})}}class Q1{constructor(e,r=Go){this.baseChunkLogger=new mc(e,r)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}downloadLogsBlobInBrowser(e){const r=URL.createObjectURL(this.logsToBlob(e)),i=document.createElement("a");i.href=r,i.download=`walletconnect-logs-${new Date().toISOString()}.txt`,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(r)}}class ep{constructor(e,r=Go){this.baseChunkLogger=new mc(e,r)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}}var tp=Object.defineProperty,rp=Object.defineProperties,ip=Object.getOwnPropertyDescriptors,wc=Object.getOwnPropertySymbols,np=Object.prototype.hasOwnProperty,sp=Object.prototype.propertyIsEnumerable,_c=(t,e,r)=>e in t?tp(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Ts=(t,e)=>{for(var r in e||(e={}))np.call(e,r)&&_c(t,r,e[r]);if(wc)for(var r of wc(e))sp.call(e,r)&&_c(t,r,e[r]);return t},Ns=(t,e)=>rp(t,ip(e));function Ec(t){return Ns(Ts({},t),{level:t?.level||X1.level})}function op(t,e=Hn){return t[e]||""}function ap(t,e,r=Hn){return t[r]=e,t}function ar(t,e=Hn){let r="";return typeof t.bindings>"u"?r=op(t,e):r=t.bindings().context||"",r}function fp(t,e,r=Hn){const i=ar(t,r);return i.trim()?`${i}/${e}`:e}function Jt(t,e,r=Hn){const i=fp(t,e,r),s=t.child({context:i});return ap(s,i,r)}function cp(t){var e,r;const i=new Q1((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:Ei(Ns(Ts({},t.opts),{level:"trace",browser:Ns(Ts({},(r=t.opts)==null?void 0:r.browser),{write:s=>i.write(s)})})),chunkLoggerController:i}}function hp(t){var e;const r=new ep((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:Ei(Ns(Ts({},t.opts),{level:"trace"})),chunkLoggerController:r}}function up(t){return typeof t.loggerOverride<"u"&&typeof t.loggerOverride!="string"?{logger:t.loggerOverride,chunkLoggerController:null}:typeof window<"u"?cp(t):hp(t)}var dp=Object.defineProperty,lp=(t,e,r)=>e in t?dp(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,xc=(t,e,r)=>lp(t,typeof e!="symbol"?e+"":e,r);class pp extends zi{constructor(e){super(),this.opts=e,xc(this,"protocol","wc"),xc(this,"version",2)}}var bp=Object.defineProperty,vp=(t,e,r)=>e in t?bp(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,gp=(t,e,r)=>vp(t,typeof e!="symbol"?e+"":e,r);class yp extends zi{constructor(e,r){super(),this.core=e,this.logger=r,gp(this,"records",new Map)}}class mp{constructor(e,r){this.logger=e,this.core=r}}class wp extends zi{constructor(e,r){super(),this.relayer=e,this.logger=r}}class _p extends zi{constructor(e){super()}}class Ep{constructor(e,r,i,s){this.core=e,this.logger=r,this.name=i}}class xp extends zi{constructor(e,r){super(),this.relayer=e,this.logger=r}}class Sp extends zi{constructor(e,r){super(),this.core=e,this.logger=r}}class Mp{constructor(e,r,i){this.core=e,this.logger=r,this.store=i}}class Ip{constructor(e,r){this.projectId=e,this.logger=r}}class Ap{constructor(e,r,i){this.core=e,this.logger=r,this.telemetryEnabled=i}}const Yo="wc",Jo=2,Vn="core",Dr=`${Yo}@2:${Vn}:`,Sc={name:Vn,logger:"error"},Mc={database:":memory:"},Ic="crypto",Xo="client_ed25519_seed",Ac=ie.ONE_DAY,Dc="keychain",Oc="0.3",Rc="messages",Tc="0.3",Zo=ie.SIX_HOURS,Nc="publisher",Pc="irn",Cc="error",Qo="wss://relay.walletconnect.org",Bc="relayer",Tt={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},Lc="_subscription",fr={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},Fc=.1,Dp={database:":memory:"},Ps="2.18.1",Op=1e4,ji={link_mode:"link_mode",relay:"relay"},$c="0.3",Uc="WALLETCONNECT_CLIENT_ID",ea="WALLETCONNECT_LINK_MODE_APPS",Xt={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},Rp=ie.THIRTY_DAYS,zc="subscription",kc="0.3",qc=ie.FIVE_SECONDS*1e3,jc="pairing",Kc="0.3",Tp=ie.THIRTY_DAYS,hn={wc_pairingDelete:{req:{ttl:ie.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:ie.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:ie.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:ie.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:ie.ONE_DAY,prompt:!1,tag:0},res:{ttl:ie.ONE_DAY,prompt:!1,tag:0}}},un={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},vr={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},Hc="history",Vc="0.3",Wc="expirer",gr={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},Gc="0.3",Np=ie.ONE_DAY,Yc="verify-api",Pp="https://verify.walletconnect.com",Jc="https://verify.walletconnect.org",Wn=Jc,Xc=`${Wn}/v3`,Zc=[Pp,Jc],Qc="echo",eh="https://echo.walletconnect.com",Cp="event-client",zr={pairing_started:"pairing_started",pairing_uri_validation_success:"pairing_uri_validation_success",pairing_uri_not_expired:"pairing_uri_not_expired",store_new_pairing:"store_new_pairing",subscribing_pairing_topic:"subscribing_pairing_topic",subscribe_pairing_topic_success:"subscribe_pairing_topic_success",existing_pairing:"existing_pairing",pairing_not_expired:"pairing_not_expired",emit_inactive_pairing:"emit_inactive_pairing",emit_session_proposal:"emit_session_proposal",subscribing_to_pairing_topic:"subscribing_to_pairing_topic"},ei={no_wss_connection:"no_wss_connection",no_internet_connection:"no_internet_connection",malformed_pairing_uri:"malformed_pairing_uri",active_pairing_already_exists:"active_pairing_already_exists",subscribe_pairing_topic_failure:"subscribe_pairing_topic_failure",pairing_expired:"pairing_expired",proposal_expired:"proposal_expired",proposal_listener_not_found:"proposal_listener_not_found"},Bp={session_approve_started:"session_approve_started",proposal_not_expired:"proposal_not_expired",session_namespaces_validation_success:"session_namespaces_validation_success",create_session_topic:"create_session_topic",subscribing_session_topic:"subscribing_session_topic",subscribe_session_topic_success:"subscribe_session_topic_success",publishing_session_approve:"publishing_session_approve",session_approve_publish_success:"session_approve_publish_success",store_session:"store_session",publishing_session_settle:"publishing_session_settle",session_settle_publish_success:"session_settle_publish_success"},Lp={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",proposal_expired:"proposal_expired",subscribe_session_topic_failure:"subscribe_session_topic_failure",session_approve_publish_failure:"session_approve_publish_failure",session_settle_publish_failure:"session_settle_publish_failure",session_approve_namespace_validation_failure:"session_approve_namespace_validation_failure",proposal_not_found:"proposal_not_found"},Fp={authenticated_session_approve_started:"authenticated_session_approve_started",authenticated_session_not_expired:"authenticated_session_not_expired",chains_caip2_compliant:"chains_caip2_compliant",chains_evm_compliant:"chains_evm_compliant",create_authenticated_session_topic:"create_authenticated_session_topic",cacaos_verified:"cacaos_verified",store_authenticated_session:"store_authenticated_session",subscribing_authenticated_session_topic:"subscribing_authenticated_session_topic",subscribe_authenticated_session_topic_success:"subscribe_authenticated_session_topic_success",publishing_authenticated_session_approve:"publishing_authenticated_session_approve",authenticated_session_approve_publish_success:"authenticated_session_approve_publish_success"},$p={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",missing_session_authenticate_request:"missing_session_authenticate_request",session_authenticate_request_expired:"session_authenticate_request_expired",chains_caip2_compliant_failure:"chains_caip2_compliant_failure",chains_evm_compliant_failure:"chains_evm_compliant_failure",invalid_cacao:"invalid_cacao",subscribe_authenticated_session_topic_failure:"subscribe_authenticated_session_topic_failure",authenticated_session_approve_publish_failure:"authenticated_session_approve_publish_failure",authenticated_session_pending_request_not_found:"authenticated_session_pending_request_not_found"},th=.1,rh="event-client",ih=86400,nh="https://pulse.walletconnect.org/batch";function Up(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function sh(t,...e){if(!Up(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function oh(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function zp(t,e){sh(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}const dn=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ta=t=>new DataView(t.buffer,t.byteOffset,t.byteLength);function kp(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function ah(t){return typeof t=="string"&&(t=kp(t)),sh(t),t}class qp{clone(){return this._cloneInto()}}function jp(t){const e=i=>t().update(ah(i)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function fh(t=32){if(dn&&typeof dn.getRandomValues=="function")return dn.getRandomValues(new Uint8Array(t));if(dn&&typeof dn.randomBytes=="function")return dn.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}function Kp(t,e,r,i){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,i);const s=BigInt(32),n=BigInt(4294967295),o=Number(r>>s&n),f=Number(r&n),d=i?4:0,u=i?0:4;t.setUint32(e+d,o,i),t.setUint32(e+u,f,i)}class Hp extends qp{constructor(e,r,i,s){super(),this.blockLen=e,this.outputLen=r,this.padOffset=i,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=ta(this.buffer)}update(e){oh(this);const{view:r,buffer:i,blockLen:s}=this;e=ah(e);const n=e.length;for(let o=0;o<n;){const f=Math.min(s-this.pos,n-o);if(f===s){const d=ta(e);for(;s<=n-o;o+=s)this.process(d,o);continue}i.set(e.subarray(o,o+f),this.pos),this.pos+=f,o+=f,this.pos===s&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){oh(this),zp(e,this),this.finished=!0;const{buffer:r,view:i,blockLen:s,isLE:n}=this;let{pos:o}=this;r[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(i,0),o=0);for(let w=o;w<s;w++)r[w]=0;Kp(i,s-8,BigInt(this.length*8),n),this.process(i,0);const f=ta(e),d=this.outputLen;if(d%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=d/4,v=this.get();if(u>v.length)throw new Error("_sha2: outputLen bigger than state");for(let w=0;w<u;w++)f.setUint32(4*w,v[w],n)}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const i=e.slice(0,r);return this.destroy(),i}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:r,buffer:i,length:s,finished:n,destroyed:o,pos:f}=this;return e.length=s,e.pos=f,e.finished=n,e.destroyed=o,s%r&&e.buffer.set(i),e}}const Cs=BigInt(2**32-1),ra=BigInt(32);function ch(t,e=!1){return e?{h:Number(t&Cs),l:Number(t>>ra&Cs)}:{h:Number(t>>ra&Cs)|0,l:Number(t&Cs)|0}}function Vp(t,e=!1){let r=new Uint32Array(t.length),i=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:n,l:o}=ch(t[s],e);[r[s],i[s]]=[n,o]}return[r,i]}const Wp=(t,e)=>BigInt(t>>>0)<<ra|BigInt(e>>>0),Gp=(t,e,r)=>t>>>r,Yp=(t,e,r)=>t<<32-r|e>>>r,Jp=(t,e,r)=>t>>>r|e<<32-r,Xp=(t,e,r)=>t<<32-r|e>>>r,Zp=(t,e,r)=>t<<64-r|e>>>r-32,Qp=(t,e,r)=>t>>>r-32|e<<64-r,eb=(t,e)=>e,tb=(t,e)=>t,rb=(t,e,r)=>t<<r|e>>>32-r,ib=(t,e,r)=>e<<r|t>>>32-r,nb=(t,e,r)=>e<<r-32|t>>>64-r,sb=(t,e,r)=>t<<r-32|e>>>64-r;function ob(t,e,r,i){const s=(e>>>0)+(i>>>0);return{h:t+r+(s/2**32|0)|0,l:s|0}}const ab=(t,e,r)=>(t>>>0)+(e>>>0)+(r>>>0),fb=(t,e,r,i)=>e+r+i+(t/2**32|0)|0,cb=(t,e,r,i)=>(t>>>0)+(e>>>0)+(r>>>0)+(i>>>0),hb=(t,e,r,i,s)=>e+r+i+s+(t/2**32|0)|0,ub=(t,e,r,i,s)=>(t>>>0)+(e>>>0)+(r>>>0)+(i>>>0)+(s>>>0),db=(t,e,r,i,s,n)=>e+r+i+s+n+(t/2**32|0)|0,_e={fromBig:ch,split:Vp,toBig:Wp,shrSH:Gp,shrSL:Yp,rotrSH:Jp,rotrSL:Xp,rotrBH:Zp,rotrBL:Qp,rotr32H:eb,rotr32L:tb,rotlSH:rb,rotlSL:ib,rotlBH:nb,rotlBL:sb,add:ob,add3L:ab,add3H:fb,add4L:cb,add4H:hb,add5H:db,add5L:ub},[lb,pb]=_e.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),xi=new Uint32Array(80),Si=new Uint32Array(80);class bb extends Hp{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:r,Bh:i,Bl:s,Ch:n,Cl:o,Dh:f,Dl:d,Eh:u,El:v,Fh:w,Fl:S,Gh:I,Gl:M,Hh:R,Hl:N}=this;return[e,r,i,s,n,o,f,d,u,v,w,S,I,M,R,N]}set(e,r,i,s,n,o,f,d,u,v,w,S,I,M,R,N){this.Ah=e|0,this.Al=r|0,this.Bh=i|0,this.Bl=s|0,this.Ch=n|0,this.Cl=o|0,this.Dh=f|0,this.Dl=d|0,this.Eh=u|0,this.El=v|0,this.Fh=w|0,this.Fl=S|0,this.Gh=I|0,this.Gl=M|0,this.Hh=R|0,this.Hl=N|0}process(e,r){for(let F=0;F<16;F++,r+=4)xi[F]=e.getUint32(r),Si[F]=e.getUint32(r+=4);for(let F=16;F<80;F++){const k=xi[F-15]|0,V=Si[F-15]|0,H=_e.rotrSH(k,V,1)^_e.rotrSH(k,V,8)^_e.shrSH(k,V,7),G=_e.rotrSL(k,V,1)^_e.rotrSL(k,V,8)^_e.shrSL(k,V,7),J=xi[F-2]|0,j=Si[F-2]|0,te=_e.rotrSH(J,j,19)^_e.rotrBH(J,j,61)^_e.shrSH(J,j,6),D=_e.rotrSL(J,j,19)^_e.rotrBL(J,j,61)^_e.shrSL(J,j,6),p=_e.add4L(G,D,Si[F-7],Si[F-16]),l=_e.add4H(p,H,te,xi[F-7],xi[F-16]);xi[F]=l|0,Si[F]=p|0}let{Ah:i,Al:s,Bh:n,Bl:o,Ch:f,Cl:d,Dh:u,Dl:v,Eh:w,El:S,Fh:I,Fl:M,Gh:R,Gl:N,Hh:C,Hl:B}=this;for(let F=0;F<80;F++){const k=_e.rotrSH(w,S,14)^_e.rotrSH(w,S,18)^_e.rotrBH(w,S,41),V=_e.rotrSL(w,S,14)^_e.rotrSL(w,S,18)^_e.rotrBL(w,S,41),H=w&I^~w&R,G=S&M^~S&N,J=_e.add5L(B,V,G,pb[F],Si[F]),j=_e.add5H(J,C,k,H,lb[F],xi[F]),te=J|0,D=_e.rotrSH(i,s,28)^_e.rotrBH(i,s,34)^_e.rotrBH(i,s,39),p=_e.rotrSL(i,s,28)^_e.rotrBL(i,s,34)^_e.rotrBL(i,s,39),l=i&n^i&f^n&f,a=s&o^s&d^o&d;C=R|0,B=N|0,R=I|0,N=M|0,I=w|0,M=S|0,{h:w,l:S}=_e.add(u|0,v|0,j|0,te|0),u=f|0,v=d|0,f=n|0,d=o|0,n=i|0,o=s|0;const c=_e.add3L(te,p,a);i=_e.add3H(c,j,D,l),s=c|0}({h:i,l:s}=_e.add(this.Ah|0,this.Al|0,i|0,s|0)),{h:n,l:o}=_e.add(this.Bh|0,this.Bl|0,n|0,o|0),{h:f,l:d}=_e.add(this.Ch|0,this.Cl|0,f|0,d|0),{h:u,l:v}=_e.add(this.Dh|0,this.Dl|0,u|0,v|0),{h:w,l:S}=_e.add(this.Eh|0,this.El|0,w|0,S|0),{h:I,l:M}=_e.add(this.Fh|0,this.Fl|0,I|0,M|0),{h:R,l:N}=_e.add(this.Gh|0,this.Gl|0,R|0,N|0),{h:C,l:B}=_e.add(this.Hh|0,this.Hl|0,C|0,B|0),this.set(i,s,n,o,f,d,u,v,w,S,I,M,R,N,C,B)}roundClean(){xi.fill(0),Si.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const vb=jp(()=>new bb);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ia=BigInt(0),hh=BigInt(1),gb=BigInt(2);function na(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function sa(t){if(!na(t))throw new Error("Uint8Array expected")}function oa(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const yb=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function aa(t){sa(t);let e="";for(let r=0;r<t.length;r++)e+=yb[t[r]];return e}function uh(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?ia:BigInt("0x"+t)}const ti={_0:48,_9:57,A:65,F:70,a:97,f:102};function dh(t){if(t>=ti._0&&t<=ti._9)return t-ti._0;if(t>=ti.A&&t<=ti.F)return t-(ti.A-10);if(t>=ti.a&&t<=ti.f)return t-(ti.a-10)}function lh(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,r=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const i=new Uint8Array(r);for(let s=0,n=0;s<r;s++,n+=2){const o=dh(t.charCodeAt(n)),f=dh(t.charCodeAt(n+1));if(o===void 0||f===void 0){const d=t[n]+t[n+1];throw new Error('hex string expected, got non-hex character "'+d+'" at index '+n)}i[s]=o*16+f}return i}function mb(t){return uh(aa(t))}function Bs(t){return sa(t),uh(aa(Uint8Array.from(t).reverse()))}function ph(t,e){return lh(t.toString(16).padStart(e*2,"0"))}function fa(t,e){return ph(t,e).reverse()}function ri(t,e,r){let i;if(typeof e=="string")try{i=lh(e)}catch(n){throw new Error(t+" must be hex string or Uint8Array, cause: "+n)}else if(na(e))i=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=i.length;if(typeof r=="number"&&s!==r)throw new Error(t+" of length "+r+" expected, got "+s);return i}function bh(...t){let e=0;for(let i=0;i<t.length;i++){const s=t[i];sa(s),e+=s.length}const r=new Uint8Array(e);for(let i=0,s=0;i<t.length;i++){const n=t[i];r.set(n,s),s+=n.length}return r}const ca=t=>typeof t=="bigint"&&ia<=t;function wb(t,e,r){return ca(t)&&ca(e)&&ca(r)&&e<=t&&t<r}function Gn(t,e,r,i){if(!wb(e,r,i))throw new Error("expected valid "+t+": "+r+" <= n < "+i+", got "+e)}function _b(t){let e;for(e=0;t>ia;t>>=hh,e+=1);return e}const Eb=t=>(gb<<BigInt(t-1))-hh,xb={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||na(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function ha(t,e,r={}){const i=(s,n,o)=>{const f=xb[n];if(typeof f!="function")throw new Error("invalid validator function");const d=t[s];if(!(o&&d===void 0)&&!f(d,t))throw new Error("param "+String(s)+" is invalid. Expected "+n+", got "+d)};for(const[s,n]of Object.entries(e))i(s,n,!1);for(const[s,n]of Object.entries(r))i(s,n,!0);return t}function vh(t){const e=new WeakMap;return(r,...i)=>{const s=e.get(r);if(s!==void 0)return s;const n=t(r,...i);return e.set(r,n),n}}const xt=BigInt(0),yt=BigInt(1),Ki=BigInt(2),Sb=BigInt(3),ua=BigInt(4),gh=BigInt(5),yh=BigInt(8);function _t(t,e){const r=t%e;return r>=xt?r:e+r}function Mb(t,e,r){if(e<xt)throw new Error("invalid exponent, negatives unsupported");if(r<=xt)throw new Error("invalid modulus");if(r===yt)return xt;let i=yt;for(;e>xt;)e&yt&&(i=i*t%r),t=t*t%r,e>>=yt;return i}function kr(t,e,r){let i=t;for(;e-- >xt;)i*=i,i%=r;return i}function mh(t,e){if(t===xt)throw new Error("invert: expected non-zero number");if(e<=xt)throw new Error("invert: expected positive modulus, got "+e);let r=_t(t,e),i=e,s=xt,n=yt;for(;r!==xt;){const o=i/r,f=i%r,d=s-n*o;i=r,r=f,s=n,n=d}if(i!==yt)throw new Error("invert: does not exist");return _t(s,e)}function Ib(t){const e=(t-yt)/Ki;let r,i,s;for(r=t-yt,i=0;r%Ki===xt;r/=Ki,i++);for(s=Ki;s<t&&Mb(s,e,t)!==t-yt;s++)if(s>1e3)throw new Error("Cannot find square root: likely non-prime P");if(i===1){const o=(t+yt)/ua;return function(f,d){const u=f.pow(d,o);if(!f.eql(f.sqr(u),d))throw new Error("Cannot find square root");return u}}const n=(r+yt)/Ki;return function(o,f){if(o.pow(f,e)===o.neg(o.ONE))throw new Error("Cannot find square root");let d=i,u=o.pow(o.mul(o.ONE,s),r),v=o.pow(f,n),w=o.pow(f,r);for(;!o.eql(w,o.ONE);){if(o.eql(w,o.ZERO))return o.ZERO;let S=1;for(let M=o.sqr(w);S<d&&!o.eql(M,o.ONE);S++)M=o.sqr(M);const I=o.pow(u,yt<<BigInt(d-S-1));u=o.sqr(I),v=o.mul(v,I),w=o.mul(w,u),d=S}return v}}function Ab(t){if(t%ua===Sb){const e=(t+yt)/ua;return function(r,i){const s=r.pow(i,e);if(!r.eql(r.sqr(s),i))throw new Error("Cannot find square root");return s}}if(t%yh===gh){const e=(t-gh)/yh;return function(r,i){const s=r.mul(i,Ki),n=r.pow(s,e),o=r.mul(i,n),f=r.mul(r.mul(o,Ki),n),d=r.mul(o,r.sub(f,r.ONE));if(!r.eql(r.sqr(d),i))throw new Error("Cannot find square root");return d}}return Ib(t)}const Db=(t,e)=>(_t(t,e)&yt)===yt,Ob=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Rb(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=Ob.reduce((i,s)=>(i[s]="function",i),e);return ha(t,r)}function Tb(t,e,r){if(r<xt)throw new Error("invalid exponent, negatives unsupported");if(r===xt)return t.ONE;if(r===yt)return e;let i=t.ONE,s=e;for(;r>xt;)r&yt&&(i=t.mul(i,s)),s=t.sqr(s),r>>=yt;return i}function Nb(t,e){const r=new Array(e.length),i=e.reduce((n,o,f)=>t.is0(o)?n:(r[f]=n,t.mul(n,o)),t.ONE),s=t.inv(i);return e.reduceRight((n,o,f)=>t.is0(o)?n:(r[f]=t.mul(n,r[f]),t.mul(n,o)),s),r}function wh(t,e){const r=e!==void 0?e:t.toString(2).length,i=Math.ceil(r/8);return{nBitLength:r,nByteLength:i}}function _h(t,e,r=!1,i={}){if(t<=xt)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:s,nByteLength:n}=wh(t,e);if(n>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const f=Object.freeze({ORDER:t,isLE:r,BITS:s,BYTES:n,MASK:Eb(s),ZERO:xt,ONE:yt,create:d=>_t(d,t),isValid:d=>{if(typeof d!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof d);return xt<=d&&d<t},is0:d=>d===xt,isOdd:d=>(d&yt)===yt,neg:d=>_t(-d,t),eql:(d,u)=>d===u,sqr:d=>_t(d*d,t),add:(d,u)=>_t(d+u,t),sub:(d,u)=>_t(d-u,t),mul:(d,u)=>_t(d*u,t),pow:(d,u)=>Tb(f,d,u),div:(d,u)=>_t(d*mh(u,t),t),sqrN:d=>d*d,addN:(d,u)=>d+u,subN:(d,u)=>d-u,mulN:(d,u)=>d*u,inv:d=>mh(d,t),sqrt:i.sqrt||(d=>(o||(o=Ab(t)),o(f,d))),invertBatch:d=>Nb(f,d),cmov:(d,u,v)=>v?u:d,toBytes:d=>r?fa(d,n):ph(d,n),fromBytes:d=>{if(d.length!==n)throw new Error("Field.fromBytes: expected "+n+" bytes, got "+d.length);return r?Bs(d):mb(d)}});return Object.freeze(f)}const Eh=BigInt(0),Ls=BigInt(1);function da(t,e){const r=e.negate();return t?r:e}function xh(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function la(t,e){xh(t,e);const r=Math.ceil(e/t)+1,i=2**(t-1);return{windows:r,windowSize:i}}function Pb(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((r,i)=>{if(!(r instanceof e))throw new Error("invalid point at index "+i)})}function Cb(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((r,i)=>{if(!e.isValid(r))throw new Error("invalid scalar at index "+i)})}const pa=new WeakMap,Sh=new WeakMap;function ba(t){return Sh.get(t)||1}function Bb(t,e){return{constTimeNegate:da,hasPrecomputes(r){return ba(r)!==1},unsafeLadder(r,i,s=t.ZERO){let n=r;for(;i>Eh;)i&Ls&&(s=s.add(n)),n=n.double(),i>>=Ls;return s},precomputeWindow(r,i){const{windows:s,windowSize:n}=la(i,e),o=[];let f=r,d=f;for(let u=0;u<s;u++){d=f,o.push(d);for(let v=1;v<n;v++)d=d.add(f),o.push(d);f=d.double()}return o},wNAF(r,i,s){const{windows:n,windowSize:o}=la(r,e);let f=t.ZERO,d=t.BASE;const u=BigInt(2**r-1),v=2**r,w=BigInt(r);for(let S=0;S<n;S++){const I=S*o;let M=Number(s&u);s>>=w,M>o&&(M-=v,s+=Ls);const R=I,N=I+Math.abs(M)-1,C=S%2!==0,B=M<0;M===0?d=d.add(da(C,i[R])):f=f.add(da(B,i[N]))}return{p:f,f:d}},wNAFUnsafe(r,i,s,n=t.ZERO){const{windows:o,windowSize:f}=la(r,e),d=BigInt(2**r-1),u=2**r,v=BigInt(r);for(let w=0;w<o;w++){const S=w*f;if(s===Eh)break;let I=Number(s&d);if(s>>=v,I>f&&(I-=u,s+=Ls),I===0)continue;let M=i[S+Math.abs(I)-1];I<0&&(M=M.negate()),n=n.add(M)}return n},getPrecomputes(r,i,s){let n=pa.get(i);return n||(n=this.precomputeWindow(i,r),r!==1&&pa.set(i,s(n))),n},wNAFCached(r,i,s){const n=ba(r);return this.wNAF(n,this.getPrecomputes(n,r,s),i)},wNAFCachedUnsafe(r,i,s,n){const o=ba(r);return o===1?this.unsafeLadder(r,i,n):this.wNAFUnsafe(o,this.getPrecomputes(o,r,s),i,n)},setWindowSize(r,i){xh(i,e),Sh.set(r,i),pa.delete(r)}}}function Lb(t,e,r,i){if(Pb(r,t),Cb(i,e),r.length!==i.length)throw new Error("arrays of points and scalars must have equal length");const s=t.ZERO,n=_b(BigInt(r.length)),o=n>12?n-3:n>4?n-2:n?2:1,f=(1<<o)-1,d=new Array(f+1).fill(s),u=Math.floor((e.BITS-1)/o)*o;let v=s;for(let w=u;w>=0;w-=o){d.fill(s);for(let I=0;I<i.length;I++){const M=i[I],R=Number(M>>BigInt(w)&BigInt(f));d[R]=d[R].add(r[I])}let S=s;for(let I=d.length-1,M=s;I>0;I--)M=M.add(d[I]),S=S.add(M);if(v=v.add(S),w!==0)for(let I=0;I<o;I++)v=v.double()}return v}function Fb(t){return Rb(t.Fp),ha(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...wh(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}const Or=BigInt(0),Zt=BigInt(1),Fs=BigInt(2),$b=BigInt(8),Ub={zip215:!0};function zb(t){const e=Fb(t);return ha(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function kb(t){const e=zb(t),{Fp:r,n:i,prehash:s,hash:n,randomBytes:o,nByteLength:f,h:d}=e,u=Fs<<BigInt(f*8)-Zt,v=r.create,w=_h(e.n,e.nBitLength),S=e.uvRatio||((c,b)=>{try{return{isValid:!0,value:r.sqrt(c*r.inv(b))}}catch{return{isValid:!1,value:Or}}}),I=e.adjustScalarBytes||(c=>c),M=e.domain||((c,b,_)=>{if(oa("phflag",_),b.length||_)throw new Error("Contexts/pre-hash are not supported");return c});function R(c,b){Gn("coordinate "+c,b,Or,u)}function N(c){if(!(c instanceof F))throw new Error("ExtendedPoint expected")}const C=vh((c,b)=>{const{ex:_,ey:x,ez:m}=c,h=c.is0();b==null&&(b=h?$b:r.inv(m));const y=v(_*b),g=v(x*b),A=v(m*b);if(h)return{x:Or,y:Zt};if(A!==Zt)throw new Error("invZ was invalid");return{x:y,y:g}}),B=vh(c=>{const{a:b,d:_}=e;if(c.is0())throw new Error("bad point: ZERO");const{ex:x,ey:m,ez:h,et:y}=c,g=v(x*x),A=v(m*m),U=v(h*h),E=v(U*U),T=v(g*b),L=v(U*v(T+A)),$=v(E+v(_*v(g*A)));if(L!==$)throw new Error("bad point: equation left != right (1)");const z=v(x*m),W=v(h*y);if(z!==W)throw new Error("bad point: equation left != right (2)");return!0});class F{constructor(b,_,x,m){this.ex=b,this.ey=_,this.ez=x,this.et=m,R("x",b),R("y",_),R("z",x),R("t",m),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(b){if(b instanceof F)throw new Error("extended point not allowed");const{x:_,y:x}=b||{};return R("x",_),R("y",x),new F(_,x,Zt,v(_*x))}static normalizeZ(b){const _=r.invertBatch(b.map(x=>x.ez));return b.map((x,m)=>x.toAffine(_[m])).map(F.fromAffine)}static msm(b,_){return Lb(F,w,b,_)}_setWindowSize(b){H.setWindowSize(this,b)}assertValidity(){B(this)}equals(b){N(b);const{ex:_,ey:x,ez:m}=this,{ex:h,ey:y,ez:g}=b,A=v(_*g),U=v(h*m),E=v(x*g),T=v(y*m);return A===U&&E===T}is0(){return this.equals(F.ZERO)}negate(){return new F(v(-this.ex),this.ey,this.ez,v(-this.et))}double(){const{a:b}=e,{ex:_,ey:x,ez:m}=this,h=v(_*_),y=v(x*x),g=v(Fs*v(m*m)),A=v(b*h),U=_+x,E=v(v(U*U)-h-y),T=A+y,L=T-g,$=A-y,z=v(E*L),W=v(T*$),X=v(E*$),K=v(L*T);return new F(z,W,K,X)}add(b){N(b);const{a:_,d:x}=e,{ex:m,ey:h,ez:y,et:g}=this,{ex:A,ey:U,ez:E,et:T}=b;if(_===BigInt(-1)){const Re=v((h-m)*(U+A)),Te=v((h+m)*(U-A)),oe=v(Te-Re);if(oe===Or)return this.double();const Ne=v(y*Fs*T),Pe=v(g*Fs*E),fe=Pe+Ne,Ce=Te+Re,Be=Pe-Ne,se=v(fe*oe),De=v(Ce*Be),Le=v(fe*Be),re=v(oe*Ce);return new F(se,De,re,Le)}const L=v(m*A),$=v(h*U),z=v(g*x*T),W=v(y*E),X=v((m+h)*(A+U)-L-$),K=W-z,ce=W+z,Z=v($-_*L),Q=v(X*K),Ue=v(ce*Z),ze=v(X*Z),he=v(K*ce);return new F(Q,Ue,he,ze)}subtract(b){return this.add(b.negate())}wNAF(b){return H.wNAFCached(this,b,F.normalizeZ)}multiply(b){const _=b;Gn("scalar",_,Zt,i);const{p:x,f:m}=this.wNAF(_);return F.normalizeZ([x,m])[0]}multiplyUnsafe(b,_=F.ZERO){const x=b;return Gn("scalar",x,Or,i),x===Or?V:this.is0()||x===Zt?this:H.wNAFCachedUnsafe(this,x,F.normalizeZ,_)}isSmallOrder(){return this.multiplyUnsafe(d).is0()}isTorsionFree(){return H.unsafeLadder(this,i).is0()}toAffine(b){return C(this,b)}clearCofactor(){const{h:b}=e;return b===Zt?this:this.multiplyUnsafe(b)}static fromHex(b,_=!1){const{d:x,a:m}=e,h=r.BYTES;b=ri("pointHex",b,h),oa("zip215",_);const y=b.slice(),g=b[h-1];y[h-1]=g&-129;const A=Bs(y),U=_?u:r.ORDER;Gn("pointHex.y",A,Or,U);const E=v(A*A),T=v(E-Zt),L=v(x*E-m);let{isValid:$,value:z}=S(T,L);if(!$)throw new Error("Point.fromHex: invalid y coordinate");const W=(z&Zt)===Zt,X=(g&128)!==0;if(!_&&z===Or&&X)throw new Error("Point.fromHex: x=0 and x_0=1");return X!==W&&(z=v(-z)),F.fromAffine({x:z,y:A})}static fromPrivateKey(b){return j(b).point}toRawBytes(){const{x:b,y:_}=this.toAffine(),x=fa(_,r.BYTES);return x[x.length-1]|=b&Zt?128:0,x}toHex(){return aa(this.toRawBytes())}}F.BASE=new F(e.Gx,e.Gy,Zt,v(e.Gx*e.Gy)),F.ZERO=new F(Or,Zt,Zt,Or);const{BASE:k,ZERO:V}=F,H=Bb(F,f*8);function G(c){return _t(c,i)}function J(c){return G(Bs(c))}function j(c){const b=r.BYTES;c=ri("private key",c,b);const _=ri("hashed private key",n(c),2*b),x=I(_.slice(0,b)),m=_.slice(b,2*b),h=J(x),y=k.multiply(h),g=y.toRawBytes();return{head:x,prefix:m,scalar:h,point:y,pointBytes:g}}function te(c){return j(c).pointBytes}function D(c=new Uint8Array,...b){const _=bh(...b);return J(n(M(_,ri("context",c),!!s)))}function p(c,b,_={}){c=ri("message",c),s&&(c=s(c));const{prefix:x,scalar:m,pointBytes:h}=j(b),y=D(_.context,x,c),g=k.multiply(y).toRawBytes(),A=D(_.context,g,h,c),U=G(y+A*m);Gn("signature.s",U,Or,i);const E=bh(g,fa(U,r.BYTES));return ri("result",E,r.BYTES*2)}const l=Ub;function a(c,b,_,x=l){const{context:m,zip215:h}=x,y=r.BYTES;c=ri("signature",c,2*y),b=ri("message",b),_=ri("publicKey",_,y),h!==void 0&&oa("zip215",h),s&&(b=s(b));const g=Bs(c.slice(y,2*y));let A,U,E;try{A=F.fromHex(_,h),U=F.fromHex(c.slice(0,y),h),E=k.multiplyUnsafe(g)}catch{return!1}if(!h&&A.isSmallOrder())return!1;const T=D(m,U.toRawBytes(),A.toRawBytes(),b);return U.add(A.multiplyUnsafe(T)).subtract(E).clearCofactor().equals(F.ZERO)}return k._setWindowSize(8),{CURVE:e,getPublicKey:te,sign:p,verify:a,ExtendedPoint:F,utils:{getExtendedPublicKey:j,randomPrivateKey:()=>o(r.BYTES),precompute(c=8,b=F.BASE){return b._setWindowSize(c),b.multiply(BigInt(3)),b}}}}BigInt(0),BigInt(1);const va=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),Mh=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const qb=BigInt(1),Ih=BigInt(2);BigInt(3);const jb=BigInt(5),Kb=BigInt(8);function Hb(t){const e=BigInt(10),r=BigInt(20),i=BigInt(40),s=BigInt(80),n=va,o=t*t%n*t%n,f=kr(o,Ih,n)*o%n,d=kr(f,qb,n)*t%n,u=kr(d,jb,n)*d%n,v=kr(u,e,n)*u%n,w=kr(v,r,n)*v%n,S=kr(w,i,n)*w%n,I=kr(S,s,n)*S%n,M=kr(I,s,n)*S%n,R=kr(M,e,n)*u%n;return{pow_p_5_8:kr(R,Ih,n)*t%n,b2:o}}function Vb(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function Wb(t,e){const r=va,i=_t(e*e*e,r),s=_t(i*i*e,r),n=Hb(t*s).pow_p_5_8;let o=_t(t*i*n,r);const f=_t(e*o*o,r),d=o,u=_t(o*Mh,r),v=f===t,w=f===_t(-t,r),S=f===_t(-t*Mh,r);return v&&(o=d),(w||S)&&(o=u),Db(o,r)&&(o=_t(-o,r)),{isValid:v||w,value:o}}const Gb=_h(va,void 0,!0),Yb={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:Gb,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:Kb,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:vb,randomBytes:fh,adjustScalarBytes:Vb,uvRatio:Wb},Ah=kb(Yb),Jb="EdDSA",Xb="JWT",$s=".",Us="base64url",Dh="utf8",Oh="utf8",Zb=":",Qb="did",ev="key",Rh="base58btc",tv="z",rv="K36",iv=32;function ga(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function Th(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?ga(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function Nh(t,e){e||(e=t.reduce((s,n)=>s+n.length,0));const r=Th(e);let i=0;for(const s of t)r.set(s,i),i+=s.length;return ga(r)}function nv(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),i=0;i<r.length;i++)r[i]=255;for(var s=0;s<t.length;s++){var n=t.charAt(s),o=n.charCodeAt(0);if(r[o]!==255)throw new TypeError(n+" is ambiguous");r[o]=s}var f=t.length,d=t.charAt(0),u=Math.log(f)/Math.log(256),v=Math.log(256)/Math.log(f);function w(M){if(M instanceof Uint8Array||(ArrayBuffer.isView(M)?M=new Uint8Array(M.buffer,M.byteOffset,M.byteLength):Array.isArray(M)&&(M=Uint8Array.from(M))),!(M instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(M.length===0)return"";for(var R=0,N=0,C=0,B=M.length;C!==B&&M[C]===0;)C++,R++;for(var F=(B-C)*v+1>>>0,k=new Uint8Array(F);C!==B;){for(var V=M[C],H=0,G=F-1;(V!==0||H<N)&&G!==-1;G--,H++)V+=256*k[G]>>>0,k[G]=V%f>>>0,V=V/f>>>0;if(V!==0)throw new Error("Non-zero carry");N=H,C++}for(var J=F-N;J!==F&&k[J]===0;)J++;for(var j=d.repeat(R);J<F;++J)j+=t.charAt(k[J]);return j}function S(M){if(typeof M!="string")throw new TypeError("Expected String");if(M.length===0)return new Uint8Array;var R=0;if(M[R]!==" "){for(var N=0,C=0;M[R]===d;)N++,R++;for(var B=(M.length-R)*u+1>>>0,F=new Uint8Array(B);M[R];){var k=r[M.charCodeAt(R)];if(k===255)return;for(var V=0,H=B-1;(k!==0||V<C)&&H!==-1;H--,V++)k+=f*F[H]>>>0,F[H]=k%256>>>0,k=k/256>>>0;if(k!==0)throw new Error("Non-zero carry");C=V,R++}if(M[R]!==" "){for(var G=B-C;G!==B&&F[G]===0;)G++;for(var J=new Uint8Array(N+(B-G)),j=N;G!==B;)J[j++]=F[G++];return J}}}function I(M){var R=S(M);if(R)return R;throw new Error(`Non-${e} character`)}return{encode:w,decodeUnsafe:S,decode:I}}var sv=nv,ov=sv;const Ph=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},av=t=>new TextEncoder().encode(t),fv=t=>new TextDecoder().decode(t);class cv{constructor(e,r,i){this.name=e,this.prefix=r,this.baseEncode=i}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class hv{constructor(e,r,i){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=i}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return Ch(this,e)}}class uv{constructor(e){this.decoders=e}or(e){return Ch(this,e)}decode(e){const r=e[0],i=this.decoders[r];if(i)return i.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Ch=(t,e)=>new uv({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class dv{constructor(e,r,i,s){this.name=e,this.prefix=r,this.baseEncode=i,this.baseDecode=s,this.encoder=new cv(e,r,i),this.decoder=new hv(e,r,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const zs=({name:t,prefix:e,encode:r,decode:i})=>new dv(t,e,r,i),Yn=({prefix:t,name:e,alphabet:r})=>{const{encode:i,decode:s}=ov(r,e);return zs({prefix:t,name:e,encode:i,decode:n=>Ph(s(n))})},lv=(t,e,r,i)=>{const s={};for(let v=0;v<e.length;++v)s[e[v]]=v;let n=t.length;for(;t[n-1]==="=";)--n;const o=new Uint8Array(n*r/8|0);let f=0,d=0,u=0;for(let v=0;v<n;++v){const w=s[t[v]];if(w===void 0)throw new SyntaxError(`Non-${i} character`);d=d<<r|w,f+=r,f>=8&&(f-=8,o[u++]=255&d>>f)}if(f>=r||255&d<<8-f)throw new SyntaxError("Unexpected end of data");return o},pv=(t,e,r)=>{const i=e[e.length-1]==="=",s=(1<<r)-1;let n="",o=0,f=0;for(let d=0;d<t.length;++d)for(f=f<<8|t[d],o+=8;o>r;)o-=r,n+=e[s&f>>o];if(o&&(n+=e[s&f<<r-o]),i)for(;n.length*r&7;)n+="=";return n},Nt=({name:t,prefix:e,bitsPerChar:r,alphabet:i})=>zs({prefix:e,name:t,encode(s){return pv(s,i,r)},decode(s){return lv(s,i,r,t)}}),bv=zs({prefix:"\0",name:"identity",encode:t=>fv(t),decode:t=>av(t)});var vv=Object.freeze({__proto__:null,identity:bv});const gv=Nt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var yv=Object.freeze({__proto__:null,base2:gv});const mv=Nt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var wv=Object.freeze({__proto__:null,base8:mv});const _v=Yn({prefix:"9",name:"base10",alphabet:"0123456789"});var Ev=Object.freeze({__proto__:null,base10:_v});const xv=Nt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Sv=Nt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var Mv=Object.freeze({__proto__:null,base16:xv,base16upper:Sv});const Iv=Nt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Av=Nt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Dv=Nt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Ov=Nt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Rv=Nt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Tv=Nt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Nv=Nt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Pv=Nt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Cv=Nt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Bv=Object.freeze({__proto__:null,base32:Iv,base32upper:Av,base32pad:Dv,base32padupper:Ov,base32hex:Rv,base32hexupper:Tv,base32hexpad:Nv,base32hexpadupper:Pv,base32z:Cv});const Lv=Yn({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Fv=Yn({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var $v=Object.freeze({__proto__:null,base36:Lv,base36upper:Fv});const Uv=Yn({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),zv=Yn({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var kv=Object.freeze({__proto__:null,base58btc:Uv,base58flickr:zv});const qv=Nt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),jv=Nt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Kv=Nt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Hv=Nt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Vv=Object.freeze({__proto__:null,base64:qv,base64pad:jv,base64url:Kv,base64urlpad:Hv});const Bh=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),Wv=Bh.reduce((t,e,r)=>(t[r]=e,t),[]),Gv=Bh.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function Yv(t){return t.reduce((e,r)=>(e+=Wv[r],e),"")}function Jv(t){const e=[];for(const r of t){const i=Gv[r.codePointAt(0)];if(i===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(i)}return new Uint8Array(e)}const Xv=zs({prefix:"\u{1F680}",name:"base256emoji",encode:Yv,decode:Jv});var Zv=Object.freeze({__proto__:null,base256emoji:Xv}),Qv=Fh,Lh=128,eg=127,tg=~eg,rg=Math.pow(2,31);function Fh(t,e,r){e=e||[],r=r||0;for(var i=r;t>=rg;)e[r++]=t&255|Lh,t/=128;for(;t&tg;)e[r++]=t&255|Lh,t>>>=7;return e[r]=t|0,Fh.bytes=r-i+1,e}var ig=ya,ng=128,$h=127;function ya(t,i){var r=0,i=i||0,s=0,n=i,o,f=t.length;do{if(n>=f)throw ya.bytes=0,new RangeError("Could not decode varint");o=t[n++],r+=s<28?(o&$h)<<s:(o&$h)*Math.pow(2,s),s+=7}while(o>=ng);return ya.bytes=n-i,r}var sg=Math.pow(2,7),og=Math.pow(2,14),ag=Math.pow(2,21),fg=Math.pow(2,28),cg=Math.pow(2,35),hg=Math.pow(2,42),ug=Math.pow(2,49),dg=Math.pow(2,56),lg=Math.pow(2,63),pg=function(t){return t<sg?1:t<og?2:t<ag?3:t<fg?4:t<cg?5:t<hg?6:t<ug?7:t<dg?8:t<lg?9:10},bg={encode:Qv,decode:ig,encodingLength:pg},Uh=bg;const zh=(t,e,r=0)=>(Uh.encode(t,e,r),e),kh=t=>Uh.encodingLength(t),ma=(t,e)=>{const r=e.byteLength,i=kh(t),s=i+kh(r),n=new Uint8Array(s+r);return zh(t,n,0),zh(r,n,i),n.set(e,s),new vg(t,r,e,n)};class vg{constructor(e,r,i,s){this.code=e,this.size=r,this.digest=i,this.bytes=s}}const qh=({name:t,code:e,encode:r})=>new gg(t,e,r);class gg{constructor(e,r,i){this.name=e,this.code=r,this.encode=i}digest(e){if(e instanceof Uint8Array){const r=this.encode(e);return r instanceof Uint8Array?ma(this.code,r):r.then(i=>ma(this.code,i))}else throw Error("Unknown type, must be binary type")}}const jh=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),yg=qh({name:"sha2-256",code:18,encode:jh("SHA-256")}),mg=qh({name:"sha2-512",code:19,encode:jh("SHA-512")});var wg=Object.freeze({__proto__:null,sha256:yg,sha512:mg});const Kh=0,_g="identity",Hh=Ph;var Eg=Object.freeze({__proto__:null,identity:{code:Kh,name:_g,encode:Hh,digest:t=>ma(Kh,Hh(t))}});new TextEncoder,new TextDecoder;const Vh={...vv,...yv,...wv,...Ev,...Mv,...Bv,...$v,...kv,...Vv,...Zv};({...wg,...Eg});function Wh(t,e,r,i){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:i}}}const Gh=Wh("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),wa=Wh("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=Th(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),Yh={utf8:Gh,"utf-8":Gh,hex:Vh.base16,latin1:wa,ascii:wa,binary:wa,...Vh};function ks(t,e="utf8"){const r=Yh[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):r.encoder.encode(t).substring(1)}function ln(t,e="utf8"){const r=Yh[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?ga(globalThis.Buffer.from(t,"utf-8")):r.decoder.decode(`${r.prefix}${t}`)}function Jh(t){return an(ks(ln(t,Us),Dh))}function qs(t){return ks(ln(qi(t),Dh),Us)}function Xh(t){const e=ln(rv,Rh),r=tv+ks(Nh([e,t]),Rh);return[Qb,ev,r].join(Zb)}function xg(t){return ks(t,Us)}function Sg(t){return ln(t,Us)}function Mg(t){return ln([qs(t.header),qs(t.payload)].join($s),Oh)}function Ig(t){return[qs(t.header),qs(t.payload),xg(t.signature)].join($s)}function _a(t){const e=t.split($s),r=Jh(e[0]),i=Jh(e[1]),s=Sg(e[2]),n=ln(e.slice(0,2).join($s),Oh);return{header:r,payload:i,signature:s,data:n}}function Zh(t=fh(iv)){const e=Ah.getPublicKey(t);return{secretKey:Nh([t,e]),publicKey:e}}async function Ag(t,e,r,i,s=ie.fromMiliseconds(Date.now())){const n={alg:Jb,typ:Xb},o=Xh(i.publicKey),f=s+r,d={iss:o,sub:t,aud:e,iat:s,exp:f},u=Mg({header:n,payload:d}),v=Ah.sign(u,i.secretKey.slice(0,32));return Ig({header:n,payload:d,signature:v})}function Dg(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),i=0;i<r.length;i++)r[i]=255;for(var s=0;s<t.length;s++){var n=t.charAt(s),o=n.charCodeAt(0);if(r[o]!==255)throw new TypeError(n+" is ambiguous");r[o]=s}var f=t.length,d=t.charAt(0),u=Math.log(f)/Math.log(256),v=Math.log(256)/Math.log(f);function w(M){if(M instanceof Uint8Array||(ArrayBuffer.isView(M)?M=new Uint8Array(M.buffer,M.byteOffset,M.byteLength):Array.isArray(M)&&(M=Uint8Array.from(M))),!(M instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(M.length===0)return"";for(var R=0,N=0,C=0,B=M.length;C!==B&&M[C]===0;)C++,R++;for(var F=(B-C)*v+1>>>0,k=new Uint8Array(F);C!==B;){for(var V=M[C],H=0,G=F-1;(V!==0||H<N)&&G!==-1;G--,H++)V+=256*k[G]>>>0,k[G]=V%f>>>0,V=V/f>>>0;if(V!==0)throw new Error("Non-zero carry");N=H,C++}for(var J=F-N;J!==F&&k[J]===0;)J++;for(var j=d.repeat(R);J<F;++J)j+=t.charAt(k[J]);return j}function S(M){if(typeof M!="string")throw new TypeError("Expected String");if(M.length===0)return new Uint8Array;var R=0;if(M[R]!==" "){for(var N=0,C=0;M[R]===d;)N++,R++;for(var B=(M.length-R)*u+1>>>0,F=new Uint8Array(B);M[R];){var k=r[M.charCodeAt(R)];if(k===255)return;for(var V=0,H=B-1;(k!==0||V<C)&&H!==-1;H--,V++)k+=f*F[H]>>>0,F[H]=k%256>>>0,k=k/256>>>0;if(k!==0)throw new Error("Non-zero carry");C=V,R++}if(M[R]!==" "){for(var G=B-C;G!==B&&F[G]===0;)G++;for(var J=new Uint8Array(N+(B-G)),j=N;G!==B;)J[j++]=F[G++];return J}}}function I(M){var R=S(M);if(R)return R;throw new Error(`Non-${e} character`)}return{encode:w,decodeUnsafe:S,decode:I}}var Og=Dg,Rg=Og;const Qh=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},Tg=t=>new TextEncoder().encode(t),Ng=t=>new TextDecoder().decode(t);class Pg{constructor(e,r,i){this.name=e,this.prefix=r,this.baseEncode=i}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class Cg{constructor(e,r,i){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=i}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return eu(this,e)}}class Bg{constructor(e){this.decoders=e}or(e){return eu(this,e)}decode(e){const r=e[0],i=this.decoders[r];if(i)return i.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const eu=(t,e)=>new Bg({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class Lg{constructor(e,r,i,s){this.name=e,this.prefix=r,this.baseEncode=i,this.baseDecode=s,this.encoder=new Pg(e,r,i),this.decoder=new Cg(e,r,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const js=({name:t,prefix:e,encode:r,decode:i})=>new Lg(t,e,r,i),Jn=({prefix:t,name:e,alphabet:r})=>{const{encode:i,decode:s}=Rg(r,e);return js({prefix:t,name:e,encode:i,decode:n=>Qh(s(n))})},Fg=(t,e,r,i)=>{const s={};for(let v=0;v<e.length;++v)s[e[v]]=v;let n=t.length;for(;t[n-1]==="=";)--n;const o=new Uint8Array(n*r/8|0);let f=0,d=0,u=0;for(let v=0;v<n;++v){const w=s[t[v]];if(w===void 0)throw new SyntaxError(`Non-${i} character`);d=d<<r|w,f+=r,f>=8&&(f-=8,o[u++]=255&d>>f)}if(f>=r||255&d<<8-f)throw new SyntaxError("Unexpected end of data");return o},$g=(t,e,r)=>{const i=e[e.length-1]==="=",s=(1<<r)-1;let n="",o=0,f=0;for(let d=0;d<t.length;++d)for(f=f<<8|t[d],o+=8;o>r;)o-=r,n+=e[s&f>>o];if(o&&(n+=e[s&f<<r-o]),i)for(;n.length*r&7;)n+="=";return n},Pt=({name:t,prefix:e,bitsPerChar:r,alphabet:i})=>js({prefix:e,name:t,encode(s){return $g(s,i,r)},decode(s){return Fg(s,i,r,t)}}),Ug=js({prefix:"\0",name:"identity",encode:t=>Ng(t),decode:t=>Tg(t)});var zg=Object.freeze({__proto__:null,identity:Ug});const kg=Pt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var qg=Object.freeze({__proto__:null,base2:kg});const jg=Pt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var Kg=Object.freeze({__proto__:null,base8:jg});const Hg=Jn({prefix:"9",name:"base10",alphabet:"0123456789"});var Vg=Object.freeze({__proto__:null,base10:Hg});const Wg=Pt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Gg=Pt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var Yg=Object.freeze({__proto__:null,base16:Wg,base16upper:Gg});const Jg=Pt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Xg=Pt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Zg=Pt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Qg=Pt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),e2=Pt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),t2=Pt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),r2=Pt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),i2=Pt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),n2=Pt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var s2=Object.freeze({__proto__:null,base32:Jg,base32upper:Xg,base32pad:Zg,base32padupper:Qg,base32hex:e2,base32hexupper:t2,base32hexpad:r2,base32hexpadupper:i2,base32z:n2});const o2=Jn({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),a2=Jn({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var f2=Object.freeze({__proto__:null,base36:o2,base36upper:a2});const c2=Jn({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),h2=Jn({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var u2=Object.freeze({__proto__:null,base58btc:c2,base58flickr:h2});const d2=Pt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),l2=Pt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),p2=Pt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),b2=Pt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var v2=Object.freeze({__proto__:null,base64:d2,base64pad:l2,base64url:p2,base64urlpad:b2});const tu=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),g2=tu.reduce((t,e,r)=>(t[r]=e,t),[]),y2=tu.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function m2(t){return t.reduce((e,r)=>(e+=g2[r],e),"")}function w2(t){const e=[];for(const r of t){const i=y2[r.codePointAt(0)];if(i===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(i)}return new Uint8Array(e)}const _2=js({prefix:"\u{1F680}",name:"base256emoji",encode:m2,decode:w2});var E2=Object.freeze({__proto__:null,base256emoji:_2}),x2=iu,ru=128,S2=127,M2=~S2,I2=Math.pow(2,31);function iu(t,e,r){e=e||[],r=r||0;for(var i=r;t>=I2;)e[r++]=t&255|ru,t/=128;for(;t&M2;)e[r++]=t&255|ru,t>>>=7;return e[r]=t|0,iu.bytes=r-i+1,e}var A2=Ea,D2=128,nu=127;function Ea(t,i){var r=0,i=i||0,s=0,n=i,o,f=t.length;do{if(n>=f)throw Ea.bytes=0,new RangeError("Could not decode varint");o=t[n++],r+=s<28?(o&nu)<<s:(o&nu)*Math.pow(2,s),s+=7}while(o>=D2);return Ea.bytes=n-i,r}var O2=Math.pow(2,7),R2=Math.pow(2,14),T2=Math.pow(2,21),N2=Math.pow(2,28),P2=Math.pow(2,35),C2=Math.pow(2,42),B2=Math.pow(2,49),L2=Math.pow(2,56),F2=Math.pow(2,63),$2=function(t){return t<O2?1:t<R2?2:t<T2?3:t<N2?4:t<P2?5:t<C2?6:t<B2?7:t<L2?8:t<F2?9:10},U2={encode:x2,decode:A2,encodingLength:$2},su=U2;const ou=(t,e,r=0)=>(su.encode(t,e,r),e),au=t=>su.encodingLength(t),xa=(t,e)=>{const r=e.byteLength,i=au(t),s=i+au(r),n=new Uint8Array(s+r);return ou(t,n,0),ou(r,n,i),n.set(e,s),new z2(t,r,e,n)};class z2{constructor(e,r,i,s){this.code=e,this.size=r,this.digest=i,this.bytes=s}}const fu=({name:t,code:e,encode:r})=>new k2(t,e,r);class k2{constructor(e,r,i){this.name=e,this.code=r,this.encode=i}digest(e){if(e instanceof Uint8Array){const r=this.encode(e);return r instanceof Uint8Array?xa(this.code,r):r.then(i=>xa(this.code,i))}else throw Error("Unknown type, must be binary type")}}const cu=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),q2=fu({name:"sha2-256",code:18,encode:cu("SHA-256")}),j2=fu({name:"sha2-512",code:19,encode:cu("SHA-512")});var K2=Object.freeze({__proto__:null,sha256:q2,sha512:j2});const hu=0,H2="identity",uu=Qh;var V2=Object.freeze({__proto__:null,identity:{code:hu,name:H2,encode:uu,digest:t=>xa(hu,uu(t))}});new TextEncoder,new TextDecoder;const du={...zg,...qg,...Kg,...Vg,...Yg,...s2,...f2,...u2,...v2,...E2};({...K2,...V2});function lu(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(t):new Uint8Array(t)}function pu(t,e,r,i){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:i}}}const bu=pu("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),Sa=pu("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=lu(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),vu={utf8:bu,"utf-8":bu,hex:du.base16,latin1:Sa,ascii:Sa,binary:Sa,...du};function cr(t,e="utf8"){const r=vu[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t,"utf8"):r.decoder.decode(`${r.prefix}${t}`)}var gu=function(t,e,r){if(r||arguments.length===2)for(var i=0,s=e.length,n;i<s;i++)(n||!(i in e))&&(n||(n=Array.prototype.slice.call(e,0,i)),n[i]=e[i]);return t.concat(n||Array.prototype.slice.call(e))},W2=function(){function t(e,r,i){this.name=e,this.version=r,this.os=i,this.type="browser"}return t}(),G2=function(){function t(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return t}(),Y2=function(){function t(e,r,i,s){this.name=e,this.version=r,this.os=i,this.bot=s,this.type="bot-device"}return t}(),J2=function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t}(),X2=function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t}(),Z2=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,Q2=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,yu=3,e3=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",Z2]],mu=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function t3(t){return t?wu(t):typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new X2:typeof navigator<"u"?wu(navigator.userAgent):n3()}function r3(t){return t!==""&&e3.reduce(function(e,r){var i=r[0],s=r[1];if(e)return e;var n=s.exec(t);return!!n&&[i,n]},!1)}function wu(t){var e=r3(t);if(!e)return null;var r=e[0],i=e[1];if(r==="searchbot")return new J2;var s=i[1]&&i[1].split(".").join("_").split("_").slice(0,3);s?s.length<yu&&(s=gu(gu([],s,!0),s3(yu-s.length),!0)):s=[];var n=s.join("."),o=i3(t),f=Q2.exec(t);return f&&f[1]?new Y2(r,n,o,f[1]):new W2(r,n,o)}function i3(t){for(var e=0,r=mu.length;e<r;e++){var i=mu[e],s=i[0],n=i[1],o=n.exec(t);if(o)return s}return null}function n3(){var t=typeof process<"u"&&process.version;return t?new G2(process.version.slice(1)):null}function s3(t){for(var e=[],r=0;r<t;r++)e.push("0");return e}var ht={};Object.defineProperty(ht,"__esModule",{value:!0}),ht.getLocalStorage=ht.getLocalStorageOrThrow=ht.getCrypto=ht.getCryptoOrThrow=_u=ht.getLocation=ht.getLocationOrThrow=Ma=ht.getNavigator=ht.getNavigatorOrThrow=Ks=ht.getDocument=ht.getDocumentOrThrow=ht.getFromWindowOrThrow=ht.getFromWindow=void 0;function Hi(t){let e;return typeof window<"u"&&typeof window[t]<"u"&&(e=window[t]),e}ht.getFromWindow=Hi;function pn(t){const e=Hi(t);if(!e)throw new Error(`${t} is not defined in Window`);return e}ht.getFromWindowOrThrow=pn;function o3(){return pn("document")}ht.getDocumentOrThrow=o3;function a3(){return Hi("document")}var Ks=ht.getDocument=a3;function f3(){return pn("navigator")}ht.getNavigatorOrThrow=f3;function c3(){return Hi("navigator")}var Ma=ht.getNavigator=c3;function h3(){return pn("location")}ht.getLocationOrThrow=h3;function u3(){return Hi("location")}var _u=ht.getLocation=u3;function d3(){return pn("crypto")}ht.getCryptoOrThrow=d3;function l3(){return Hi("crypto")}ht.getCrypto=l3;function p3(){return pn("localStorage")}ht.getLocalStorageOrThrow=p3;function b3(){return Hi("localStorage")}ht.getLocalStorage=b3;var Ia={};Object.defineProperty(Ia,"__esModule",{value:!0});var Eu=Ia.getWindowMetadata=void 0;const xu=ht;function v3(){let t,e;try{t=xu.getDocumentOrThrow(),e=xu.getLocationOrThrow()}catch{return null}function r(){const w=t.getElementsByTagName("link"),S=[];for(let I=0;I<w.length;I++){const M=w[I],R=M.getAttribute("rel");if(R&&R.toLowerCase().indexOf("icon")>-1){const N=M.getAttribute("href");if(N)if(N.toLowerCase().indexOf("https:")===-1&&N.toLowerCase().indexOf("http:")===-1&&N.indexOf("//")!==0){let C=e.protocol+"//"+e.host;if(N.indexOf("/")===0)C+=N;else{const B=e.pathname.split("/");B.pop();const F=B.join("/");C+=F+"/"+N}S.push(C)}else if(N.indexOf("//")===0){const C=e.protocol+N;S.push(C)}else S.push(N)}}return S}function i(...w){const S=t.getElementsByTagName("meta");for(let I=0;I<S.length;I++){const M=S[I],R=["itemprop","property","name"].map(N=>M.getAttribute(N)).filter(N=>N?w.includes(N):!1);if(R.length&&R){const N=M.getAttribute("content");if(N)return N}}return""}function s(){let w=i("name","og:site_name","og:title","twitter:title");return w||(w=t.title),w}function n(){return i("description","og:description","twitter:description","keywords")}const o=s(),f=n(),d=e.origin,u=r();return{description:f,url:d,icons:u,name:o}}Eu=Ia.getWindowMetadata=v3;const g3="logger/5.7.0";let Su=!1,Mu=!1;const Hs={debug:1,default:2,info:2,warning:3,error:4,off:5};let Iu=Hs.default,Aa=null;function y3(){try{const t=[];if(["NFD","NFC","NFKD","NFKC"].forEach(e=>{try{if("test".normalize(e)!=="test")throw new Error("bad normalize")}catch{t.push(e)}}),t.length)throw new Error("missing "+t.join(", "));if("\xE9".normalize("NFD")!=="e\u0301")throw new Error("broken implementation")}catch(t){return t.message}return null}const Au=y3();var Da;(function(t){t.DEBUG="DEBUG",t.INFO="INFO",t.WARNING="WARNING",t.ERROR="ERROR",t.OFF="OFF"})(Da||(Da={}));var Rr;(function(t){t.UNKNOWN_ERROR="UNKNOWN_ERROR",t.NOT_IMPLEMENTED="NOT_IMPLEMENTED",t.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",t.NETWORK_ERROR="NETWORK_ERROR",t.SERVER_ERROR="SERVER_ERROR",t.TIMEOUT="TIMEOUT",t.BUFFER_OVERRUN="BUFFER_OVERRUN",t.NUMERIC_FAULT="NUMERIC_FAULT",t.MISSING_NEW="MISSING_NEW",t.INVALID_ARGUMENT="INVALID_ARGUMENT",t.MISSING_ARGUMENT="MISSING_ARGUMENT",t.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",t.CALL_EXCEPTION="CALL_EXCEPTION",t.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",t.NONCE_EXPIRED="NONCE_EXPIRED",t.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",t.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",t.TRANSACTION_REPLACED="TRANSACTION_REPLACED",t.ACTION_REJECTED="ACTION_REJECTED"})(Rr||(Rr={}));const Du="0123456789abcdef";class xe{constructor(e){Object.defineProperty(this,"version",{enumerable:!0,value:e,writable:!1})}_log(e,r){const i=e.toLowerCase();Hs[i]==null&&this.throwArgumentError("invalid log level name","logLevel",e),!(Iu>Hs[i])&&console.log.apply(console,r)}debug(...e){this._log(xe.levels.DEBUG,e)}info(...e){this._log(xe.levels.INFO,e)}warn(...e){this._log(xe.levels.WARNING,e)}makeError(e,r,i){if(Mu)return this.makeError("censored error",r,{});r||(r=xe.errors.UNKNOWN_ERROR),i||(i={});const s=[];Object.keys(i).forEach(d=>{const u=i[d];try{if(u instanceof Uint8Array){let v="";for(let w=0;w<u.length;w++)v+=Du[u[w]>>4],v+=Du[u[w]&15];s.push(d+"=Uint8Array(0x"+v+")")}else s.push(d+"="+JSON.stringify(u))}catch{s.push(d+"="+JSON.stringify(i[d].toString()))}}),s.push(`code=${r}`),s.push(`version=${this.version}`);const n=e;let o="";switch(r){case Rr.NUMERIC_FAULT:{o="NUMERIC_FAULT";const d=e;switch(d){case"overflow":case"underflow":case"division-by-zero":o+="-"+d;break;case"negative-power":case"negative-width":o+="-unsupported";break;case"unbound-bitwise-result":o+="-unbound-result";break}break}case Rr.CALL_EXCEPTION:case Rr.INSUFFICIENT_FUNDS:case Rr.MISSING_NEW:case Rr.NONCE_EXPIRED:case Rr.REPLACEMENT_UNDERPRICED:case Rr.TRANSACTION_REPLACED:case Rr.UNPREDICTABLE_GAS_LIMIT:o=r;break}o&&(e+=" [ See: https://links.ethers.org/v5-errors-"+o+" ]"),s.length&&(e+=" ("+s.join(", ")+")");const f=new Error(e);return f.reason=n,f.code=r,Object.keys(i).forEach(function(d){f[d]=i[d]}),f}throwError(e,r,i){throw this.makeError(e,r,i)}throwArgumentError(e,r,i){return this.throwError(e,xe.errors.INVALID_ARGUMENT,{argument:r,value:i})}assert(e,r,i,s){e||this.throwError(r,i,s)}assertArgument(e,r,i,s){e||this.throwArgumentError(r,i,s)}checkNormalize(e){Au&&this.throwError("platform missing String.prototype.normalize",xe.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:Au})}checkSafeUint53(e,r){typeof e=="number"&&(r==null&&(r="value not safe"),(e<0||e>=9007199254740991)&&this.throwError(r,xe.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:e}),e%1&&this.throwError(r,xe.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:e}))}checkArgumentCount(e,r,i){i?i=": "+i:i="",e<r&&this.throwError("missing argument"+i,xe.errors.MISSING_ARGUMENT,{count:e,expectedCount:r}),e>r&&this.throwError("too many arguments"+i,xe.errors.UNEXPECTED_ARGUMENT,{count:e,expectedCount:r})}checkNew(e,r){(e===Object||e==null)&&this.throwError("missing new",xe.errors.MISSING_NEW,{name:r.name})}checkAbstract(e,r){e===r?this.throwError("cannot instantiate abstract class "+JSON.stringify(r.name)+" directly; use a sub-class",xe.errors.UNSUPPORTED_OPERATION,{name:e.name,operation:"new"}):(e===Object||e==null)&&this.throwError("missing new",xe.errors.MISSING_NEW,{name:r.name})}static globalLogger(){return Aa||(Aa=new xe(g3)),Aa}static setCensorship(e,r){if(!e&&r&&this.globalLogger().throwError("cannot permanently disable censorship",xe.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),Su){if(!e)return;this.globalLogger().throwError("error censorship permanent",xe.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}Mu=!!e,Su=!!r}static setLogLevel(e){const r=Hs[e.toLowerCase()];if(r==null){xe.globalLogger().warn("invalid log level - "+e);return}Iu=r}static from(e){return new xe(e)}}xe.errors=Rr,xe.levels=Da;const m3="bytes/5.7.0",Mi=new xe(m3);function Ou(t){return!!t.toHexString}function Vs(t){return t.slice||(t.slice=function(){const e=Array.prototype.slice.call(arguments);return Vs(new Uint8Array(Array.prototype.slice.apply(t,e)))}),t}function Ru(t){return typeof t=="number"&&t==t&&t%1===0}function Xn(t){if(t==null)return!1;if(t.constructor===Uint8Array)return!0;if(typeof t=="string"||!Ru(t.length)||t.length<0)return!1;for(let e=0;e<t.length;e++){const r=t[e];if(!Ru(r)||r<0||r>=256)return!1}return!0}function w3(t,e){if(e||(e={}),typeof t=="number"){Mi.checkSafeUint53(t,"invalid arrayify value");const r=[];for(;t;)r.unshift(t&255),t=parseInt(String(t/256));return r.length===0&&r.push(0),Vs(new Uint8Array(r))}if(e.allowMissingPrefix&&typeof t=="string"&&t.substring(0,2)!=="0x"&&(t="0x"+t),Ou(t)&&(t=t.toHexString()),bn(t)){let r=t.substring(2);r.length%2&&(e.hexPad==="left"?r="0"+r:e.hexPad==="right"?r+="0":Mi.throwArgumentError("hex data is odd-length","value",t));const i=[];for(let s=0;s<r.length;s+=2)i.push(parseInt(r.substring(s,s+2),16));return Vs(new Uint8Array(i))}return Xn(t)?Vs(new Uint8Array(t)):Mi.throwArgumentError("invalid arrayify value","value",t)}function bn(t,e){return!(typeof t!="string"||!t.match(/^0x[0-9A-Fa-f]*$/)||e&&t.length!==2+2*e)}const Oa="0123456789abcdef";function Tu(t,e){if(e||(e={}),typeof t=="number"){Mi.checkSafeUint53(t,"invalid hexlify value");let r="";for(;t;)r=Oa[t&15]+r,t=Math.floor(t/16);return r.length?(r.length%2&&(r="0"+r),"0x"+r):"0x00"}if(typeof t=="bigint")return t=t.toString(16),t.length%2?"0x0"+t:"0x"+t;if(e.allowMissingPrefix&&typeof t=="string"&&t.substring(0,2)!=="0x"&&(t="0x"+t),Ou(t))return t.toHexString();if(bn(t))return t.length%2&&(e.hexPad==="left"?t="0x0"+t.substring(2):e.hexPad==="right"?t+="0":Mi.throwArgumentError("hex data is odd-length","value",t)),t.toLowerCase();if(Xn(t)){let r="0x";for(let i=0;i<t.length;i++){let s=t[i];r+=Oa[(s&240)>>4]+Oa[s&15]}return r}return Mi.throwArgumentError("invalid hexlify value","value",t)}function Nu(t,e){for(typeof t!="string"?t=Tu(t):bn(t)||Mi.throwArgumentError("invalid hex string","value",t),t.length>2*e+2&&Mi.throwArgumentError("value out of range","value",arguments[1]);t.length<2*e+2;)t="0x0"+t.substring(2);return t}var Pu={exports:{}},_3={},E3=Object.freeze({__proto__:null,default:_3}),Ra=Co(E3);(function(t){(function(e,r){function i(l,a){if(!l)throw new Error(a||"Assertion failed")}function s(l,a){l.super_=a;var c=function(){};c.prototype=a.prototype,l.prototype=new c,l.prototype.constructor=l}function n(l,a,c){if(n.isBN(l))return l;this.negative=0,this.words=null,this.length=0,this.red=null,l!==null&&((a==="le"||a==="be")&&(c=a,a=10),this._init(l||0,a||10,c||"be"))}typeof e=="object"?e.exports=n:r.BN=n,n.BN=n,n.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=Ra.Buffer}catch{}n.isBN=function(a){return a instanceof n?!0:a!==null&&typeof a=="object"&&a.constructor.wordSize===n.wordSize&&Array.isArray(a.words)},n.max=function(a,c){return a.cmp(c)>0?a:c},n.min=function(a,c){return a.cmp(c)<0?a:c},n.prototype._init=function(a,c,b){if(typeof a=="number")return this._initNumber(a,c,b);if(typeof a=="object")return this._initArray(a,c,b);c==="hex"&&(c=16),i(c===(c|0)&&c>=2&&c<=36),a=a.toString().replace(/\s+/g,"");var _=0;a[0]==="-"&&(_++,this.negative=1),_<a.length&&(c===16?this._parseHex(a,_,b):(this._parseBase(a,c,_),b==="le"&&this._initArray(this.toArray(),c,b)))},n.prototype._initNumber=function(a,c,b){a<0&&(this.negative=1,a=-a),a<67108864?(this.words=[a&67108863],this.length=1):a<4503599627370496?(this.words=[a&67108863,a/67108864&67108863],this.length=2):(i(a<9007199254740992),this.words=[a&67108863,a/67108864&67108863,1],this.length=3),b==="le"&&this._initArray(this.toArray(),c,b)},n.prototype._initArray=function(a,c,b){if(i(typeof a.length=="number"),a.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(a.length/3),this.words=new Array(this.length);for(var _=0;_<this.length;_++)this.words[_]=0;var x,m,h=0;if(b==="be")for(_=a.length-1,x=0;_>=0;_-=3)m=a[_]|a[_-1]<<8|a[_-2]<<16,this.words[x]|=m<<h&67108863,this.words[x+1]=m>>>26-h&67108863,h+=24,h>=26&&(h-=26,x++);else if(b==="le")for(_=0,x=0;_<a.length;_+=3)m=a[_]|a[_+1]<<8|a[_+2]<<16,this.words[x]|=m<<h&67108863,this.words[x+1]=m>>>26-h&67108863,h+=24,h>=26&&(h-=26,x++);return this._strip()};function f(l,a){var c=l.charCodeAt(a);if(c>=48&&c<=57)return c-48;if(c>=65&&c<=70)return c-55;if(c>=97&&c<=102)return c-87;i(!1,"Invalid character in "+l)}function d(l,a,c){var b=f(l,c);return c-1>=a&&(b|=f(l,c-1)<<4),b}n.prototype._parseHex=function(a,c,b){this.length=Math.ceil((a.length-c)/6),this.words=new Array(this.length);for(var _=0;_<this.length;_++)this.words[_]=0;var x=0,m=0,h;if(b==="be")for(_=a.length-1;_>=c;_-=2)h=d(a,c,_)<<x,this.words[m]|=h&67108863,x>=18?(x-=18,m+=1,this.words[m]|=h>>>26):x+=8;else{var y=a.length-c;for(_=y%2===0?c+1:c;_<a.length;_+=2)h=d(a,c,_)<<x,this.words[m]|=h&67108863,x>=18?(x-=18,m+=1,this.words[m]|=h>>>26):x+=8}this._strip()};function u(l,a,c,b){for(var _=0,x=0,m=Math.min(l.length,c),h=a;h<m;h++){var y=l.charCodeAt(h)-48;_*=b,y>=49?x=y-49+10:y>=17?x=y-17+10:x=y,i(y>=0&&x<b,"Invalid character"),_+=x}return _}n.prototype._parseBase=function(a,c,b){this.words=[0],this.length=1;for(var _=0,x=1;x<=67108863;x*=c)_++;_--,x=x/c|0;for(var m=a.length-b,h=m%_,y=Math.min(m,m-h)+b,g=0,A=b;A<y;A+=_)g=u(a,A,A+_,c),this.imuln(x),this.words[0]+g<67108864?this.words[0]+=g:this._iaddn(g);if(h!==0){var U=1;for(g=u(a,A,a.length,c),A=0;A<h;A++)U*=c;this.imuln(U),this.words[0]+g<67108864?this.words[0]+=g:this._iaddn(g)}this._strip()},n.prototype.copy=function(a){a.words=new Array(this.length);for(var c=0;c<this.length;c++)a.words[c]=this.words[c];a.length=this.length,a.negative=this.negative,a.red=this.red};function v(l,a){l.words=a.words,l.length=a.length,l.negative=a.negative,l.red=a.red}if(n.prototype._move=function(a){v(a,this)},n.prototype.clone=function(){var a=new n(null);return this.copy(a),a},n.prototype._expand=function(a){for(;this.length<a;)this.words[this.length++]=0;return this},n.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},n.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{n.prototype[Symbol.for("nodejs.util.inspect.custom")]=w}catch{n.prototype.inspect=w}else n.prototype.inspect=w;function w(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var S=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],I=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],M=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];n.prototype.toString=function(a,c){a=a||10,c=c|0||1;var b;if(a===16||a==="hex"){b="";for(var _=0,x=0,m=0;m<this.length;m++){var h=this.words[m],y=((h<<_|x)&16777215).toString(16);x=h>>>24-_&16777215,_+=2,_>=26&&(_-=26,m--),x!==0||m!==this.length-1?b=S[6-y.length]+y+b:b=y+b}for(x!==0&&(b=x.toString(16)+b);b.length%c!==0;)b="0"+b;return this.negative!==0&&(b="-"+b),b}if(a===(a|0)&&a>=2&&a<=36){var g=I[a],A=M[a];b="";var U=this.clone();for(U.negative=0;!U.isZero();){var E=U.modrn(A).toString(a);U=U.idivn(A),U.isZero()?b=E+b:b=S[g-E.length]+E+b}for(this.isZero()&&(b="0"+b);b.length%c!==0;)b="0"+b;return this.negative!==0&&(b="-"+b),b}i(!1,"Base should be between 2 and 36")},n.prototype.toNumber=function(){var a=this.words[0];return this.length===2?a+=this.words[1]*67108864:this.length===3&&this.words[2]===1?a+=4503599627370496+this.words[1]*67108864:this.length>2&&i(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-a:a},n.prototype.toJSON=function(){return this.toString(16,2)},o&&(n.prototype.toBuffer=function(a,c){return this.toArrayLike(o,a,c)}),n.prototype.toArray=function(a,c){return this.toArrayLike(Array,a,c)};var R=function(a,c){return a.allocUnsafe?a.allocUnsafe(c):new a(c)};n.prototype.toArrayLike=function(a,c,b){this._strip();var _=this.byteLength(),x=b||Math.max(1,_);i(_<=x,"byte array longer than desired length"),i(x>0,"Requested array length <= 0");var m=R(a,x),h=c==="le"?"LE":"BE";return this["_toArrayLike"+h](m,_),m},n.prototype._toArrayLikeLE=function(a,c){for(var b=0,_=0,x=0,m=0;x<this.length;x++){var h=this.words[x]<<m|_;a[b++]=h&255,b<a.length&&(a[b++]=h>>8&255),b<a.length&&(a[b++]=h>>16&255),m===6?(b<a.length&&(a[b++]=h>>24&255),_=0,m=0):(_=h>>>24,m+=2)}if(b<a.length)for(a[b++]=_;b<a.length;)a[b++]=0},n.prototype._toArrayLikeBE=function(a,c){for(var b=a.length-1,_=0,x=0,m=0;x<this.length;x++){var h=this.words[x]<<m|_;a[b--]=h&255,b>=0&&(a[b--]=h>>8&255),b>=0&&(a[b--]=h>>16&255),m===6?(b>=0&&(a[b--]=h>>24&255),_=0,m=0):(_=h>>>24,m+=2)}if(b>=0)for(a[b--]=_;b>=0;)a[b--]=0},Math.clz32?n.prototype._countBits=function(a){return 32-Math.clz32(a)}:n.prototype._countBits=function(a){var c=a,b=0;return c>=4096&&(b+=13,c>>>=13),c>=64&&(b+=7,c>>>=7),c>=8&&(b+=4,c>>>=4),c>=2&&(b+=2,c>>>=2),b+c},n.prototype._zeroBits=function(a){if(a===0)return 26;var c=a,b=0;return(c&8191)===0&&(b+=13,c>>>=13),(c&127)===0&&(b+=7,c>>>=7),(c&15)===0&&(b+=4,c>>>=4),(c&3)===0&&(b+=2,c>>>=2),(c&1)===0&&b++,b},n.prototype.bitLength=function(){var a=this.words[this.length-1],c=this._countBits(a);return(this.length-1)*26+c};function N(l){for(var a=new Array(l.bitLength()),c=0;c<a.length;c++){var b=c/26|0,_=c%26;a[c]=l.words[b]>>>_&1}return a}n.prototype.zeroBits=function(){if(this.isZero())return 0;for(var a=0,c=0;c<this.length;c++){var b=this._zeroBits(this.words[c]);if(a+=b,b!==26)break}return a},n.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},n.prototype.toTwos=function(a){return this.negative!==0?this.abs().inotn(a).iaddn(1):this.clone()},n.prototype.fromTwos=function(a){return this.testn(a-1)?this.notn(a).iaddn(1).ineg():this.clone()},n.prototype.isNeg=function(){return this.negative!==0},n.prototype.neg=function(){return this.clone().ineg()},n.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},n.prototype.iuor=function(a){for(;this.length<a.length;)this.words[this.length++]=0;for(var c=0;c<a.length;c++)this.words[c]=this.words[c]|a.words[c];return this._strip()},n.prototype.ior=function(a){return i((this.negative|a.negative)===0),this.iuor(a)},n.prototype.or=function(a){return this.length>a.length?this.clone().ior(a):a.clone().ior(this)},n.prototype.uor=function(a){return this.length>a.length?this.clone().iuor(a):a.clone().iuor(this)},n.prototype.iuand=function(a){var c;this.length>a.length?c=a:c=this;for(var b=0;b<c.length;b++)this.words[b]=this.words[b]&a.words[b];return this.length=c.length,this._strip()},n.prototype.iand=function(a){return i((this.negative|a.negative)===0),this.iuand(a)},n.prototype.and=function(a){return this.length>a.length?this.clone().iand(a):a.clone().iand(this)},n.prototype.uand=function(a){return this.length>a.length?this.clone().iuand(a):a.clone().iuand(this)},n.prototype.iuxor=function(a){var c,b;this.length>a.length?(c=this,b=a):(c=a,b=this);for(var _=0;_<b.length;_++)this.words[_]=c.words[_]^b.words[_];if(this!==c)for(;_<c.length;_++)this.words[_]=c.words[_];return this.length=c.length,this._strip()},n.prototype.ixor=function(a){return i((this.negative|a.negative)===0),this.iuxor(a)},n.prototype.xor=function(a){return this.length>a.length?this.clone().ixor(a):a.clone().ixor(this)},n.prototype.uxor=function(a){return this.length>a.length?this.clone().iuxor(a):a.clone().iuxor(this)},n.prototype.inotn=function(a){i(typeof a=="number"&&a>=0);var c=Math.ceil(a/26)|0,b=a%26;this._expand(c),b>0&&c--;for(var _=0;_<c;_++)this.words[_]=~this.words[_]&67108863;return b>0&&(this.words[_]=~this.words[_]&67108863>>26-b),this._strip()},n.prototype.notn=function(a){return this.clone().inotn(a)},n.prototype.setn=function(a,c){i(typeof a=="number"&&a>=0);var b=a/26|0,_=a%26;return this._expand(b+1),c?this.words[b]=this.words[b]|1<<_:this.words[b]=this.words[b]&~(1<<_),this._strip()},n.prototype.iadd=function(a){var c;if(this.negative!==0&&a.negative===0)return this.negative=0,c=this.isub(a),this.negative^=1,this._normSign();if(this.negative===0&&a.negative!==0)return a.negative=0,c=this.isub(a),a.negative=1,c._normSign();var b,_;this.length>a.length?(b=this,_=a):(b=a,_=this);for(var x=0,m=0;m<_.length;m++)c=(b.words[m]|0)+(_.words[m]|0)+x,this.words[m]=c&67108863,x=c>>>26;for(;x!==0&&m<b.length;m++)c=(b.words[m]|0)+x,this.words[m]=c&67108863,x=c>>>26;if(this.length=b.length,x!==0)this.words[this.length]=x,this.length++;else if(b!==this)for(;m<b.length;m++)this.words[m]=b.words[m];return this},n.prototype.add=function(a){var c;return a.negative!==0&&this.negative===0?(a.negative=0,c=this.sub(a),a.negative^=1,c):a.negative===0&&this.negative!==0?(this.negative=0,c=a.sub(this),this.negative=1,c):this.length>a.length?this.clone().iadd(a):a.clone().iadd(this)},n.prototype.isub=function(a){if(a.negative!==0){a.negative=0;var c=this.iadd(a);return a.negative=1,c._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(a),this.negative=1,this._normSign();var b=this.cmp(a);if(b===0)return this.negative=0,this.length=1,this.words[0]=0,this;var _,x;b>0?(_=this,x=a):(_=a,x=this);for(var m=0,h=0;h<x.length;h++)c=(_.words[h]|0)-(x.words[h]|0)+m,m=c>>26,this.words[h]=c&67108863;for(;m!==0&&h<_.length;h++)c=(_.words[h]|0)+m,m=c>>26,this.words[h]=c&67108863;if(m===0&&h<_.length&&_!==this)for(;h<_.length;h++)this.words[h]=_.words[h];return this.length=Math.max(this.length,h),_!==this&&(this.negative=1),this._strip()},n.prototype.sub=function(a){return this.clone().isub(a)};function C(l,a,c){c.negative=a.negative^l.negative;var b=l.length+a.length|0;c.length=b,b=b-1|0;var _=l.words[0]|0,x=a.words[0]|0,m=_*x,h=m&67108863,y=m/67108864|0;c.words[0]=h;for(var g=1;g<b;g++){for(var A=y>>>26,U=y&67108863,E=Math.min(g,a.length-1),T=Math.max(0,g-l.length+1);T<=E;T++){var L=g-T|0;_=l.words[L]|0,x=a.words[T]|0,m=_*x+U,A+=m/67108864|0,U=m&67108863}c.words[g]=U|0,y=A|0}return y!==0?c.words[g]=y|0:c.length--,c._strip()}var B=function(a,c,b){var _=a.words,x=c.words,m=b.words,h=0,y,g,A,U=_[0]|0,E=U&8191,T=U>>>13,L=_[1]|0,$=L&8191,z=L>>>13,W=_[2]|0,X=W&8191,K=W>>>13,ce=_[3]|0,Z=ce&8191,Q=ce>>>13,Ue=_[4]|0,ze=Ue&8191,he=Ue>>>13,Re=_[5]|0,Te=Re&8191,oe=Re>>>13,Ne=_[6]|0,Pe=Ne&8191,fe=Ne>>>13,Ce=_[7]|0,Be=Ce&8191,se=Ce>>>13,De=_[8]|0,Le=De&8191,re=De>>>13,Ve=_[9]|0,We=Ve&8191,pe=Ve>>>13,Ge=x[0]|0,Fe=Ge&8191,de=Ge>>>13,Ye=x[1]|0,Qe=Ye&8191,ne=Ye>>>13,Je=x[2]|0,et=Je&8191,be=Je>>>13,ke=x[3]|0,Oe=ke&8191,ue=ke>>>13,qe=x[4]|0,je=qe&8191,ae=qe>>>13,tt=x[5]|0,rt=tt&8191,ve=tt>>>13,it=x[6]|0,nt=it&8191,le=it>>>13,Ke=x[7]|0,Ie=Ke&8191,ge=Ke>>>13,st=x[8]|0,ot=st&8191,ye=st>>>13,at=x[9]|0,Ee=at&8191,Xe=at>>>13;b.negative=a.negative^c.negative,b.length=19,y=Math.imul(E,Fe),g=Math.imul(E,de),g=g+Math.imul(T,Fe)|0,A=Math.imul(T,de);var ir=(h+y|0)+((g&8191)<<13)|0;h=(A+(g>>>13)|0)+(ir>>>26)|0,ir&=67108863,y=Math.imul($,Fe),g=Math.imul($,de),g=g+Math.imul(z,Fe)|0,A=Math.imul(z,de),y=y+Math.imul(E,Qe)|0,g=g+Math.imul(E,ne)|0,g=g+Math.imul(T,Qe)|0,A=A+Math.imul(T,ne)|0;var nr=(h+y|0)+((g&8191)<<13)|0;h=(A+(g>>>13)|0)+(nr>>>26)|0,nr&=67108863,y=Math.imul(X,Fe),g=Math.imul(X,de),g=g+Math.imul(K,Fe)|0,A=Math.imul(K,de),y=y+Math.imul($,Qe)|0,g=g+Math.imul($,ne)|0,g=g+Math.imul(z,Qe)|0,A=A+Math.imul(z,ne)|0,y=y+Math.imul(E,et)|0,g=g+Math.imul(E,be)|0,g=g+Math.imul(T,et)|0,A=A+Math.imul(T,be)|0;var sr=(h+y|0)+((g&8191)<<13)|0;h=(A+(g>>>13)|0)+(sr>>>26)|0,sr&=67108863,y=Math.imul(Z,Fe),g=Math.imul(Z,de),g=g+Math.imul(Q,Fe)|0,A=Math.imul(Q,de),y=y+Math.imul(X,Qe)|0,g=g+Math.imul(X,ne)|0,g=g+Math.imul(K,Qe)|0,A=A+Math.imul(K,ne)|0,y=y+Math.imul($,et)|0,g=g+Math.imul($,be)|0,g=g+Math.imul(z,et)|0,A=A+Math.imul(z,be)|0,y=y+Math.imul(E,Oe)|0,g=g+Math.imul(E,ue)|0,g=g+Math.imul(T,Oe)|0,A=A+Math.imul(T,ue)|0;var or=(h+y|0)+((g&8191)<<13)|0;h=(A+(g>>>13)|0)+(or>>>26)|0,or&=67108863,y=Math.imul(ze,Fe),g=Math.imul(ze,de),g=g+Math.imul(he,Fe)|0,A=Math.imul(he,de),y=y+Math.imul(Z,Qe)|0,g=g+Math.imul(Z,ne)|0,g=g+Math.imul(Q,Qe)|0,A=A+Math.imul(Q,ne)|0,y=y+Math.imul(X,et)|0,g=g+Math.imul(X,be)|0,g=g+Math.imul(K,et)|0,A=A+Math.imul(K,be)|0,y=y+Math.imul($,Oe)|0,g=g+Math.imul($,ue)|0,g=g+Math.imul(z,Oe)|0,A=A+Math.imul(z,ue)|0,y=y+Math.imul(E,je)|0,g=g+Math.imul(E,ae)|0,g=g+Math.imul(T,je)|0,A=A+Math.imul(T,ae)|0;var wt=(h+y|0)+((g&8191)<<13)|0;h=(A+(g>>>13)|0)+(wt>>>26)|0,wt&=67108863,y=Math.imul(Te,Fe),g=Math.imul(Te,de),g=g+Math.imul(oe,Fe)|0,A=Math.imul(oe,de),y=y+Math.imul(ze,Qe)|0,g=g+Math.imul(ze,ne)|0,g=g+Math.imul(he,Qe)|0,A=A+Math.imul(he,ne)|0,y=y+Math.imul(Z,et)|0,g=g+Math.imul(Z,be)|0,g=g+Math.imul(Q,et)|0,A=A+Math.imul(Q,be)|0,y=y+Math.imul(X,Oe)|0,g=g+Math.imul(X,ue)|0,g=g+Math.imul(K,Oe)|0,A=A+Math.imul(K,ue)|0,y=y+Math.imul($,je)|0,g=g+Math.imul($,ae)|0,g=g+Math.imul(z,je)|0,A=A+Math.imul(z,ae)|0,y=y+Math.imul(E,rt)|0,g=g+Math.imul(E,ve)|0,g=g+Math.imul(T,rt)|0,A=A+Math.imul(T,ve)|0;var ui=(h+y|0)+((g&8191)<<13)|0;h=(A+(g>>>13)|0)+(ui>>>26)|0,ui&=67108863,y=Math.imul(Pe,Fe),g=Math.imul(Pe,de),g=g+Math.imul(fe,Fe)|0,A=Math.imul(fe,de),y=y+Math.imul(Te,Qe)|0,g=g+Math.imul(Te,ne)|0,g=g+Math.imul(oe,Qe)|0,A=A+Math.imul(oe,ne)|0,y=y+Math.imul(ze,et)|0,g=g+Math.imul(ze,be)|0,g=g+Math.imul(he,et)|0,A=A+Math.imul(he,be)|0,y=y+Math.imul(Z,Oe)|0,g=g+Math.imul(Z,ue)|0,g=g+Math.imul(Q,Oe)|0,A=A+Math.imul(Q,ue)|0,y=y+Math.imul(X,je)|0,g=g+Math.imul(X,ae)|0,g=g+Math.imul(K,je)|0,A=A+Math.imul(K,ae)|0,y=y+Math.imul($,rt)|0,g=g+Math.imul($,ve)|0,g=g+Math.imul(z,rt)|0,A=A+Math.imul(z,ve)|0,y=y+Math.imul(E,nt)|0,g=g+Math.imul(E,le)|0,g=g+Math.imul(T,nt)|0,A=A+Math.imul(T,le)|0;var di=(h+y|0)+((g&8191)<<13)|0;h=(A+(g>>>13)|0)+(di>>>26)|0,di&=67108863,y=Math.imul(Be,Fe),g=Math.imul(Be,de),g=g+Math.imul(se,Fe)|0,A=Math.imul(se,de),y=y+Math.imul(Pe,Qe)|0,g=g+Math.imul(Pe,ne)|0,g=g+Math.imul(fe,Qe)|0,A=A+Math.imul(fe,ne)|0,y=y+Math.imul(Te,et)|0,g=g+Math.imul(Te,be)|0,g=g+Math.imul(oe,et)|0,A=A+Math.imul(oe,be)|0,y=y+Math.imul(ze,Oe)|0,g=g+Math.imul(ze,ue)|0,g=g+Math.imul(he,Oe)|0,A=A+Math.imul(he,ue)|0,y=y+Math.imul(Z,je)|0,g=g+Math.imul(Z,ae)|0,g=g+Math.imul(Q,je)|0,A=A+Math.imul(Q,ae)|0,y=y+Math.imul(X,rt)|0,g=g+Math.imul(X,ve)|0,g=g+Math.imul(K,rt)|0,A=A+Math.imul(K,ve)|0,y=y+Math.imul($,nt)|0,g=g+Math.imul($,le)|0,g=g+Math.imul(z,nt)|0,A=A+Math.imul(z,le)|0,y=y+Math.imul(E,Ie)|0,g=g+Math.imul(E,ge)|0,g=g+Math.imul(T,Ie)|0,A=A+Math.imul(T,ge)|0;var li=(h+y|0)+((g&8191)<<13)|0;h=(A+(g>>>13)|0)+(li>>>26)|0,li&=67108863,y=Math.imul(Le,Fe),g=Math.imul(Le,de),g=g+Math.imul(re,Fe)|0,A=Math.imul(re,de),y=y+Math.imul(Be,Qe)|0,g=g+Math.imul(Be,ne)|0,g=g+Math.imul(se,Qe)|0,A=A+Math.imul(se,ne)|0,y=y+Math.imul(Pe,et)|0,g=g+Math.imul(Pe,be)|0,g=g+Math.imul(fe,et)|0,A=A+Math.imul(fe,be)|0,y=y+Math.imul(Te,Oe)|0,g=g+Math.imul(Te,ue)|0,g=g+Math.imul(oe,Oe)|0,A=A+Math.imul(oe,ue)|0,y=y+Math.imul(ze,je)|0,g=g+Math.imul(ze,ae)|0,g=g+Math.imul(he,je)|0,A=A+Math.imul(he,ae)|0,y=y+Math.imul(Z,rt)|0,g=g+Math.imul(Z,ve)|0,g=g+Math.imul(Q,rt)|0,A=A+Math.imul(Q,ve)|0,y=y+Math.imul(X,nt)|0,g=g+Math.imul(X,le)|0,g=g+Math.imul(K,nt)|0,A=A+Math.imul(K,le)|0,y=y+Math.imul($,Ie)|0,g=g+Math.imul($,ge)|0,g=g+Math.imul(z,Ie)|0,A=A+Math.imul(z,ge)|0,y=y+Math.imul(E,ot)|0,g=g+Math.imul(E,ye)|0,g=g+Math.imul(T,ot)|0,A=A+Math.imul(T,ye)|0;var pi=(h+y|0)+((g&8191)<<13)|0;h=(A+(g>>>13)|0)+(pi>>>26)|0,pi&=67108863,y=Math.imul(We,Fe),g=Math.imul(We,de),g=g+Math.imul(pe,Fe)|0,A=Math.imul(pe,de),y=y+Math.imul(Le,Qe)|0,g=g+Math.imul(Le,ne)|0,g=g+Math.imul(re,Qe)|0,A=A+Math.imul(re,ne)|0,y=y+Math.imul(Be,et)|0,g=g+Math.imul(Be,be)|0,g=g+Math.imul(se,et)|0,A=A+Math.imul(se,be)|0,y=y+Math.imul(Pe,Oe)|0,g=g+Math.imul(Pe,ue)|0,g=g+Math.imul(fe,Oe)|0,A=A+Math.imul(fe,ue)|0,y=y+Math.imul(Te,je)|0,g=g+Math.imul(Te,ae)|0,g=g+Math.imul(oe,je)|0,A=A+Math.imul(oe,ae)|0,y=y+Math.imul(ze,rt)|0,g=g+Math.imul(ze,ve)|0,g=g+Math.imul(he,rt)|0,A=A+Math.imul(he,ve)|0,y=y+Math.imul(Z,nt)|0,g=g+Math.imul(Z,le)|0,g=g+Math.imul(Q,nt)|0,A=A+Math.imul(Q,le)|0,y=y+Math.imul(X,Ie)|0,g=g+Math.imul(X,ge)|0,g=g+Math.imul(K,Ie)|0,A=A+Math.imul(K,ge)|0,y=y+Math.imul($,ot)|0,g=g+Math.imul($,ye)|0,g=g+Math.imul(z,ot)|0,A=A+Math.imul(z,ye)|0,y=y+Math.imul(E,Ee)|0,g=g+Math.imul(E,Xe)|0,g=g+Math.imul(T,Ee)|0,A=A+Math.imul(T,Xe)|0;var bi=(h+y|0)+((g&8191)<<13)|0;h=(A+(g>>>13)|0)+(bi>>>26)|0,bi&=67108863,y=Math.imul(We,Qe),g=Math.imul(We,ne),g=g+Math.imul(pe,Qe)|0,A=Math.imul(pe,ne),y=y+Math.imul(Le,et)|0,g=g+Math.imul(Le,be)|0,g=g+Math.imul(re,et)|0,A=A+Math.imul(re,be)|0,y=y+Math.imul(Be,Oe)|0,g=g+Math.imul(Be,ue)|0,g=g+Math.imul(se,Oe)|0,A=A+Math.imul(se,ue)|0,y=y+Math.imul(Pe,je)|0,g=g+Math.imul(Pe,ae)|0,g=g+Math.imul(fe,je)|0,A=A+Math.imul(fe,ae)|0,y=y+Math.imul(Te,rt)|0,g=g+Math.imul(Te,ve)|0,g=g+Math.imul(oe,rt)|0,A=A+Math.imul(oe,ve)|0,y=y+Math.imul(ze,nt)|0,g=g+Math.imul(ze,le)|0,g=g+Math.imul(he,nt)|0,A=A+Math.imul(he,le)|0,y=y+Math.imul(Z,Ie)|0,g=g+Math.imul(Z,ge)|0,g=g+Math.imul(Q,Ie)|0,A=A+Math.imul(Q,ge)|0,y=y+Math.imul(X,ot)|0,g=g+Math.imul(X,ye)|0,g=g+Math.imul(K,ot)|0,A=A+Math.imul(K,ye)|0,y=y+Math.imul($,Ee)|0,g=g+Math.imul($,Xe)|0,g=g+Math.imul(z,Ee)|0,A=A+Math.imul(z,Xe)|0;var Mr=(h+y|0)+((g&8191)<<13)|0;h=(A+(g>>>13)|0)+(Mr>>>26)|0,Mr&=67108863,y=Math.imul(We,et),g=Math.imul(We,be),g=g+Math.imul(pe,et)|0,A=Math.imul(pe,be),y=y+Math.imul(Le,Oe)|0,g=g+Math.imul(Le,ue)|0,g=g+Math.imul(re,Oe)|0,A=A+Math.imul(re,ue)|0,y=y+Math.imul(Be,je)|0,g=g+Math.imul(Be,ae)|0,g=g+Math.imul(se,je)|0,A=A+Math.imul(se,ae)|0,y=y+Math.imul(Pe,rt)|0,g=g+Math.imul(Pe,ve)|0,g=g+Math.imul(fe,rt)|0,A=A+Math.imul(fe,ve)|0,y=y+Math.imul(Te,nt)|0,g=g+Math.imul(Te,le)|0,g=g+Math.imul(oe,nt)|0,A=A+Math.imul(oe,le)|0,y=y+Math.imul(ze,Ie)|0,g=g+Math.imul(ze,ge)|0,g=g+Math.imul(he,Ie)|0,A=A+Math.imul(he,ge)|0,y=y+Math.imul(Z,ot)|0,g=g+Math.imul(Z,ye)|0,g=g+Math.imul(Q,ot)|0,A=A+Math.imul(Q,ye)|0,y=y+Math.imul(X,Ee)|0,g=g+Math.imul(X,Xe)|0,g=g+Math.imul(K,Ee)|0,A=A+Math.imul(K,Xe)|0;var vi=(h+y|0)+((g&8191)<<13)|0;h=(A+(g>>>13)|0)+(vi>>>26)|0,vi&=67108863,y=Math.imul(We,Oe),g=Math.imul(We,ue),g=g+Math.imul(pe,Oe)|0,A=Math.imul(pe,ue),y=y+Math.imul(Le,je)|0,g=g+Math.imul(Le,ae)|0,g=g+Math.imul(re,je)|0,A=A+Math.imul(re,ae)|0,y=y+Math.imul(Be,rt)|0,g=g+Math.imul(Be,ve)|0,g=g+Math.imul(se,rt)|0,A=A+Math.imul(se,ve)|0,y=y+Math.imul(Pe,nt)|0,g=g+Math.imul(Pe,le)|0,g=g+Math.imul(fe,nt)|0,A=A+Math.imul(fe,le)|0,y=y+Math.imul(Te,Ie)|0,g=g+Math.imul(Te,ge)|0,g=g+Math.imul(oe,Ie)|0,A=A+Math.imul(oe,ge)|0,y=y+Math.imul(ze,ot)|0,g=g+Math.imul(ze,ye)|0,g=g+Math.imul(he,ot)|0,A=A+Math.imul(he,ye)|0,y=y+Math.imul(Z,Ee)|0,g=g+Math.imul(Z,Xe)|0,g=g+Math.imul(Q,Ee)|0,A=A+Math.imul(Q,Xe)|0;var gi=(h+y|0)+((g&8191)<<13)|0;h=(A+(g>>>13)|0)+(gi>>>26)|0,gi&=67108863,y=Math.imul(We,je),g=Math.imul(We,ae),g=g+Math.imul(pe,je)|0,A=Math.imul(pe,ae),y=y+Math.imul(Le,rt)|0,g=g+Math.imul(Le,ve)|0,g=g+Math.imul(re,rt)|0,A=A+Math.imul(re,ve)|0,y=y+Math.imul(Be,nt)|0,g=g+Math.imul(Be,le)|0,g=g+Math.imul(se,nt)|0,A=A+Math.imul(se,le)|0,y=y+Math.imul(Pe,Ie)|0,g=g+Math.imul(Pe,ge)|0,g=g+Math.imul(fe,Ie)|0,A=A+Math.imul(fe,ge)|0,y=y+Math.imul(Te,ot)|0,g=g+Math.imul(Te,ye)|0,g=g+Math.imul(oe,ot)|0,A=A+Math.imul(oe,ye)|0,y=y+Math.imul(ze,Ee)|0,g=g+Math.imul(ze,Xe)|0,g=g+Math.imul(he,Ee)|0,A=A+Math.imul(he,Xe)|0;var Ht=(h+y|0)+((g&8191)<<13)|0;h=(A+(g>>>13)|0)+(Ht>>>26)|0,Ht&=67108863,y=Math.imul(We,rt),g=Math.imul(We,ve),g=g+Math.imul(pe,rt)|0,A=Math.imul(pe,ve),y=y+Math.imul(Le,nt)|0,g=g+Math.imul(Le,le)|0,g=g+Math.imul(re,nt)|0,A=A+Math.imul(re,le)|0,y=y+Math.imul(Be,Ie)|0,g=g+Math.imul(Be,ge)|0,g=g+Math.imul(se,Ie)|0,A=A+Math.imul(se,ge)|0,y=y+Math.imul(Pe,ot)|0,g=g+Math.imul(Pe,ye)|0,g=g+Math.imul(fe,ot)|0,A=A+Math.imul(fe,ye)|0,y=y+Math.imul(Te,Ee)|0,g=g+Math.imul(Te,Xe)|0,g=g+Math.imul(oe,Ee)|0,A=A+Math.imul(oe,Xe)|0;var yi=(h+y|0)+((g&8191)<<13)|0;h=(A+(g>>>13)|0)+(yi>>>26)|0,yi&=67108863,y=Math.imul(We,nt),g=Math.imul(We,le),g=g+Math.imul(pe,nt)|0,A=Math.imul(pe,le),y=y+Math.imul(Le,Ie)|0,g=g+Math.imul(Le,ge)|0,g=g+Math.imul(re,Ie)|0,A=A+Math.imul(re,ge)|0,y=y+Math.imul(Be,ot)|0,g=g+Math.imul(Be,ye)|0,g=g+Math.imul(se,ot)|0,A=A+Math.imul(se,ye)|0,y=y+Math.imul(Pe,Ee)|0,g=g+Math.imul(Pe,Xe)|0,g=g+Math.imul(fe,Ee)|0,A=A+Math.imul(fe,Xe)|0;var mi=(h+y|0)+((g&8191)<<13)|0;h=(A+(g>>>13)|0)+(mi>>>26)|0,mi&=67108863,y=Math.imul(We,Ie),g=Math.imul(We,ge),g=g+Math.imul(pe,Ie)|0,A=Math.imul(pe,ge),y=y+Math.imul(Le,ot)|0,g=g+Math.imul(Le,ye)|0,g=g+Math.imul(re,ot)|0,A=A+Math.imul(re,ye)|0,y=y+Math.imul(Be,Ee)|0,g=g+Math.imul(Be,Xe)|0,g=g+Math.imul(se,Ee)|0,A=A+Math.imul(se,Xe)|0;var wi=(h+y|0)+((g&8191)<<13)|0;h=(A+(g>>>13)|0)+(wi>>>26)|0,wi&=67108863,y=Math.imul(We,ot),g=Math.imul(We,ye),g=g+Math.imul(pe,ot)|0,A=Math.imul(pe,ye),y=y+Math.imul(Le,Ee)|0,g=g+Math.imul(Le,Xe)|0,g=g+Math.imul(re,Ee)|0,A=A+Math.imul(re,Xe)|0;var ys=(h+y|0)+((g&8191)<<13)|0;h=(A+(g>>>13)|0)+(ys>>>26)|0,ys&=67108863,y=Math.imul(We,Ee),g=Math.imul(We,Xe),g=g+Math.imul(pe,Ee)|0,A=Math.imul(pe,Xe);var ms=(h+y|0)+((g&8191)<<13)|0;return h=(A+(g>>>13)|0)+(ms>>>26)|0,ms&=67108863,m[0]=ir,m[1]=nr,m[2]=sr,m[3]=or,m[4]=wt,m[5]=ui,m[6]=di,m[7]=li,m[8]=pi,m[9]=bi,m[10]=Mr,m[11]=vi,m[12]=gi,m[13]=Ht,m[14]=yi,m[15]=mi,m[16]=wi,m[17]=ys,m[18]=ms,h!==0&&(m[19]=h,b.length++),b};Math.imul||(B=C);function F(l,a,c){c.negative=a.negative^l.negative,c.length=l.length+a.length;for(var b=0,_=0,x=0;x<c.length-1;x++){var m=_;_=0;for(var h=b&67108863,y=Math.min(x,a.length-1),g=Math.max(0,x-l.length+1);g<=y;g++){var A=x-g,U=l.words[A]|0,E=a.words[g]|0,T=U*E,L=T&67108863;m=m+(T/67108864|0)|0,L=L+h|0,h=L&67108863,m=m+(L>>>26)|0,_+=m>>>26,m&=67108863}c.words[x]=h,b=m,m=_}return b!==0?c.words[x]=b:c.length--,c._strip()}function k(l,a,c){return F(l,a,c)}n.prototype.mulTo=function(a,c){var b,_=this.length+a.length;return this.length===10&&a.length===10?b=B(this,a,c):_<63?b=C(this,a,c):_<1024?b=F(this,a,c):b=k(this,a,c),b},n.prototype.mul=function(a){var c=new n(null);return c.words=new Array(this.length+a.length),this.mulTo(a,c)},n.prototype.mulf=function(a){var c=new n(null);return c.words=new Array(this.length+a.length),k(this,a,c)},n.prototype.imul=function(a){return this.clone().mulTo(a,this)},n.prototype.imuln=function(a){var c=a<0;c&&(a=-a),i(typeof a=="number"),i(a<67108864);for(var b=0,_=0;_<this.length;_++){var x=(this.words[_]|0)*a,m=(x&67108863)+(b&67108863);b>>=26,b+=x/67108864|0,b+=m>>>26,this.words[_]=m&67108863}return b!==0&&(this.words[_]=b,this.length++),c?this.ineg():this},n.prototype.muln=function(a){return this.clone().imuln(a)},n.prototype.sqr=function(){return this.mul(this)},n.prototype.isqr=function(){return this.imul(this.clone())},n.prototype.pow=function(a){var c=N(a);if(c.length===0)return new n(1);for(var b=this,_=0;_<c.length&&c[_]===0;_++,b=b.sqr());if(++_<c.length)for(var x=b.sqr();_<c.length;_++,x=x.sqr())c[_]!==0&&(b=b.mul(x));return b},n.prototype.iushln=function(a){i(typeof a=="number"&&a>=0);var c=a%26,b=(a-c)/26,_=67108863>>>26-c<<26-c,x;if(c!==0){var m=0;for(x=0;x<this.length;x++){var h=this.words[x]&_,y=(this.words[x]|0)-h<<c;this.words[x]=y|m,m=h>>>26-c}m&&(this.words[x]=m,this.length++)}if(b!==0){for(x=this.length-1;x>=0;x--)this.words[x+b]=this.words[x];for(x=0;x<b;x++)this.words[x]=0;this.length+=b}return this._strip()},n.prototype.ishln=function(a){return i(this.negative===0),this.iushln(a)},n.prototype.iushrn=function(a,c,b){i(typeof a=="number"&&a>=0);var _;c?_=(c-c%26)/26:_=0;var x=a%26,m=Math.min((a-x)/26,this.length),h=67108863^67108863>>>x<<x,y=b;if(_-=m,_=Math.max(0,_),y){for(var g=0;g<m;g++)y.words[g]=this.words[g];y.length=m}if(m!==0)if(this.length>m)for(this.length-=m,g=0;g<this.length;g++)this.words[g]=this.words[g+m];else this.words[0]=0,this.length=1;var A=0;for(g=this.length-1;g>=0&&(A!==0||g>=_);g--){var U=this.words[g]|0;this.words[g]=A<<26-x|U>>>x,A=U&h}return y&&A!==0&&(y.words[y.length++]=A),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},n.prototype.ishrn=function(a,c,b){return i(this.negative===0),this.iushrn(a,c,b)},n.prototype.shln=function(a){return this.clone().ishln(a)},n.prototype.ushln=function(a){return this.clone().iushln(a)},n.prototype.shrn=function(a){return this.clone().ishrn(a)},n.prototype.ushrn=function(a){return this.clone().iushrn(a)},n.prototype.testn=function(a){i(typeof a=="number"&&a>=0);var c=a%26,b=(a-c)/26,_=1<<c;if(this.length<=b)return!1;var x=this.words[b];return!!(x&_)},n.prototype.imaskn=function(a){i(typeof a=="number"&&a>=0);var c=a%26,b=(a-c)/26;if(i(this.negative===0,"imaskn works only with positive numbers"),this.length<=b)return this;if(c!==0&&b++,this.length=Math.min(b,this.length),c!==0){var _=67108863^67108863>>>c<<c;this.words[this.length-1]&=_}return this._strip()},n.prototype.maskn=function(a){return this.clone().imaskn(a)},n.prototype.iaddn=function(a){return i(typeof a=="number"),i(a<67108864),a<0?this.isubn(-a):this.negative!==0?this.length===1&&(this.words[0]|0)<=a?(this.words[0]=a-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(a),this.negative=1,this):this._iaddn(a)},n.prototype._iaddn=function(a){this.words[0]+=a;for(var c=0;c<this.length&&this.words[c]>=67108864;c++)this.words[c]-=67108864,c===this.length-1?this.words[c+1]=1:this.words[c+1]++;return this.length=Math.max(this.length,c+1),this},n.prototype.isubn=function(a){if(i(typeof a=="number"),i(a<67108864),a<0)return this.iaddn(-a);if(this.negative!==0)return this.negative=0,this.iaddn(a),this.negative=1,this;if(this.words[0]-=a,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var c=0;c<this.length&&this.words[c]<0;c++)this.words[c]+=67108864,this.words[c+1]-=1;return this._strip()},n.prototype.addn=function(a){return this.clone().iaddn(a)},n.prototype.subn=function(a){return this.clone().isubn(a)},n.prototype.iabs=function(){return this.negative=0,this},n.prototype.abs=function(){return this.clone().iabs()},n.prototype._ishlnsubmul=function(a,c,b){var _=a.length+b,x;this._expand(_);var m,h=0;for(x=0;x<a.length;x++){m=(this.words[x+b]|0)+h;var y=(a.words[x]|0)*c;m-=y&67108863,h=(m>>26)-(y/67108864|0),this.words[x+b]=m&67108863}for(;x<this.length-b;x++)m=(this.words[x+b]|0)+h,h=m>>26,this.words[x+b]=m&67108863;if(h===0)return this._strip();for(i(h===-1),h=0,x=0;x<this.length;x++)m=-(this.words[x]|0)+h,h=m>>26,this.words[x]=m&67108863;return this.negative=1,this._strip()},n.prototype._wordDiv=function(a,c){var b=this.length-a.length,_=this.clone(),x=a,m=x.words[x.length-1]|0,h=this._countBits(m);b=26-h,b!==0&&(x=x.ushln(b),_.iushln(b),m=x.words[x.length-1]|0);var y=_.length-x.length,g;if(c!=="mod"){g=new n(null),g.length=y+1,g.words=new Array(g.length);for(var A=0;A<g.length;A++)g.words[A]=0}var U=_.clone()._ishlnsubmul(x,1,y);U.negative===0&&(_=U,g&&(g.words[y]=1));for(var E=y-1;E>=0;E--){var T=(_.words[x.length+E]|0)*67108864+(_.words[x.length+E-1]|0);for(T=Math.min(T/m|0,67108863),_._ishlnsubmul(x,T,E);_.negative!==0;)T--,_.negative=0,_._ishlnsubmul(x,1,E),_.isZero()||(_.negative^=1);g&&(g.words[E]=T)}return g&&g._strip(),_._strip(),c!=="div"&&b!==0&&_.iushrn(b),{div:g||null,mod:_}},n.prototype.divmod=function(a,c,b){if(i(!a.isZero()),this.isZero())return{div:new n(0),mod:new n(0)};var _,x,m;return this.negative!==0&&a.negative===0?(m=this.neg().divmod(a,c),c!=="mod"&&(_=m.div.neg()),c!=="div"&&(x=m.mod.neg(),b&&x.negative!==0&&x.iadd(a)),{div:_,mod:x}):this.negative===0&&a.negative!==0?(m=this.divmod(a.neg(),c),c!=="mod"&&(_=m.div.neg()),{div:_,mod:m.mod}):(this.negative&a.negative)!==0?(m=this.neg().divmod(a.neg(),c),c!=="div"&&(x=m.mod.neg(),b&&x.negative!==0&&x.isub(a)),{div:m.div,mod:x}):a.length>this.length||this.cmp(a)<0?{div:new n(0),mod:this}:a.length===1?c==="div"?{div:this.divn(a.words[0]),mod:null}:c==="mod"?{div:null,mod:new n(this.modrn(a.words[0]))}:{div:this.divn(a.words[0]),mod:new n(this.modrn(a.words[0]))}:this._wordDiv(a,c)},n.prototype.div=function(a){return this.divmod(a,"div",!1).div},n.prototype.mod=function(a){return this.divmod(a,"mod",!1).mod},n.prototype.umod=function(a){return this.divmod(a,"mod",!0).mod},n.prototype.divRound=function(a){var c=this.divmod(a);if(c.mod.isZero())return c.div;var b=c.div.negative!==0?c.mod.isub(a):c.mod,_=a.ushrn(1),x=a.andln(1),m=b.cmp(_);return m<0||x===1&&m===0?c.div:c.div.negative!==0?c.div.isubn(1):c.div.iaddn(1)},n.prototype.modrn=function(a){var c=a<0;c&&(a=-a),i(a<=67108863);for(var b=(1<<26)%a,_=0,x=this.length-1;x>=0;x--)_=(b*_+(this.words[x]|0))%a;return c?-_:_},n.prototype.modn=function(a){return this.modrn(a)},n.prototype.idivn=function(a){var c=a<0;c&&(a=-a),i(a<=67108863);for(var b=0,_=this.length-1;_>=0;_--){var x=(this.words[_]|0)+b*67108864;this.words[_]=x/a|0,b=x%a}return this._strip(),c?this.ineg():this},n.prototype.divn=function(a){return this.clone().idivn(a)},n.prototype.egcd=function(a){i(a.negative===0),i(!a.isZero());var c=this,b=a.clone();c.negative!==0?c=c.umod(a):c=c.clone();for(var _=new n(1),x=new n(0),m=new n(0),h=new n(1),y=0;c.isEven()&&b.isEven();)c.iushrn(1),b.iushrn(1),++y;for(var g=b.clone(),A=c.clone();!c.isZero();){for(var U=0,E=1;(c.words[0]&E)===0&&U<26;++U,E<<=1);if(U>0)for(c.iushrn(U);U-- >0;)(_.isOdd()||x.isOdd())&&(_.iadd(g),x.isub(A)),_.iushrn(1),x.iushrn(1);for(var T=0,L=1;(b.words[0]&L)===0&&T<26;++T,L<<=1);if(T>0)for(b.iushrn(T);T-- >0;)(m.isOdd()||h.isOdd())&&(m.iadd(g),h.isub(A)),m.iushrn(1),h.iushrn(1);c.cmp(b)>=0?(c.isub(b),_.isub(m),x.isub(h)):(b.isub(c),m.isub(_),h.isub(x))}return{a:m,b:h,gcd:b.iushln(y)}},n.prototype._invmp=function(a){i(a.negative===0),i(!a.isZero());var c=this,b=a.clone();c.negative!==0?c=c.umod(a):c=c.clone();for(var _=new n(1),x=new n(0),m=b.clone();c.cmpn(1)>0&&b.cmpn(1)>0;){for(var h=0,y=1;(c.words[0]&y)===0&&h<26;++h,y<<=1);if(h>0)for(c.iushrn(h);h-- >0;)_.isOdd()&&_.iadd(m),_.iushrn(1);for(var g=0,A=1;(b.words[0]&A)===0&&g<26;++g,A<<=1);if(g>0)for(b.iushrn(g);g-- >0;)x.isOdd()&&x.iadd(m),x.iushrn(1);c.cmp(b)>=0?(c.isub(b),_.isub(x)):(b.isub(c),x.isub(_))}var U;return c.cmpn(1)===0?U=_:U=x,U.cmpn(0)<0&&U.iadd(a),U},n.prototype.gcd=function(a){if(this.isZero())return a.abs();if(a.isZero())return this.abs();var c=this.clone(),b=a.clone();c.negative=0,b.negative=0;for(var _=0;c.isEven()&&b.isEven();_++)c.iushrn(1),b.iushrn(1);do{for(;c.isEven();)c.iushrn(1);for(;b.isEven();)b.iushrn(1);var x=c.cmp(b);if(x<0){var m=c;c=b,b=m}else if(x===0||b.cmpn(1)===0)break;c.isub(b)}while(!0);return b.iushln(_)},n.prototype.invm=function(a){return this.egcd(a).a.umod(a)},n.prototype.isEven=function(){return(this.words[0]&1)===0},n.prototype.isOdd=function(){return(this.words[0]&1)===1},n.prototype.andln=function(a){return this.words[0]&a},n.prototype.bincn=function(a){i(typeof a=="number");var c=a%26,b=(a-c)/26,_=1<<c;if(this.length<=b)return this._expand(b+1),this.words[b]|=_,this;for(var x=_,m=b;x!==0&&m<this.length;m++){var h=this.words[m]|0;h+=x,x=h>>>26,h&=67108863,this.words[m]=h}return x!==0&&(this.words[m]=x,this.length++),this},n.prototype.isZero=function(){return this.length===1&&this.words[0]===0},n.prototype.cmpn=function(a){var c=a<0;if(this.negative!==0&&!c)return-1;if(this.negative===0&&c)return 1;this._strip();var b;if(this.length>1)b=1;else{c&&(a=-a),i(a<=67108863,"Number is too big");var _=this.words[0]|0;b=_===a?0:_<a?-1:1}return this.negative!==0?-b|0:b},n.prototype.cmp=function(a){if(this.negative!==0&&a.negative===0)return-1;if(this.negative===0&&a.negative!==0)return 1;var c=this.ucmp(a);return this.negative!==0?-c|0:c},n.prototype.ucmp=function(a){if(this.length>a.length)return 1;if(this.length<a.length)return-1;for(var c=0,b=this.length-1;b>=0;b--){var _=this.words[b]|0,x=a.words[b]|0;if(_!==x){_<x?c=-1:_>x&&(c=1);break}}return c},n.prototype.gtn=function(a){return this.cmpn(a)===1},n.prototype.gt=function(a){return this.cmp(a)===1},n.prototype.gten=function(a){return this.cmpn(a)>=0},n.prototype.gte=function(a){return this.cmp(a)>=0},n.prototype.ltn=function(a){return this.cmpn(a)===-1},n.prototype.lt=function(a){return this.cmp(a)===-1},n.prototype.lten=function(a){return this.cmpn(a)<=0},n.prototype.lte=function(a){return this.cmp(a)<=0},n.prototype.eqn=function(a){return this.cmpn(a)===0},n.prototype.eq=function(a){return this.cmp(a)===0},n.red=function(a){return new D(a)},n.prototype.toRed=function(a){return i(!this.red,"Already a number in reduction context"),i(this.negative===0,"red works only with positives"),a.convertTo(this)._forceRed(a)},n.prototype.fromRed=function(){return i(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},n.prototype._forceRed=function(a){return this.red=a,this},n.prototype.forceRed=function(a){return i(!this.red,"Already a number in reduction context"),this._forceRed(a)},n.prototype.redAdd=function(a){return i(this.red,"redAdd works only with red numbers"),this.red.add(this,a)},n.prototype.redIAdd=function(a){return i(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,a)},n.prototype.redSub=function(a){return i(this.red,"redSub works only with red numbers"),this.red.sub(this,a)},n.prototype.redISub=function(a){return i(this.red,"redISub works only with red numbers"),this.red.isub(this,a)},n.prototype.redShl=function(a){return i(this.red,"redShl works only with red numbers"),this.red.shl(this,a)},n.prototype.redMul=function(a){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.mul(this,a)},n.prototype.redIMul=function(a){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.imul(this,a)},n.prototype.redSqr=function(){return i(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},n.prototype.redISqr=function(){return i(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},n.prototype.redSqrt=function(){return i(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},n.prototype.redInvm=function(){return i(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},n.prototype.redNeg=function(){return i(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},n.prototype.redPow=function(a){return i(this.red&&!a.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,a)};var V={k256:null,p224:null,p192:null,p25519:null};function H(l,a){this.name=l,this.p=new n(a,16),this.n=this.p.bitLength(),this.k=new n(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}H.prototype._tmp=function(){var a=new n(null);return a.words=new Array(Math.ceil(this.n/13)),a},H.prototype.ireduce=function(a){var c=a,b;do this.split(c,this.tmp),c=this.imulK(c),c=c.iadd(this.tmp),b=c.bitLength();while(b>this.n);var _=b<this.n?-1:c.ucmp(this.p);return _===0?(c.words[0]=0,c.length=1):_>0?c.isub(this.p):c.strip!==void 0?c.strip():c._strip(),c},H.prototype.split=function(a,c){a.iushrn(this.n,0,c)},H.prototype.imulK=function(a){return a.imul(this.k)};function G(){H.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}s(G,H),G.prototype.split=function(a,c){for(var b=4194303,_=Math.min(a.length,9),x=0;x<_;x++)c.words[x]=a.words[x];if(c.length=_,a.length<=9){a.words[0]=0,a.length=1;return}var m=a.words[9];for(c.words[c.length++]=m&b,x=10;x<a.length;x++){var h=a.words[x]|0;a.words[x-10]=(h&b)<<4|m>>>22,m=h}m>>>=22,a.words[x-10]=m,m===0&&a.length>10?a.length-=10:a.length-=9},G.prototype.imulK=function(a){a.words[a.length]=0,a.words[a.length+1]=0,a.length+=2;for(var c=0,b=0;b<a.length;b++){var _=a.words[b]|0;c+=_*977,a.words[b]=c&67108863,c=_*64+(c/67108864|0)}return a.words[a.length-1]===0&&(a.length--,a.words[a.length-1]===0&&a.length--),a};function J(){H.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}s(J,H);function j(){H.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}s(j,H);function te(){H.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}s(te,H),te.prototype.imulK=function(a){for(var c=0,b=0;b<a.length;b++){var _=(a.words[b]|0)*19+c,x=_&67108863;_>>>=26,a.words[b]=x,c=_}return c!==0&&(a.words[a.length++]=c),a},n._prime=function(a){if(V[a])return V[a];var c;if(a==="k256")c=new G;else if(a==="p224")c=new J;else if(a==="p192")c=new j;else if(a==="p25519")c=new te;else throw new Error("Unknown prime "+a);return V[a]=c,c};function D(l){if(typeof l=="string"){var a=n._prime(l);this.m=a.p,this.prime=a}else i(l.gtn(1),"modulus must be greater than 1"),this.m=l,this.prime=null}D.prototype._verify1=function(a){i(a.negative===0,"red works only with positives"),i(a.red,"red works only with red numbers")},D.prototype._verify2=function(a,c){i((a.negative|c.negative)===0,"red works only with positives"),i(a.red&&a.red===c.red,"red works only with red numbers")},D.prototype.imod=function(a){return this.prime?this.prime.ireduce(a)._forceRed(this):(v(a,a.umod(this.m)._forceRed(this)),a)},D.prototype.neg=function(a){return a.isZero()?a.clone():this.m.sub(a)._forceRed(this)},D.prototype.add=function(a,c){this._verify2(a,c);var b=a.add(c);return b.cmp(this.m)>=0&&b.isub(this.m),b._forceRed(this)},D.prototype.iadd=function(a,c){this._verify2(a,c);var b=a.iadd(c);return b.cmp(this.m)>=0&&b.isub(this.m),b},D.prototype.sub=function(a,c){this._verify2(a,c);var b=a.sub(c);return b.cmpn(0)<0&&b.iadd(this.m),b._forceRed(this)},D.prototype.isub=function(a,c){this._verify2(a,c);var b=a.isub(c);return b.cmpn(0)<0&&b.iadd(this.m),b},D.prototype.shl=function(a,c){return this._verify1(a),this.imod(a.ushln(c))},D.prototype.imul=function(a,c){return this._verify2(a,c),this.imod(a.imul(c))},D.prototype.mul=function(a,c){return this._verify2(a,c),this.imod(a.mul(c))},D.prototype.isqr=function(a){return this.imul(a,a.clone())},D.prototype.sqr=function(a){return this.mul(a,a)},D.prototype.sqrt=function(a){if(a.isZero())return a.clone();var c=this.m.andln(3);if(i(c%2===1),c===3){var b=this.m.add(new n(1)).iushrn(2);return this.pow(a,b)}for(var _=this.m.subn(1),x=0;!_.isZero()&&_.andln(1)===0;)x++,_.iushrn(1);i(!_.isZero());var m=new n(1).toRed(this),h=m.redNeg(),y=this.m.subn(1).iushrn(1),g=this.m.bitLength();for(g=new n(2*g*g).toRed(this);this.pow(g,y).cmp(h)!==0;)g.redIAdd(h);for(var A=this.pow(g,_),U=this.pow(a,_.addn(1).iushrn(1)),E=this.pow(a,_),T=x;E.cmp(m)!==0;){for(var L=E,$=0;L.cmp(m)!==0;$++)L=L.redSqr();i($<T);var z=this.pow(A,new n(1).iushln(T-$-1));U=U.redMul(z),A=z.redSqr(),E=E.redMul(A),T=$}return U},D.prototype.invm=function(a){var c=a._invmp(this.m);return c.negative!==0?(c.negative=0,this.imod(c).redNeg()):this.imod(c)},D.prototype.pow=function(a,c){if(c.isZero())return new n(1).toRed(this);if(c.cmpn(1)===0)return a.clone();var b=4,_=new Array(1<<b);_[0]=new n(1).toRed(this),_[1]=a;for(var x=2;x<_.length;x++)_[x]=this.mul(_[x-1],a);var m=_[0],h=0,y=0,g=c.bitLength()%26;for(g===0&&(g=26),x=c.length-1;x>=0;x--){for(var A=c.words[x],U=g-1;U>=0;U--){var E=A>>U&1;if(m!==_[0]&&(m=this.sqr(m)),E===0&&h===0){y=0;continue}h<<=1,h|=E,y++,!(y!==b&&(x!==0||U!==0))&&(m=this.mul(m,_[h]),y=0,h=0)}g=26}return m},D.prototype.convertTo=function(a){var c=a.umod(this.m);return c===a?c.clone():c},D.prototype.convertFrom=function(a){var c=a.clone();return c.red=null,c},n.mont=function(a){return new p(a)};function p(l){D.call(this,l),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new n(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}s(p,D),p.prototype.convertTo=function(a){return this.imod(a.ushln(this.shift))},p.prototype.convertFrom=function(a){var c=this.imod(a.mul(this.rinv));return c.red=null,c},p.prototype.imul=function(a,c){if(a.isZero()||c.isZero())return a.words[0]=0,a.length=1,a;var b=a.imul(c),_=b.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),x=b.isub(_).iushrn(this.shift),m=x;return x.cmp(this.m)>=0?m=x.isub(this.m):x.cmpn(0)<0&&(m=x.iadd(this.m)),m._forceRed(this)},p.prototype.mul=function(a,c){if(a.isZero()||c.isZero())return new n(0)._forceRed(this);var b=a.mul(c),_=b.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),x=b.isub(_).iushrn(this.shift),m=x;return x.cmp(this.m)>=0?m=x.isub(this.m):x.cmpn(0)<0&&(m=x.iadd(this.m)),m._forceRed(this)},p.prototype.invm=function(a){var c=this.imod(a._invmp(this.m).mul(this.r2));return c._forceRed(this)}})(t,Rt)})(Pu);var me=Pu.exports;const Cu="bignumber/5.7.0";var Ta=me.BN;const ii=new xe(Cu),Na={},Bu=9007199254740991;function x3(t){return t!=null&&(bt.isBigNumber(t)||typeof t=="number"&&t%1===0||typeof t=="string"&&!!t.match(/^-?[0-9]+$/)||bn(t)||typeof t=="bigint"||Xn(t))}let Lu=!1;class bt{constructor(e,r){e!==Na&&ii.throwError("cannot call constructor directly; use BigNumber.from",xe.errors.UNSUPPORTED_OPERATION,{operation:"new (BigNumber)"}),this._hex=r,this._isBigNumber=!0,Object.freeze(this)}fromTwos(e){return Qt(Se(this).fromTwos(e))}toTwos(e){return Qt(Se(this).toTwos(e))}abs(){return this._hex[0]==="-"?bt.from(this._hex.substring(1)):this}add(e){return Qt(Se(this).add(Se(e)))}sub(e){return Qt(Se(this).sub(Se(e)))}div(e){return bt.from(e).isZero()&&yr("division-by-zero","div"),Qt(Se(this).div(Se(e)))}mul(e){return Qt(Se(this).mul(Se(e)))}mod(e){const r=Se(e);return r.isNeg()&&yr("division-by-zero","mod"),Qt(Se(this).umod(r))}pow(e){const r=Se(e);return r.isNeg()&&yr("negative-power","pow"),Qt(Se(this).pow(r))}and(e){const r=Se(e);return(this.isNegative()||r.isNeg())&&yr("unbound-bitwise-result","and"),Qt(Se(this).and(r))}or(e){const r=Se(e);return(this.isNegative()||r.isNeg())&&yr("unbound-bitwise-result","or"),Qt(Se(this).or(r))}xor(e){const r=Se(e);return(this.isNegative()||r.isNeg())&&yr("unbound-bitwise-result","xor"),Qt(Se(this).xor(r))}mask(e){return(this.isNegative()||e<0)&&yr("negative-width","mask"),Qt(Se(this).maskn(e))}shl(e){return(this.isNegative()||e<0)&&yr("negative-width","shl"),Qt(Se(this).shln(e))}shr(e){return(this.isNegative()||e<0)&&yr("negative-width","shr"),Qt(Se(this).shrn(e))}eq(e){return Se(this).eq(Se(e))}lt(e){return Se(this).lt(Se(e))}lte(e){return Se(this).lte(Se(e))}gt(e){return Se(this).gt(Se(e))}gte(e){return Se(this).gte(Se(e))}isNegative(){return this._hex[0]==="-"}isZero(){return Se(this).isZero()}toNumber(){try{return Se(this).toNumber()}catch{yr("overflow","toNumber",this.toString())}return null}toBigInt(){try{return BigInt(this.toString())}catch{}return ii.throwError("this platform does not support BigInt",xe.errors.UNSUPPORTED_OPERATION,{value:this.toString()})}toString(){return arguments.length>0&&(arguments[0]===10?Lu||(Lu=!0,ii.warn("BigNumber.toString does not accept any parameters; base-10 is assumed")):arguments[0]===16?ii.throwError("BigNumber.toString does not accept any parameters; use bigNumber.toHexString()",xe.errors.UNEXPECTED_ARGUMENT,{}):ii.throwError("BigNumber.toString does not accept parameters",xe.errors.UNEXPECTED_ARGUMENT,{})),Se(this).toString(10)}toHexString(){return this._hex}toJSON(e){return{type:"BigNumber",hex:this.toHexString()}}static from(e){if(e instanceof bt)return e;if(typeof e=="string")return e.match(/^-?0x[0-9a-f]+$/i)?new bt(Na,Zn(e)):e.match(/^-?[0-9]+$/)?new bt(Na,Zn(new Ta(e))):ii.throwArgumentError("invalid BigNumber string","value",e);if(typeof e=="number")return e%1&&yr("underflow","BigNumber.from",e),(e>=Bu||e<=-Bu)&&yr("overflow","BigNumber.from",e),bt.from(String(e));const r=e;if(typeof r=="bigint")return bt.from(r.toString());if(Xn(r))return bt.from(Tu(r));if(r)if(r.toHexString){const i=r.toHexString();if(typeof i=="string")return bt.from(i)}else{let i=r._hex;if(i==null&&r.type==="BigNumber"&&(i=r.hex),typeof i=="string"&&(bn(i)||i[0]==="-"&&bn(i.substring(1))))return bt.from(i)}return ii.throwArgumentError("invalid BigNumber value","value",e)}static isBigNumber(e){return!!(e&&e._isBigNumber)}}function Zn(t){if(typeof t!="string")return Zn(t.toString(16));if(t[0]==="-")return t=t.substring(1),t[0]==="-"&&ii.throwArgumentError("invalid hex","value",t),t=Zn(t),t==="0x00"?t:"-"+t;if(t.substring(0,2)!=="0x"&&(t="0x"+t),t==="0x")return"0x00";for(t.length%2&&(t="0x0"+t.substring(2));t.length>4&&t.substring(0,4)==="0x00";)t="0x"+t.substring(4);return t}function Qt(t){return bt.from(Zn(t))}function Se(t){const e=bt.from(t).toHexString();return e[0]==="-"?new Ta("-"+e.substring(3),16):new Ta(e.substring(2),16)}function yr(t,e,r){const i={fault:t,operation:e};return r!=null&&(i.value=r),ii.throwError(t,xe.errors.NUMERIC_FAULT,i)}const Wt=new xe(Cu),Qn={},Fu=bt.from(0),$u=bt.from(-1);function Uu(t,e,r,i){const s={fault:e,operation:r};return i!==void 0&&(s.value=i),Wt.throwError(t,xe.errors.NUMERIC_FAULT,s)}let es="0";for(;es.length<256;)es+=es;function Pa(t){if(typeof t!="number")try{t=bt.from(t).toNumber()}catch{}return typeof t=="number"&&t>=0&&t<=256&&!(t%1)?"1"+es.substring(0,t):Wt.throwArgumentError("invalid decimal size","decimals",t)}function Ca(t,e){e==null&&(e=0);const r=Pa(e);t=bt.from(t);const i=t.lt(Fu);i&&(t=t.mul($u));let s=t.mod(r).toString();for(;s.length<r.length-1;)s="0"+s;s=s.match(/^([0-9]*[1-9]|0)(0*)/)[1];const n=t.div(r).toString();return r.length===1?t=n:t=n+"."+s,i&&(t="-"+t),t}function ni(t,e){e==null&&(e=0);const r=Pa(e);(typeof t!="string"||!t.match(/^-?[0-9.]+$/))&&Wt.throwArgumentError("invalid decimal value","value",t);const i=t.substring(0,1)==="-";i&&(t=t.substring(1)),t==="."&&Wt.throwArgumentError("missing value","value",t);const s=t.split(".");s.length>2&&Wt.throwArgumentError("too many decimal points","value",t);let n=s[0],o=s[1];for(n||(n="0"),o||(o="0");o[o.length-1]==="0";)o=o.substring(0,o.length-1);for(o.length>r.length-1&&Uu("fractional component exceeds decimals","underflow","parseFixed"),o===""&&(o="0");o.length<r.length-1;)o+="0";const f=bt.from(n),d=bt.from(o);let u=f.mul(r).add(d);return i&&(u=u.mul($u)),u}class vn{constructor(e,r,i,s){e!==Qn&&Wt.throwError("cannot use FixedFormat constructor; use FixedFormat.from",xe.errors.UNSUPPORTED_OPERATION,{operation:"new FixedFormat"}),this.signed=r,this.width=i,this.decimals=s,this.name=(r?"":"u")+"fixed"+String(i)+"x"+String(s),this._multiplier=Pa(s),Object.freeze(this)}static from(e){if(e instanceof vn)return e;typeof e=="number"&&(e=`fixed128x${e}`);let r=!0,i=128,s=18;if(typeof e=="string"){if(e!=="fixed")if(e==="ufixed")r=!1;else{const n=e.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);n||Wt.throwArgumentError("invalid fixed format","format",e),r=n[1]!=="u",i=parseInt(n[2]),s=parseInt(n[3])}}else if(e){const n=(o,f,d)=>e[o]==null?d:(typeof e[o]!==f&&Wt.throwArgumentError("invalid fixed format ("+o+" not "+f+")","format."+o,e[o]),e[o]);r=n("signed","boolean",r),i=n("width","number",i),s=n("decimals","number",s)}return i%8&&Wt.throwArgumentError("invalid fixed format width (not byte aligned)","format.width",i),s>80&&Wt.throwArgumentError("invalid fixed format (decimals too large)","format.decimals",s),new vn(Qn,r,i,s)}}class Ct{constructor(e,r,i,s){e!==Qn&&Wt.throwError("cannot use FixedNumber constructor; use FixedNumber.from",xe.errors.UNSUPPORTED_OPERATION,{operation:"new FixedFormat"}),this.format=s,this._hex=r,this._value=i,this._isFixedNumber=!0,Object.freeze(this)}_checkFormat(e){this.format.name!==e.format.name&&Wt.throwArgumentError("incompatible format; use fixedNumber.toFormat","other",e)}addUnsafe(e){this._checkFormat(e);const r=ni(this._value,this.format.decimals),i=ni(e._value,e.format.decimals);return Ct.fromValue(r.add(i),this.format.decimals,this.format)}subUnsafe(e){this._checkFormat(e);const r=ni(this._value,this.format.decimals),i=ni(e._value,e.format.decimals);return Ct.fromValue(r.sub(i),this.format.decimals,this.format)}mulUnsafe(e){this._checkFormat(e);const r=ni(this._value,this.format.decimals),i=ni(e._value,e.format.decimals);return Ct.fromValue(r.mul(i).div(this.format._multiplier),this.format.decimals,this.format)}divUnsafe(e){this._checkFormat(e);const r=ni(this._value,this.format.decimals),i=ni(e._value,e.format.decimals);return Ct.fromValue(r.mul(this.format._multiplier).div(i),this.format.decimals,this.format)}floor(){const e=this.toString().split(".");e.length===1&&e.push("0");let r=Ct.from(e[0],this.format);const i=!e[1].match(/^(0*)$/);return this.isNegative()&&i&&(r=r.subUnsafe(zu.toFormat(r.format))),r}ceiling(){const e=this.toString().split(".");e.length===1&&e.push("0");let r=Ct.from(e[0],this.format);const i=!e[1].match(/^(0*)$/);return!this.isNegative()&&i&&(r=r.addUnsafe(zu.toFormat(r.format))),r}round(e){e==null&&(e=0);const r=this.toString().split(".");if(r.length===1&&r.push("0"),(e<0||e>80||e%1)&&Wt.throwArgumentError("invalid decimal count","decimals",e),r[1].length<=e)return this;const i=Ct.from("1"+es.substring(0,e),this.format),s=S3.toFormat(this.format);return this.mulUnsafe(i).addUnsafe(s).floor().divUnsafe(i)}isZero(){return this._value==="0.0"||this._value==="0"}isNegative(){return this._value[0]==="-"}toString(){return this._value}toHexString(e){if(e==null)return this._hex;e%8&&Wt.throwArgumentError("invalid byte width","width",e);const r=bt.from(this._hex).fromTwos(this.format.width).toTwos(e).toHexString();return Nu(r,e/8)}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(e){return Ct.fromString(this._value,e)}static fromValue(e,r,i){return i==null&&r!=null&&!x3(r)&&(i=r,r=null),r==null&&(r=0),i==null&&(i="fixed"),Ct.fromString(Ca(e,r),vn.from(i))}static fromString(e,r){r==null&&(r="fixed");const i=vn.from(r),s=ni(e,i.decimals);!i.signed&&s.lt(Fu)&&Uu("unsigned value cannot be negative","overflow","value",e);let n=null;i.signed?n=s.toTwos(i.width).toHexString():(n=s.toHexString(),n=Nu(n,i.width/8));const o=Ca(s,i.decimals);return new Ct(Qn,n,o,i)}static fromBytes(e,r){r==null&&(r="fixed");const i=vn.from(r);if(w3(e).length>i.width/8)throw new Error("overflow");let s=bt.from(e);i.signed&&(s=s.fromTwos(i.width));const n=s.toTwos((i.signed?0:1)+i.width).toHexString(),o=Ca(s,i.decimals);return new Ct(Qn,n,o,i)}static from(e,r){if(typeof e=="string")return Ct.fromString(e,r);if(Xn(e))return Ct.fromBytes(e,r);try{return Ct.fromValue(e,0,r)}catch(i){if(i.code!==xe.errors.INVALID_ARGUMENT)throw i}return Wt.throwArgumentError("invalid FixedNumber value","value",e)}static isFixedNumber(e){return!!(e&&e._isFixedNumber)}}const zu=Ct.from(1),S3=Ct.from("0.5");var M3={exports:{}};/**
 * [js-sha3]{@link https://github.com/emn178/js-sha3}
 *
 * @version 0.8.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2015-2018
 * @license MIT
 */(function(t){(function(){var e="input is invalid type",r="finalize already called",i=typeof window=="object",s=i?window:{};s.JS_SHA3_NO_WINDOW&&(i=!1);var n=!i&&typeof self=="object",o=!s.JS_SHA3_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;o?s=Rt:n&&(s=self);var f=!s.JS_SHA3_NO_COMMON_JS&&!0&&t.exports,d=!s.JS_SHA3_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",u="0123456789abcdef".split(""),v=[31,7936,2031616,520093696],w=[4,1024,262144,67108864],S=[1,256,65536,16777216],I=[6,1536,393216,100663296],M=[0,8,16,24],R=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],N=[224,256,384,512],C=[128,256],B=["hex","buffer","arrayBuffer","array","digest"],F={128:168,256:136};(s.JS_SHA3_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(E){return Object.prototype.toString.call(E)==="[object Array]"}),d&&(s.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(E){return typeof E=="object"&&E.buffer&&E.buffer.constructor===ArrayBuffer});for(var k=function(E,T,L){return function($){return new g(E,T,E).update($)[L]()}},V=function(E,T,L){return function($,z){return new g(E,T,z).update($)[L]()}},H=function(E,T,L){return function($,z,W,X){return a["cshake"+E].update($,z,W,X)[L]()}},G=function(E,T,L){return function($,z,W,X){return a["kmac"+E].update($,z,W,X)[L]()}},J=function(E,T,L,$){for(var z=0;z<B.length;++z){var W=B[z];E[W]=T(L,$,W)}return E},j=function(E,T){var L=k(E,T,"hex");return L.create=function(){return new g(E,T,E)},L.update=function($){return L.create().update($)},J(L,k,E,T)},te=function(E,T){var L=V(E,T,"hex");return L.create=function($){return new g(E,T,$)},L.update=function($,z){return L.create(z).update($)},J(L,V,E,T)},D=function(E,T){var L=F[E],$=H(E,T,"hex");return $.create=function(z,W,X){return!W&&!X?a["shake"+E].create(z):new g(E,T,z).bytepad([W,X],L)},$.update=function(z,W,X,K){return $.create(W,X,K).update(z)},J($,H,E,T)},p=function(E,T){var L=F[E],$=G(E,T,"hex");return $.create=function(z,W,X){return new A(E,T,W).bytepad(["KMAC",X],L).bytepad([z],L)},$.update=function(z,W,X,K){return $.create(z,X,K).update(W)},J($,G,E,T)},l=[{name:"keccak",padding:S,bits:N,createMethod:j},{name:"sha3",padding:I,bits:N,createMethod:j},{name:"shake",padding:v,bits:C,createMethod:te},{name:"cshake",padding:w,bits:C,createMethod:D},{name:"kmac",padding:w,bits:C,createMethod:p}],a={},c=[],b=0;b<l.length;++b)for(var _=l[b],x=_.bits,m=0;m<x.length;++m){var h=_.name+"_"+x[m];if(c.push(h),a[h]=_.createMethod(x[m],_.padding),_.name!=="sha3"){var y=_.name+x[m];c.push(y),a[y]=a[h]}}function g(E,T,L){this.blocks=[],this.s=[],this.padding=T,this.outputBits=L,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(E<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=L>>5,this.extraBytes=(L&31)>>3;for(var $=0;$<50;++$)this.s[$]=0}g.prototype.update=function(E){if(this.finalized)throw new Error(r);var T,L=typeof E;if(L!=="string"){if(L==="object"){if(E===null)throw new Error(e);if(d&&E.constructor===ArrayBuffer)E=new Uint8Array(E);else if(!Array.isArray(E)&&(!d||!ArrayBuffer.isView(E)))throw new Error(e)}else throw new Error(e);T=!0}for(var $=this.blocks,z=this.byteCount,W=E.length,X=this.blockCount,K=0,ce=this.s,Z,Q;K<W;){if(this.reset)for(this.reset=!1,$[0]=this.block,Z=1;Z<X+1;++Z)$[Z]=0;if(T)for(Z=this.start;K<W&&Z<z;++K)$[Z>>2]|=E[K]<<M[Z++&3];else for(Z=this.start;K<W&&Z<z;++K)Q=E.charCodeAt(K),Q<128?$[Z>>2]|=Q<<M[Z++&3]:Q<2048?($[Z>>2]|=(192|Q>>6)<<M[Z++&3],$[Z>>2]|=(128|Q&63)<<M[Z++&3]):Q<55296||Q>=57344?($[Z>>2]|=(224|Q>>12)<<M[Z++&3],$[Z>>2]|=(128|Q>>6&63)<<M[Z++&3],$[Z>>2]|=(128|Q&63)<<M[Z++&3]):(Q=65536+((Q&1023)<<10|E.charCodeAt(++K)&1023),$[Z>>2]|=(240|Q>>18)<<M[Z++&3],$[Z>>2]|=(128|Q>>12&63)<<M[Z++&3],$[Z>>2]|=(128|Q>>6&63)<<M[Z++&3],$[Z>>2]|=(128|Q&63)<<M[Z++&3]);if(this.lastByteIndex=Z,Z>=z){for(this.start=Z-z,this.block=$[X],Z=0;Z<X;++Z)ce[Z]^=$[Z];U(ce),this.reset=!0}else this.start=Z}return this},g.prototype.encode=function(E,T){var L=E&255,$=1,z=[L];for(E=E>>8,L=E&255;L>0;)z.unshift(L),E=E>>8,L=E&255,++$;return T?z.push($):z.unshift($),this.update(z),z.length},g.prototype.encodeString=function(E){var T,L=typeof E;if(L!=="string"){if(L==="object"){if(E===null)throw new Error(e);if(d&&E.constructor===ArrayBuffer)E=new Uint8Array(E);else if(!Array.isArray(E)&&(!d||!ArrayBuffer.isView(E)))throw new Error(e)}else throw new Error(e);T=!0}var $=0,z=E.length;if(T)$=z;else for(var W=0;W<E.length;++W){var X=E.charCodeAt(W);X<128?$+=1:X<2048?$+=2:X<55296||X>=57344?$+=3:(X=65536+((X&1023)<<10|E.charCodeAt(++W)&1023),$+=4)}return $+=this.encode($*8),this.update(E),$},g.prototype.bytepad=function(E,T){for(var L=this.encode(T),$=0;$<E.length;++$)L+=this.encodeString(E[$]);var z=T-L%T,W=[];return W.length=z,this.update(W),this},g.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var E=this.blocks,T=this.lastByteIndex,L=this.blockCount,$=this.s;if(E[T>>2]|=this.padding[T&3],this.lastByteIndex===this.byteCount)for(E[0]=E[L],T=1;T<L+1;++T)E[T]=0;for(E[L-1]|=2147483648,T=0;T<L;++T)$[T]^=E[T];U($)}},g.prototype.toString=g.prototype.hex=function(){this.finalize();for(var E=this.blockCount,T=this.s,L=this.outputBlocks,$=this.extraBytes,z=0,W=0,X="",K;W<L;){for(z=0;z<E&&W<L;++z,++W)K=T[z],X+=u[K>>4&15]+u[K&15]+u[K>>12&15]+u[K>>8&15]+u[K>>20&15]+u[K>>16&15]+u[K>>28&15]+u[K>>24&15];W%E===0&&(U(T),z=0)}return $&&(K=T[z],X+=u[K>>4&15]+u[K&15],$>1&&(X+=u[K>>12&15]+u[K>>8&15]),$>2&&(X+=u[K>>20&15]+u[K>>16&15])),X},g.prototype.arrayBuffer=function(){this.finalize();var E=this.blockCount,T=this.s,L=this.outputBlocks,$=this.extraBytes,z=0,W=0,X=this.outputBits>>3,K;$?K=new ArrayBuffer(L+1<<2):K=new ArrayBuffer(X);for(var ce=new Uint32Array(K);W<L;){for(z=0;z<E&&W<L;++z,++W)ce[W]=T[z];W%E===0&&U(T)}return $&&(ce[z]=T[z],K=K.slice(0,X)),K},g.prototype.buffer=g.prototype.arrayBuffer,g.prototype.digest=g.prototype.array=function(){this.finalize();for(var E=this.blockCount,T=this.s,L=this.outputBlocks,$=this.extraBytes,z=0,W=0,X=[],K,ce;W<L;){for(z=0;z<E&&W<L;++z,++W)K=W<<2,ce=T[z],X[K]=ce&255,X[K+1]=ce>>8&255,X[K+2]=ce>>16&255,X[K+3]=ce>>24&255;W%E===0&&U(T)}return $&&(K=W<<2,ce=T[z],X[K]=ce&255,$>1&&(X[K+1]=ce>>8&255),$>2&&(X[K+2]=ce>>16&255)),X};function A(E,T,L){g.call(this,E,T,L)}A.prototype=new g,A.prototype.finalize=function(){return this.encode(this.outputBits,!0),g.prototype.finalize.call(this)};var U=function(E){var T,L,$,z,W,X,K,ce,Z,Q,Ue,ze,he,Re,Te,oe,Ne,Pe,fe,Ce,Be,se,De,Le,re,Ve,We,pe,Ge,Fe,de,Ye,Qe,ne,Je,et,be,ke,Oe,ue,qe,je,ae,tt,rt,ve,it,nt,le,Ke,Ie,ge,st,ot,ye,at,Ee,Xe,ir,nr,sr,or,wt;for($=0;$<48;$+=2)z=E[0]^E[10]^E[20]^E[30]^E[40],W=E[1]^E[11]^E[21]^E[31]^E[41],X=E[2]^E[12]^E[22]^E[32]^E[42],K=E[3]^E[13]^E[23]^E[33]^E[43],ce=E[4]^E[14]^E[24]^E[34]^E[44],Z=E[5]^E[15]^E[25]^E[35]^E[45],Q=E[6]^E[16]^E[26]^E[36]^E[46],Ue=E[7]^E[17]^E[27]^E[37]^E[47],ze=E[8]^E[18]^E[28]^E[38]^E[48],he=E[9]^E[19]^E[29]^E[39]^E[49],T=ze^(X<<1|K>>>31),L=he^(K<<1|X>>>31),E[0]^=T,E[1]^=L,E[10]^=T,E[11]^=L,E[20]^=T,E[21]^=L,E[30]^=T,E[31]^=L,E[40]^=T,E[41]^=L,T=z^(ce<<1|Z>>>31),L=W^(Z<<1|ce>>>31),E[2]^=T,E[3]^=L,E[12]^=T,E[13]^=L,E[22]^=T,E[23]^=L,E[32]^=T,E[33]^=L,E[42]^=T,E[43]^=L,T=X^(Q<<1|Ue>>>31),L=K^(Ue<<1|Q>>>31),E[4]^=T,E[5]^=L,E[14]^=T,E[15]^=L,E[24]^=T,E[25]^=L,E[34]^=T,E[35]^=L,E[44]^=T,E[45]^=L,T=ce^(ze<<1|he>>>31),L=Z^(he<<1|ze>>>31),E[6]^=T,E[7]^=L,E[16]^=T,E[17]^=L,E[26]^=T,E[27]^=L,E[36]^=T,E[37]^=L,E[46]^=T,E[47]^=L,T=Q^(z<<1|W>>>31),L=Ue^(W<<1|z>>>31),E[8]^=T,E[9]^=L,E[18]^=T,E[19]^=L,E[28]^=T,E[29]^=L,E[38]^=T,E[39]^=L,E[48]^=T,E[49]^=L,Re=E[0],Te=E[1],ve=E[11]<<4|E[10]>>>28,it=E[10]<<4|E[11]>>>28,pe=E[20]<<3|E[21]>>>29,Ge=E[21]<<3|E[20]>>>29,nr=E[31]<<9|E[30]>>>23,sr=E[30]<<9|E[31]>>>23,je=E[40]<<18|E[41]>>>14,ae=E[41]<<18|E[40]>>>14,ne=E[2]<<1|E[3]>>>31,Je=E[3]<<1|E[2]>>>31,oe=E[13]<<12|E[12]>>>20,Ne=E[12]<<12|E[13]>>>20,nt=E[22]<<10|E[23]>>>22,le=E[23]<<10|E[22]>>>22,Fe=E[33]<<13|E[32]>>>19,de=E[32]<<13|E[33]>>>19,or=E[42]<<2|E[43]>>>30,wt=E[43]<<2|E[42]>>>30,ot=E[5]<<30|E[4]>>>2,ye=E[4]<<30|E[5]>>>2,et=E[14]<<6|E[15]>>>26,be=E[15]<<6|E[14]>>>26,Pe=E[25]<<11|E[24]>>>21,fe=E[24]<<11|E[25]>>>21,Ke=E[34]<<15|E[35]>>>17,Ie=E[35]<<15|E[34]>>>17,Ye=E[45]<<29|E[44]>>>3,Qe=E[44]<<29|E[45]>>>3,Le=E[6]<<28|E[7]>>>4,re=E[7]<<28|E[6]>>>4,at=E[17]<<23|E[16]>>>9,Ee=E[16]<<23|E[17]>>>9,ke=E[26]<<25|E[27]>>>7,Oe=E[27]<<25|E[26]>>>7,Ce=E[36]<<21|E[37]>>>11,Be=E[37]<<21|E[36]>>>11,ge=E[47]<<24|E[46]>>>8,st=E[46]<<24|E[47]>>>8,tt=E[8]<<27|E[9]>>>5,rt=E[9]<<27|E[8]>>>5,Ve=E[18]<<20|E[19]>>>12,We=E[19]<<20|E[18]>>>12,Xe=E[29]<<7|E[28]>>>25,ir=E[28]<<7|E[29]>>>25,ue=E[38]<<8|E[39]>>>24,qe=E[39]<<8|E[38]>>>24,se=E[48]<<14|E[49]>>>18,De=E[49]<<14|E[48]>>>18,E[0]=Re^~oe&Pe,E[1]=Te^~Ne&fe,E[10]=Le^~Ve&pe,E[11]=re^~We&Ge,E[20]=ne^~et&ke,E[21]=Je^~be&Oe,E[30]=tt^~ve&nt,E[31]=rt^~it&le,E[40]=ot^~at&Xe,E[41]=ye^~Ee&ir,E[2]=oe^~Pe&Ce,E[3]=Ne^~fe&Be,E[12]=Ve^~pe&Fe,E[13]=We^~Ge&de,E[22]=et^~ke&ue,E[23]=be^~Oe&qe,E[32]=ve^~nt&Ke,E[33]=it^~le&Ie,E[42]=at^~Xe&nr,E[43]=Ee^~ir&sr,E[4]=Pe^~Ce&se,E[5]=fe^~Be&De,E[14]=pe^~Fe&Ye,E[15]=Ge^~de&Qe,E[24]=ke^~ue&je,E[25]=Oe^~qe&ae,E[34]=nt^~Ke&ge,E[35]=le^~Ie&st,E[44]=Xe^~nr&or,E[45]=ir^~sr&wt,E[6]=Ce^~se&Re,E[7]=Be^~De&Te,E[16]=Fe^~Ye&Le,E[17]=de^~Qe&re,E[26]=ue^~je&ne,E[27]=qe^~ae&Je,E[36]=Ke^~ge&tt,E[37]=Ie^~st&rt,E[46]=nr^~or&ot,E[47]=sr^~wt&ye,E[8]=se^~Re&oe,E[9]=De^~Te&Ne,E[18]=Ye^~Le&Ve,E[19]=Qe^~re&We,E[28]=je^~ne&et,E[29]=ae^~Je&be,E[38]=ge^~tt&ve,E[39]=st^~rt&it,E[48]=or^~ot&at,E[49]=wt^~ye&Ee,E[0]^=R[$],E[1]^=R[$+1]};if(f)t.exports=a;else for(b=0;b<c.length;++b)s[c[b]]=a[c[b]]})()})(M3);const I3="rlp/5.7.0";new xe(I3);const A3="address/5.7.0";new xe(A3);const D3="properties/5.7.0";new xe(D3);var hr={},Me={},Vi=ku;function ku(t,e){if(!t)throw new Error(e||"Assertion failed")}ku.equal=function(e,r,i){if(e!=r)throw new Error(i||"Assertion failed: "+e+" != "+r)};var gn={exports:{}};typeof Object.create=="function"?gn.exports=function(e,r){r&&(e.super_=r,e.prototype=Object.create(r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:gn.exports=function(e,r){if(r){e.super_=r;var i=function(){};i.prototype=r.prototype,e.prototype=new i,e.prototype.constructor=e}};var O3=Vi,R3=gn.exports;Me.inherits=R3;function T3(t,e){return(t.charCodeAt(e)&64512)!==55296||e<0||e+1>=t.length?!1:(t.charCodeAt(e+1)&64512)===56320}function N3(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var r=[];if(typeof t=="string")if(e){if(e==="hex")for(t=t.replace(/[^a-z0-9]+/ig,""),t.length%2!==0&&(t="0"+t),s=0;s<t.length;s+=2)r.push(parseInt(t[s]+t[s+1],16))}else for(var i=0,s=0;s<t.length;s++){var n=t.charCodeAt(s);n<128?r[i++]=n:n<2048?(r[i++]=n>>6|192,r[i++]=n&63|128):T3(t,s)?(n=65536+((n&1023)<<10)+(t.charCodeAt(++s)&1023),r[i++]=n>>18|240,r[i++]=n>>12&63|128,r[i++]=n>>6&63|128,r[i++]=n&63|128):(r[i++]=n>>12|224,r[i++]=n>>6&63|128,r[i++]=n&63|128)}else for(s=0;s<t.length;s++)r[s]=t[s]|0;return r}Me.toArray=N3;function P3(t){for(var e="",r=0;r<t.length;r++)e+=ju(t[r].toString(16));return e}Me.toHex=P3;function qu(t){var e=t>>>24|t>>>8&65280|t<<8&16711680|(t&255)<<24;return e>>>0}Me.htonl=qu;function C3(t,e){for(var r="",i=0;i<t.length;i++){var s=t[i];e==="little"&&(s=qu(s)),r+=Ku(s.toString(16))}return r}Me.toHex32=C3;function ju(t){return t.length===1?"0"+t:t}Me.zero2=ju;function Ku(t){return t.length===7?"0"+t:t.length===6?"00"+t:t.length===5?"000"+t:t.length===4?"0000"+t:t.length===3?"00000"+t:t.length===2?"000000"+t:t.length===1?"0000000"+t:t}Me.zero8=Ku;function B3(t,e,r,i){var s=r-e;O3(s%4===0);for(var n=new Array(s/4),o=0,f=e;o<n.length;o++,f+=4){var d;i==="big"?d=t[f]<<24|t[f+1]<<16|t[f+2]<<8|t[f+3]:d=t[f+3]<<24|t[f+2]<<16|t[f+1]<<8|t[f],n[o]=d>>>0}return n}Me.join32=B3;function L3(t,e){for(var r=new Array(t.length*4),i=0,s=0;i<t.length;i++,s+=4){var n=t[i];e==="big"?(r[s]=n>>>24,r[s+1]=n>>>16&255,r[s+2]=n>>>8&255,r[s+3]=n&255):(r[s+3]=n>>>24,r[s+2]=n>>>16&255,r[s+1]=n>>>8&255,r[s]=n&255)}return r}Me.split32=L3;function F3(t,e){return t>>>e|t<<32-e}Me.rotr32=F3;function $3(t,e){return t<<e|t>>>32-e}Me.rotl32=$3;function U3(t,e){return t+e>>>0}Me.sum32=U3;function z3(t,e,r){return t+e+r>>>0}Me.sum32_3=z3;function k3(t,e,r,i){return t+e+r+i>>>0}Me.sum32_4=k3;function q3(t,e,r,i,s){return t+e+r+i+s>>>0}Me.sum32_5=q3;function j3(t,e,r,i){var s=t[e],n=t[e+1],o=i+n>>>0,f=(o<i?1:0)+r+s;t[e]=f>>>0,t[e+1]=o}Me.sum64=j3;function K3(t,e,r,i){var s=e+i>>>0,n=(s<e?1:0)+t+r;return n>>>0}Me.sum64_hi=K3;function H3(t,e,r,i){var s=e+i;return s>>>0}Me.sum64_lo=H3;function V3(t,e,r,i,s,n,o,f){var d=0,u=e;u=u+i>>>0,d+=u<e?1:0,u=u+n>>>0,d+=u<n?1:0,u=u+f>>>0,d+=u<f?1:0;var v=t+r+s+o+d;return v>>>0}Me.sum64_4_hi=V3;function W3(t,e,r,i,s,n,o,f){var d=e+i+n+f;return d>>>0}Me.sum64_4_lo=W3;function G3(t,e,r,i,s,n,o,f,d,u){var v=0,w=e;w=w+i>>>0,v+=w<e?1:0,w=w+n>>>0,v+=w<n?1:0,w=w+f>>>0,v+=w<f?1:0,w=w+u>>>0,v+=w<u?1:0;var S=t+r+s+o+d+v;return S>>>0}Me.sum64_5_hi=G3;function Y3(t,e,r,i,s,n,o,f,d,u){var v=e+i+n+f+u;return v>>>0}Me.sum64_5_lo=Y3;function J3(t,e,r){var i=e<<32-r|t>>>r;return i>>>0}Me.rotr64_hi=J3;function X3(t,e,r){var i=t<<32-r|e>>>r;return i>>>0}Me.rotr64_lo=X3;function Z3(t,e,r){return t>>>r}Me.shr64_hi=Z3;function Q3(t,e,r){var i=t<<32-r|e>>>r;return i>>>0}Me.shr64_lo=Q3;var yn={},Hu=Me,ey=Vi;function Ws(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}yn.BlockHash=Ws,Ws.prototype.update=function(e,r){if(e=Hu.toArray(e,r),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){e=this.pending;var i=e.length%this._delta8;this.pending=e.slice(e.length-i,e.length),this.pending.length===0&&(this.pending=null),e=Hu.join32(e,0,e.length-i,this.endian);for(var s=0;s<e.length;s+=this._delta32)this._update(e,s,s+this._delta32)}return this},Ws.prototype.digest=function(e){return this.update(this._pad()),ey(this.pending===null),this._digest(e)},Ws.prototype._pad=function(){var e=this.pendingTotal,r=this._delta8,i=r-(e+this.padLength)%r,s=new Array(i+this.padLength);s[0]=128;for(var n=1;n<i;n++)s[n]=0;if(e<<=3,this.endian==="big"){for(var o=8;o<this.padLength;o++)s[n++]=0;s[n++]=0,s[n++]=0,s[n++]=0,s[n++]=0,s[n++]=e>>>24&255,s[n++]=e>>>16&255,s[n++]=e>>>8&255,s[n++]=e&255}else for(s[n++]=e&255,s[n++]=e>>>8&255,s[n++]=e>>>16&255,s[n++]=e>>>24&255,s[n++]=0,s[n++]=0,s[n++]=0,s[n++]=0,o=8;o<this.padLength;o++)s[n++]=0;return s};var mn={},qr={},ty=Me,jr=ty.rotr32;function ry(t,e,r,i){if(t===0)return Vu(e,r,i);if(t===1||t===3)return Gu(e,r,i);if(t===2)return Wu(e,r,i)}qr.ft_1=ry;function Vu(t,e,r){return t&e^~t&r}qr.ch32=Vu;function Wu(t,e,r){return t&e^t&r^e&r}qr.maj32=Wu;function Gu(t,e,r){return t^e^r}qr.p32=Gu;function iy(t){return jr(t,2)^jr(t,13)^jr(t,22)}qr.s0_256=iy;function ny(t){return jr(t,6)^jr(t,11)^jr(t,25)}qr.s1_256=ny;function sy(t){return jr(t,7)^jr(t,18)^t>>>3}qr.g0_256=sy;function oy(t){return jr(t,17)^jr(t,19)^t>>>10}qr.g1_256=oy;var wn=Me,ay=yn,fy=qr,Ba=wn.rotl32,ts=wn.sum32,cy=wn.sum32_5,hy=fy.ft_1,Yu=ay.BlockHash,uy=[1518500249,1859775393,2400959708,3395469782];function Kr(){if(!(this instanceof Kr))return new Kr;Yu.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}wn.inherits(Kr,Yu);var dy=Kr;Kr.blockSize=512,Kr.outSize=160,Kr.hmacStrength=80,Kr.padLength=64,Kr.prototype._update=function(e,r){for(var i=this.W,s=0;s<16;s++)i[s]=e[r+s];for(;s<i.length;s++)i[s]=Ba(i[s-3]^i[s-8]^i[s-14]^i[s-16],1);var n=this.h[0],o=this.h[1],f=this.h[2],d=this.h[3],u=this.h[4];for(s=0;s<i.length;s++){var v=~~(s/20),w=cy(Ba(n,5),hy(v,o,f,d),u,i[s],uy[v]);u=d,d=f,f=Ba(o,30),o=n,n=w}this.h[0]=ts(this.h[0],n),this.h[1]=ts(this.h[1],o),this.h[2]=ts(this.h[2],f),this.h[3]=ts(this.h[3],d),this.h[4]=ts(this.h[4],u)},Kr.prototype._digest=function(e){return e==="hex"?wn.toHex32(this.h,"big"):wn.split32(this.h,"big")};var _n=Me,ly=yn,En=qr,py=Vi,Tr=_n.sum32,by=_n.sum32_4,vy=_n.sum32_5,gy=En.ch32,yy=En.maj32,my=En.s0_256,wy=En.s1_256,_y=En.g0_256,Ey=En.g1_256,Ju=ly.BlockHash,xy=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function Hr(){if(!(this instanceof Hr))return new Hr;Ju.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=xy,this.W=new Array(64)}_n.inherits(Hr,Ju);var Xu=Hr;Hr.blockSize=512,Hr.outSize=256,Hr.hmacStrength=192,Hr.padLength=64,Hr.prototype._update=function(e,r){for(var i=this.W,s=0;s<16;s++)i[s]=e[r+s];for(;s<i.length;s++)i[s]=by(Ey(i[s-2]),i[s-7],_y(i[s-15]),i[s-16]);var n=this.h[0],o=this.h[1],f=this.h[2],d=this.h[3],u=this.h[4],v=this.h[5],w=this.h[6],S=this.h[7];for(py(this.k.length===i.length),s=0;s<i.length;s++){var I=vy(S,wy(u),gy(u,v,w),this.k[s],i[s]),M=Tr(my(n),yy(n,o,f));S=w,w=v,v=u,u=Tr(d,I),d=f,f=o,o=n,n=Tr(I,M)}this.h[0]=Tr(this.h[0],n),this.h[1]=Tr(this.h[1],o),this.h[2]=Tr(this.h[2],f),this.h[3]=Tr(this.h[3],d),this.h[4]=Tr(this.h[4],u),this.h[5]=Tr(this.h[5],v),this.h[6]=Tr(this.h[6],w),this.h[7]=Tr(this.h[7],S)},Hr.prototype._digest=function(e){return e==="hex"?_n.toHex32(this.h,"big"):_n.split32(this.h,"big")};var La=Me,Zu=Xu;function si(){if(!(this instanceof si))return new si;Zu.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}La.inherits(si,Zu);var Sy=si;si.blockSize=512,si.outSize=224,si.hmacStrength=192,si.padLength=64,si.prototype._digest=function(e){return e==="hex"?La.toHex32(this.h.slice(0,7),"big"):La.split32(this.h.slice(0,7),"big")};var er=Me,My=yn,Iy=Vi,Vr=er.rotr64_hi,Wr=er.rotr64_lo,Qu=er.shr64_hi,ed=er.shr64_lo,Ii=er.sum64,Fa=er.sum64_hi,$a=er.sum64_lo,Ay=er.sum64_4_hi,Dy=er.sum64_4_lo,Oy=er.sum64_5_hi,Ry=er.sum64_5_lo,td=My.BlockHash,Ty=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function Nr(){if(!(this instanceof Nr))return new Nr;td.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=Ty,this.W=new Array(160)}er.inherits(Nr,td);var rd=Nr;Nr.blockSize=1024,Nr.outSize=512,Nr.hmacStrength=192,Nr.padLength=128,Nr.prototype._prepareBlock=function(e,r){for(var i=this.W,s=0;s<32;s++)i[s]=e[r+s];for(;s<i.length;s+=2){var n=qy(i[s-4],i[s-3]),o=jy(i[s-4],i[s-3]),f=i[s-14],d=i[s-13],u=zy(i[s-30],i[s-29]),v=ky(i[s-30],i[s-29]),w=i[s-32],S=i[s-31];i[s]=Ay(n,o,f,d,u,v,w,S),i[s+1]=Dy(n,o,f,d,u,v,w,S)}},Nr.prototype._update=function(e,r){this._prepareBlock(e,r);var i=this.W,s=this.h[0],n=this.h[1],o=this.h[2],f=this.h[3],d=this.h[4],u=this.h[5],v=this.h[6],w=this.h[7],S=this.h[8],I=this.h[9],M=this.h[10],R=this.h[11],N=this.h[12],C=this.h[13],B=this.h[14],F=this.h[15];Iy(this.k.length===i.length);for(var k=0;k<i.length;k+=2){var V=B,H=F,G=$y(S,I),J=Uy(S,I),j=Ny(S,I,M,R,N),te=Py(S,I,M,R,N,C),D=this.k[k],p=this.k[k+1],l=i[k],a=i[k+1],c=Oy(V,H,G,J,j,te,D,p,l,a),b=Ry(V,H,G,J,j,te,D,p,l,a);V=Ly(s,n),H=Fy(s,n),G=Cy(s,n,o,f,d),J=By(s,n,o,f,d,u);var _=Fa(V,H,G,J),x=$a(V,H,G,J);B=N,F=C,N=M,C=R,M=S,R=I,S=Fa(v,w,c,b),I=$a(w,w,c,b),v=d,w=u,d=o,u=f,o=s,f=n,s=Fa(c,b,_,x),n=$a(c,b,_,x)}Ii(this.h,0,s,n),Ii(this.h,2,o,f),Ii(this.h,4,d,u),Ii(this.h,6,v,w),Ii(this.h,8,S,I),Ii(this.h,10,M,R),Ii(this.h,12,N,C),Ii(this.h,14,B,F)},Nr.prototype._digest=function(e){return e==="hex"?er.toHex32(this.h,"big"):er.split32(this.h,"big")};function Ny(t,e,r,i,s){var n=t&r^~t&s;return n<0&&(n+=4294967296),n}function Py(t,e,r,i,s,n){var o=e&i^~e&n;return o<0&&(o+=4294967296),o}function Cy(t,e,r,i,s){var n=t&r^t&s^r&s;return n<0&&(n+=4294967296),n}function By(t,e,r,i,s,n){var o=e&i^e&n^i&n;return o<0&&(o+=4294967296),o}function Ly(t,e){var r=Vr(t,e,28),i=Vr(e,t,2),s=Vr(e,t,7),n=r^i^s;return n<0&&(n+=4294967296),n}function Fy(t,e){var r=Wr(t,e,28),i=Wr(e,t,2),s=Wr(e,t,7),n=r^i^s;return n<0&&(n+=4294967296),n}function $y(t,e){var r=Vr(t,e,14),i=Vr(t,e,18),s=Vr(e,t,9),n=r^i^s;return n<0&&(n+=4294967296),n}function Uy(t,e){var r=Wr(t,e,14),i=Wr(t,e,18),s=Wr(e,t,9),n=r^i^s;return n<0&&(n+=4294967296),n}function zy(t,e){var r=Vr(t,e,1),i=Vr(t,e,8),s=Qu(t,e,7),n=r^i^s;return n<0&&(n+=4294967296),n}function ky(t,e){var r=Wr(t,e,1),i=Wr(t,e,8),s=ed(t,e,7),n=r^i^s;return n<0&&(n+=4294967296),n}function qy(t,e){var r=Vr(t,e,19),i=Vr(e,t,29),s=Qu(t,e,6),n=r^i^s;return n<0&&(n+=4294967296),n}function jy(t,e){var r=Wr(t,e,19),i=Wr(e,t,29),s=ed(t,e,6),n=r^i^s;return n<0&&(n+=4294967296),n}var Ua=Me,id=rd;function oi(){if(!(this instanceof oi))return new oi;id.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}Ua.inherits(oi,id);var Ky=oi;oi.blockSize=1024,oi.outSize=384,oi.hmacStrength=192,oi.padLength=128,oi.prototype._digest=function(e){return e==="hex"?Ua.toHex32(this.h.slice(0,12),"big"):Ua.split32(this.h.slice(0,12),"big")},mn.sha1=dy,mn.sha224=Sy,mn.sha256=Xu,mn.sha384=Ky,mn.sha512=rd;var nd={},Wi=Me,Hy=yn,Gs=Wi.rotl32,sd=Wi.sum32,rs=Wi.sum32_3,od=Wi.sum32_4,ad=Hy.BlockHash;function Gr(){if(!(this instanceof Gr))return new Gr;ad.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}Wi.inherits(Gr,ad),nd.ripemd160=Gr,Gr.blockSize=512,Gr.outSize=160,Gr.hmacStrength=192,Gr.padLength=64,Gr.prototype._update=function(e,r){for(var i=this.h[0],s=this.h[1],n=this.h[2],o=this.h[3],f=this.h[4],d=i,u=s,v=n,w=o,S=f,I=0;I<80;I++){var M=sd(Gs(od(i,fd(I,s,n,o),e[Gy[I]+r],Vy(I)),Jy[I]),f);i=f,f=o,o=Gs(n,10),n=s,s=M,M=sd(Gs(od(d,fd(79-I,u,v,w),e[Yy[I]+r],Wy(I)),Xy[I]),S),d=S,S=w,w=Gs(v,10),v=u,u=M}M=rs(this.h[1],n,w),this.h[1]=rs(this.h[2],o,S),this.h[2]=rs(this.h[3],f,d),this.h[3]=rs(this.h[4],i,u),this.h[4]=rs(this.h[0],s,v),this.h[0]=M},Gr.prototype._digest=function(e){return e==="hex"?Wi.toHex32(this.h,"little"):Wi.split32(this.h,"little")};function fd(t,e,r,i){return t<=15?e^r^i:t<=31?e&r|~e&i:t<=47?(e|~r)^i:t<=63?e&i|r&~i:e^(r|~i)}function Vy(t){return t<=15?0:t<=31?1518500249:t<=47?1859775393:t<=63?2400959708:2840853838}function Wy(t){return t<=15?1352829926:t<=31?1548603684:t<=47?1836072691:t<=63?2053994217:0}var Gy=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],Yy=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],Jy=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],Xy=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],Zy=Me,Qy=Vi;function xn(t,e,r){if(!(this instanceof xn))return new xn(t,e,r);this.Hash=t,this.blockSize=t.blockSize/8,this.outSize=t.outSize/8,this.inner=null,this.outer=null,this._init(Zy.toArray(e,r))}var em=xn;xn.prototype._init=function(e){e.length>this.blockSize&&(e=new this.Hash().update(e).digest()),Qy(e.length<=this.blockSize);for(var r=e.length;r<this.blockSize;r++)e.push(0);for(r=0;r<e.length;r++)e[r]^=54;for(this.inner=new this.Hash().update(e),r=0;r<e.length;r++)e[r]^=106;this.outer=new this.Hash().update(e)},xn.prototype.update=function(e,r){return this.inner.update(e,r),this},xn.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)},function(t){var e=t;e.utils=Me,e.common=yn,e.sha=mn,e.ripemd=nd,e.hmac=em,e.sha1=e.sha.sha1,e.sha256=e.sha.sha256,e.sha224=e.sha.sha224,e.sha384=e.sha.sha384,e.sha512=e.sha.sha512,e.ripemd160=e.ripemd.ripemd160}(hr);function Sn(t,e,r){return r={path:e,exports:{},require:function(i,s){return tm(i,s??r.path)}},t(r,r.exports),r.exports}function tm(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var za=cd;function cd(t,e){if(!t)throw new Error(e||"Assertion failed")}cd.equal=function(e,r,i){if(e!=r)throw new Error(i||"Assertion failed: "+e+" != "+r)};var Pr=Sn(function(t,e){var r=e;function i(o,f){if(Array.isArray(o))return o.slice();if(!o)return[];var d=[];if(typeof o!="string"){for(var u=0;u<o.length;u++)d[u]=o[u]|0;return d}if(f==="hex"){o=o.replace(/[^a-z0-9]+/ig,""),o.length%2!==0&&(o="0"+o);for(var u=0;u<o.length;u+=2)d.push(parseInt(o[u]+o[u+1],16))}else for(var u=0;u<o.length;u++){var v=o.charCodeAt(u),w=v>>8,S=v&255;w?d.push(w,S):d.push(S)}return d}r.toArray=i;function s(o){return o.length===1?"0"+o:o}r.zero2=s;function n(o){for(var f="",d=0;d<o.length;d++)f+=s(o[d].toString(16));return f}r.toHex=n,r.encode=function(f,d){return d==="hex"?n(f):f}}),ur=Sn(function(t,e){var r=e;r.assert=za,r.toArray=Pr.toArray,r.zero2=Pr.zero2,r.toHex=Pr.toHex,r.encode=Pr.encode;function i(d,u,v){var w=new Array(Math.max(d.bitLength(),v)+1);w.fill(0);for(var S=1<<u+1,I=d.clone(),M=0;M<w.length;M++){var R,N=I.andln(S-1);I.isOdd()?(N>(S>>1)-1?R=(S>>1)-N:R=N,I.isubn(R)):R=0,w[M]=R,I.iushrn(1)}return w}r.getNAF=i;function s(d,u){var v=[[],[]];d=d.clone(),u=u.clone();for(var w=0,S=0,I;d.cmpn(-w)>0||u.cmpn(-S)>0;){var M=d.andln(3)+w&3,R=u.andln(3)+S&3;M===3&&(M=-1),R===3&&(R=-1);var N;(M&1)===0?N=0:(I=d.andln(7)+w&7,(I===3||I===5)&&R===2?N=-M:N=M),v[0].push(N);var C;(R&1)===0?C=0:(I=u.andln(7)+S&7,(I===3||I===5)&&M===2?C=-R:C=R),v[1].push(C),2*w===N+1&&(w=1-w),2*S===C+1&&(S=1-S),d.iushrn(1),u.iushrn(1)}return v}r.getJSF=s;function n(d,u,v){var w="_"+u;d.prototype[u]=function(){return this[w]!==void 0?this[w]:this[w]=v.call(this)}}r.cachedProperty=n;function o(d){return typeof d=="string"?r.toArray(d,"hex"):d}r.parseBytes=o;function f(d){return new me(d,"hex","le")}r.intFromLE=f}),Ys=ur.getNAF,rm=ur.getJSF,Js=ur.assert;function Ai(t,e){this.type=t,this.p=new me(e.p,16),this.red=e.prime?me.red(e.prime):me.mont(this.p),this.zero=new me(0).toRed(this.red),this.one=new me(1).toRed(this.red),this.two=new me(2).toRed(this.red),this.n=e.n&&new me(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var Gi=Ai;Ai.prototype.point=function(){throw new Error("Not implemented")},Ai.prototype.validate=function(){throw new Error("Not implemented")},Ai.prototype._fixedNafMul=function(e,r){Js(e.precomputed);var i=e._getDoubles(),s=Ys(r,1,this._bitLength),n=(1<<i.step+1)-(i.step%2===0?2:1);n/=3;var o=[],f,d;for(f=0;f<s.length;f+=i.step){d=0;for(var u=f+i.step-1;u>=f;u--)d=(d<<1)+s[u];o.push(d)}for(var v=this.jpoint(null,null,null),w=this.jpoint(null,null,null),S=n;S>0;S--){for(f=0;f<o.length;f++)d=o[f],d===S?w=w.mixedAdd(i.points[f]):d===-S&&(w=w.mixedAdd(i.points[f].neg()));v=v.add(w)}return v.toP()},Ai.prototype._wnafMul=function(e,r){var i=4,s=e._getNAFPoints(i);i=s.wnd;for(var n=s.points,o=Ys(r,i,this._bitLength),f=this.jpoint(null,null,null),d=o.length-1;d>=0;d--){for(var u=0;d>=0&&o[d]===0;d--)u++;if(d>=0&&u++,f=f.dblp(u),d<0)break;var v=o[d];Js(v!==0),e.type==="affine"?v>0?f=f.mixedAdd(n[v-1>>1]):f=f.mixedAdd(n[-v-1>>1].neg()):v>0?f=f.add(n[v-1>>1]):f=f.add(n[-v-1>>1].neg())}return e.type==="affine"?f.toP():f},Ai.prototype._wnafMulAdd=function(e,r,i,s,n){var o=this._wnafT1,f=this._wnafT2,d=this._wnafT3,u=0,v,w,S;for(v=0;v<s;v++){S=r[v];var I=S._getNAFPoints(e);o[v]=I.wnd,f[v]=I.points}for(v=s-1;v>=1;v-=2){var M=v-1,R=v;if(o[M]!==1||o[R]!==1){d[M]=Ys(i[M],o[M],this._bitLength),d[R]=Ys(i[R],o[R],this._bitLength),u=Math.max(d[M].length,u),u=Math.max(d[R].length,u);continue}var N=[r[M],null,null,r[R]];r[M].y.cmp(r[R].y)===0?(N[1]=r[M].add(r[R]),N[2]=r[M].toJ().mixedAdd(r[R].neg())):r[M].y.cmp(r[R].y.redNeg())===0?(N[1]=r[M].toJ().mixedAdd(r[R]),N[2]=r[M].add(r[R].neg())):(N[1]=r[M].toJ().mixedAdd(r[R]),N[2]=r[M].toJ().mixedAdd(r[R].neg()));var C=[-3,-1,-5,-7,0,7,5,1,3],B=rm(i[M],i[R]);for(u=Math.max(B[0].length,u),d[M]=new Array(u),d[R]=new Array(u),w=0;w<u;w++){var F=B[0][w]|0,k=B[1][w]|0;d[M][w]=C[(F+1)*3+(k+1)],d[R][w]=0,f[M]=N}}var V=this.jpoint(null,null,null),H=this._wnafT4;for(v=u;v>=0;v--){for(var G=0;v>=0;){var J=!0;for(w=0;w<s;w++)H[w]=d[w][v]|0,H[w]!==0&&(J=!1);if(!J)break;G++,v--}if(v>=0&&G++,V=V.dblp(G),v<0)break;for(w=0;w<s;w++){var j=H[w];j!==0&&(j>0?S=f[w][j-1>>1]:j<0&&(S=f[w][-j-1>>1].neg()),S.type==="affine"?V=V.mixedAdd(S):V=V.add(S))}}for(v=0;v<s;v++)f[v]=null;return n?V:V.toP()};function mr(t,e){this.curve=t,this.type=e,this.precomputed=null}Ai.BasePoint=mr,mr.prototype.eq=function(){throw new Error("Not implemented")},mr.prototype.validate=function(){return this.curve.validate(this)},Ai.prototype.decodePoint=function(e,r){e=ur.toArray(e,r);var i=this.p.byteLength();if((e[0]===4||e[0]===6||e[0]===7)&&e.length-1===2*i){e[0]===6?Js(e[e.length-1]%2===0):e[0]===7&&Js(e[e.length-1]%2===1);var s=this.point(e.slice(1,1+i),e.slice(1+i,1+2*i));return s}else if((e[0]===2||e[0]===3)&&e.length-1===i)return this.pointFromX(e.slice(1,1+i),e[0]===3);throw new Error("Unknown point format")},mr.prototype.encodeCompressed=function(e){return this.encode(e,!0)},mr.prototype._encode=function(e){var r=this.curve.p.byteLength(),i=this.getX().toArray("be",r);return e?[this.getY().isEven()?2:3].concat(i):[4].concat(i,this.getY().toArray("be",r))},mr.prototype.encode=function(e,r){return ur.encode(this._encode(r),e)},mr.prototype.precompute=function(e){if(this.precomputed)return this;var r={doubles:null,naf:null,beta:null};return r.naf=this._getNAFPoints(8),r.doubles=this._getDoubles(4,e),r.beta=this._getBeta(),this.precomputed=r,this},mr.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var r=this.precomputed.doubles;return r?r.points.length>=Math.ceil((e.bitLength()+1)/r.step):!1},mr.prototype._getDoubles=function(e,r){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var i=[this],s=this,n=0;n<r;n+=e){for(var o=0;o<e;o++)s=s.dbl();i.push(s)}return{step:e,points:i}},mr.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var r=[this],i=(1<<e)-1,s=i===1?null:this.dbl(),n=1;n<i;n++)r[n]=r[n-1].add(s);return{wnd:e,points:r}},mr.prototype._getBeta=function(){return null},mr.prototype.dblp=function(e){for(var r=this,i=0;i<e;i++)r=r.dbl();return r};var ka=Sn(function(t){typeof Object.create=="function"?t.exports=function(r,i){i&&(r.super_=i,r.prototype=Object.create(i.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(r,i){if(i){r.super_=i;var s=function(){};s.prototype=i.prototype,r.prototype=new s,r.prototype.constructor=r}}}),im=ur.assert;function wr(t){Gi.call(this,"short",t),this.a=new me(t.a,16).toRed(this.red),this.b=new me(t.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(t),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}ka(wr,Gi);var nm=wr;wr.prototype._getEndomorphism=function(e){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var r,i;if(e.beta)r=new me(e.beta,16).toRed(this.red);else{var s=this._getEndoRoots(this.p);r=s[0].cmp(s[1])<0?s[0]:s[1],r=r.toRed(this.red)}if(e.lambda)i=new me(e.lambda,16);else{var n=this._getEndoRoots(this.n);this.g.mul(n[0]).x.cmp(this.g.x.redMul(r))===0?i=n[0]:(i=n[1],im(this.g.mul(i).x.cmp(this.g.x.redMul(r))===0))}var o;return e.basis?o=e.basis.map(function(f){return{a:new me(f.a,16),b:new me(f.b,16)}}):o=this._getEndoBasis(i),{beta:r,lambda:i,basis:o}}},wr.prototype._getEndoRoots=function(e){var r=e===this.p?this.red:me.mont(e),i=new me(2).toRed(r).redInvm(),s=i.redNeg(),n=new me(3).toRed(r).redNeg().redSqrt().redMul(i),o=s.redAdd(n).fromRed(),f=s.redSub(n).fromRed();return[o,f]},wr.prototype._getEndoBasis=function(e){for(var r=this.n.ushrn(Math.floor(this.n.bitLength()/2)),i=e,s=this.n.clone(),n=new me(1),o=new me(0),f=new me(0),d=new me(1),u,v,w,S,I,M,R,N=0,C,B;i.cmpn(0)!==0;){var F=s.div(i);C=s.sub(F.mul(i)),B=f.sub(F.mul(n));var k=d.sub(F.mul(o));if(!w&&C.cmp(r)<0)u=R.neg(),v=n,w=C.neg(),S=B;else if(w&&++N===2)break;R=C,s=i,i=C,f=n,n=B,d=o,o=k}I=C.neg(),M=B;var V=w.sqr().add(S.sqr()),H=I.sqr().add(M.sqr());return H.cmp(V)>=0&&(I=u,M=v),w.negative&&(w=w.neg(),S=S.neg()),I.negative&&(I=I.neg(),M=M.neg()),[{a:w,b:S},{a:I,b:M}]},wr.prototype._endoSplit=function(e){var r=this.endo.basis,i=r[0],s=r[1],n=s.b.mul(e).divRound(this.n),o=i.b.neg().mul(e).divRound(this.n),f=n.mul(i.a),d=o.mul(s.a),u=n.mul(i.b),v=o.mul(s.b),w=e.sub(f).sub(d),S=u.add(v).neg();return{k1:w,k2:S}},wr.prototype.pointFromX=function(e,r){e=new me(e,16),e.red||(e=e.toRed(this.red));var i=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),s=i.redSqrt();if(s.redSqr().redSub(i).cmp(this.zero)!==0)throw new Error("invalid point");var n=s.fromRed().isOdd();return(r&&!n||!r&&n)&&(s=s.redNeg()),this.point(e,s)},wr.prototype.validate=function(e){if(e.inf)return!0;var r=e.x,i=e.y,s=this.a.redMul(r),n=r.redSqr().redMul(r).redIAdd(s).redIAdd(this.b);return i.redSqr().redISub(n).cmpn(0)===0},wr.prototype._endoWnafMulAdd=function(e,r,i){for(var s=this._endoWnafT1,n=this._endoWnafT2,o=0;o<e.length;o++){var f=this._endoSplit(r[o]),d=e[o],u=d._getBeta();f.k1.negative&&(f.k1.ineg(),d=d.neg(!0)),f.k2.negative&&(f.k2.ineg(),u=u.neg(!0)),s[o*2]=d,s[o*2+1]=u,n[o*2]=f.k1,n[o*2+1]=f.k2}for(var v=this._wnafMulAdd(1,s,n,o*2,i),w=0;w<o*2;w++)s[w]=null,n[w]=null;return v};function St(t,e,r,i){Gi.BasePoint.call(this,t,"affine"),e===null&&r===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new me(e,16),this.y=new me(r,16),i&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}ka(St,Gi.BasePoint),wr.prototype.point=function(e,r,i){return new St(this,e,r,i)},wr.prototype.pointFromJSON=function(e,r){return St.fromJSON(this,e,r)},St.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var r=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var i=this.curve,s=function(n){return i.point(n.x.redMul(i.endo.beta),n.y)};e.beta=r,r.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(s)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(s)}}}return r}},St.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},St.fromJSON=function(e,r,i){typeof r=="string"&&(r=JSON.parse(r));var s=e.point(r[0],r[1],i);if(!r[2])return s;function n(f){return e.point(f[0],f[1],i)}var o=r[2];return s.precomputed={beta:null,doubles:o.doubles&&{step:o.doubles.step,points:[s].concat(o.doubles.points.map(n))},naf:o.naf&&{wnd:o.naf.wnd,points:[s].concat(o.naf.points.map(n))}},s},St.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},St.prototype.isInfinity=function(){return this.inf},St.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(this.x.cmp(e.x)===0)return this.curve.point(null,null);var r=this.y.redSub(e.y);r.cmpn(0)!==0&&(r=r.redMul(this.x.redSub(e.x).redInvm()));var i=r.redSqr().redISub(this.x).redISub(e.x),s=r.redMul(this.x.redSub(i)).redISub(this.y);return this.curve.point(i,s)},St.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(e.cmpn(0)===0)return this.curve.point(null,null);var r=this.curve.a,i=this.x.redSqr(),s=e.redInvm(),n=i.redAdd(i).redIAdd(i).redIAdd(r).redMul(s),o=n.redSqr().redISub(this.x.redAdd(this.x)),f=n.redMul(this.x.redSub(o)).redISub(this.y);return this.curve.point(o,f)},St.prototype.getX=function(){return this.x.fromRed()},St.prototype.getY=function(){return this.y.fromRed()},St.prototype.mul=function(e){return e=new me(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)},St.prototype.mulAdd=function(e,r,i){var s=[this,r],n=[e,i];return this.curve.endo?this.curve._endoWnafMulAdd(s,n):this.curve._wnafMulAdd(1,s,n,2)},St.prototype.jmulAdd=function(e,r,i){var s=[this,r],n=[e,i];return this.curve.endo?this.curve._endoWnafMulAdd(s,n,!0):this.curve._wnafMulAdd(1,s,n,2,!0)},St.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||this.x.cmp(e.x)===0&&this.y.cmp(e.y)===0)},St.prototype.neg=function(e){if(this.inf)return this;var r=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var i=this.precomputed,s=function(n){return n.neg()};r.precomputed={naf:i.naf&&{wnd:i.naf.wnd,points:i.naf.points.map(s)},doubles:i.doubles&&{step:i.doubles.step,points:i.doubles.points.map(s)}}}return r},St.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var e=this.curve.jpoint(this.x,this.y,this.curve.one);return e};function Bt(t,e,r,i){Gi.BasePoint.call(this,t,"jacobian"),e===null&&r===null&&i===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new me(0)):(this.x=new me(e,16),this.y=new me(r,16),this.z=new me(i,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}ka(Bt,Gi.BasePoint),wr.prototype.jpoint=function(e,r,i){return new Bt(this,e,r,i)},Bt.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),r=e.redSqr(),i=this.x.redMul(r),s=this.y.redMul(r).redMul(e);return this.curve.point(i,s)},Bt.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},Bt.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var r=e.z.redSqr(),i=this.z.redSqr(),s=this.x.redMul(r),n=e.x.redMul(i),o=this.y.redMul(r.redMul(e.z)),f=e.y.redMul(i.redMul(this.z)),d=s.redSub(n),u=o.redSub(f);if(d.cmpn(0)===0)return u.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var v=d.redSqr(),w=v.redMul(d),S=s.redMul(v),I=u.redSqr().redIAdd(w).redISub(S).redISub(S),M=u.redMul(S.redISub(I)).redISub(o.redMul(w)),R=this.z.redMul(e.z).redMul(d);return this.curve.jpoint(I,M,R)},Bt.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var r=this.z.redSqr(),i=this.x,s=e.x.redMul(r),n=this.y,o=e.y.redMul(r).redMul(this.z),f=i.redSub(s),d=n.redSub(o);if(f.cmpn(0)===0)return d.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var u=f.redSqr(),v=u.redMul(f),w=i.redMul(u),S=d.redSqr().redIAdd(v).redISub(w).redISub(w),I=d.redMul(w.redISub(S)).redISub(n.redMul(v)),M=this.z.redMul(f);return this.curve.jpoint(S,I,M)},Bt.prototype.dblp=function(e){if(e===0)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var r;if(this.curve.zeroA||this.curve.threeA){var i=this;for(r=0;r<e;r++)i=i.dbl();return i}var s=this.curve.a,n=this.curve.tinv,o=this.x,f=this.y,d=this.z,u=d.redSqr().redSqr(),v=f.redAdd(f);for(r=0;r<e;r++){var w=o.redSqr(),S=v.redSqr(),I=S.redSqr(),M=w.redAdd(w).redIAdd(w).redIAdd(s.redMul(u)),R=o.redMul(S),N=M.redSqr().redISub(R.redAdd(R)),C=R.redISub(N),B=M.redMul(C);B=B.redIAdd(B).redISub(I);var F=v.redMul(d);r+1<e&&(u=u.redMul(I)),o=N,d=F,v=B}return this.curve.jpoint(o,v.redMul(n),d)},Bt.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},Bt.prototype._zeroDbl=function(){var e,r,i;if(this.zOne){var s=this.x.redSqr(),n=this.y.redSqr(),o=n.redSqr(),f=this.x.redAdd(n).redSqr().redISub(s).redISub(o);f=f.redIAdd(f);var d=s.redAdd(s).redIAdd(s),u=d.redSqr().redISub(f).redISub(f),v=o.redIAdd(o);v=v.redIAdd(v),v=v.redIAdd(v),e=u,r=d.redMul(f.redISub(u)).redISub(v),i=this.y.redAdd(this.y)}else{var w=this.x.redSqr(),S=this.y.redSqr(),I=S.redSqr(),M=this.x.redAdd(S).redSqr().redISub(w).redISub(I);M=M.redIAdd(M);var R=w.redAdd(w).redIAdd(w),N=R.redSqr(),C=I.redIAdd(I);C=C.redIAdd(C),C=C.redIAdd(C),e=N.redISub(M).redISub(M),r=R.redMul(M.redISub(e)).redISub(C),i=this.y.redMul(this.z),i=i.redIAdd(i)}return this.curve.jpoint(e,r,i)},Bt.prototype._threeDbl=function(){var e,r,i;if(this.zOne){var s=this.x.redSqr(),n=this.y.redSqr(),o=n.redSqr(),f=this.x.redAdd(n).redSqr().redISub(s).redISub(o);f=f.redIAdd(f);var d=s.redAdd(s).redIAdd(s).redIAdd(this.curve.a),u=d.redSqr().redISub(f).redISub(f);e=u;var v=o.redIAdd(o);v=v.redIAdd(v),v=v.redIAdd(v),r=d.redMul(f.redISub(u)).redISub(v),i=this.y.redAdd(this.y)}else{var w=this.z.redSqr(),S=this.y.redSqr(),I=this.x.redMul(S),M=this.x.redSub(w).redMul(this.x.redAdd(w));M=M.redAdd(M).redIAdd(M);var R=I.redIAdd(I);R=R.redIAdd(R);var N=R.redAdd(R);e=M.redSqr().redISub(N),i=this.y.redAdd(this.z).redSqr().redISub(S).redISub(w);var C=S.redSqr();C=C.redIAdd(C),C=C.redIAdd(C),C=C.redIAdd(C),r=M.redMul(R.redISub(e)).redISub(C)}return this.curve.jpoint(e,r,i)},Bt.prototype._dbl=function(){var e=this.curve.a,r=this.x,i=this.y,s=this.z,n=s.redSqr().redSqr(),o=r.redSqr(),f=i.redSqr(),d=o.redAdd(o).redIAdd(o).redIAdd(e.redMul(n)),u=r.redAdd(r);u=u.redIAdd(u);var v=u.redMul(f),w=d.redSqr().redISub(v.redAdd(v)),S=v.redISub(w),I=f.redSqr();I=I.redIAdd(I),I=I.redIAdd(I),I=I.redIAdd(I);var M=d.redMul(S).redISub(I),R=i.redAdd(i).redMul(s);return this.curve.jpoint(w,M,R)},Bt.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),r=this.y.redSqr(),i=this.z.redSqr(),s=r.redSqr(),n=e.redAdd(e).redIAdd(e),o=n.redSqr(),f=this.x.redAdd(r).redSqr().redISub(e).redISub(s);f=f.redIAdd(f),f=f.redAdd(f).redIAdd(f),f=f.redISub(o);var d=f.redSqr(),u=s.redIAdd(s);u=u.redIAdd(u),u=u.redIAdd(u),u=u.redIAdd(u);var v=n.redIAdd(f).redSqr().redISub(o).redISub(d).redISub(u),w=r.redMul(v);w=w.redIAdd(w),w=w.redIAdd(w);var S=this.x.redMul(d).redISub(w);S=S.redIAdd(S),S=S.redIAdd(S);var I=this.y.redMul(v.redMul(u.redISub(v)).redISub(f.redMul(d)));I=I.redIAdd(I),I=I.redIAdd(I),I=I.redIAdd(I);var M=this.z.redAdd(f).redSqr().redISub(i).redISub(d);return this.curve.jpoint(S,I,M)},Bt.prototype.mul=function(e,r){return e=new me(e,r),this.curve._wnafMul(this,e)},Bt.prototype.eq=function(e){if(e.type==="affine")return this.eq(e.toJ());if(this===e)return!0;var r=this.z.redSqr(),i=e.z.redSqr();if(this.x.redMul(i).redISub(e.x.redMul(r)).cmpn(0)!==0)return!1;var s=r.redMul(this.z),n=i.redMul(e.z);return this.y.redMul(n).redISub(e.y.redMul(s)).cmpn(0)===0},Bt.prototype.eqXToP=function(e){var r=this.z.redSqr(),i=e.toRed(this.curve.red).redMul(r);if(this.x.cmp(i)===0)return!0;for(var s=e.clone(),n=this.curve.redN.redMul(r);;){if(s.iadd(this.curve.n),s.cmp(this.curve.p)>=0)return!1;if(i.redIAdd(n),this.x.cmp(i)===0)return!0}},Bt.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},Bt.prototype.isInfinity=function(){return this.z.cmpn(0)===0};var Xs=Sn(function(t,e){var r=e;r.base=Gi,r.short=nm,r.mont=null,r.edwards=null}),Zs=Sn(function(t,e){var r=e,i=ur.assert;function s(f){f.type==="short"?this.curve=new Xs.short(f):f.type==="edwards"?this.curve=new Xs.edwards(f):this.curve=new Xs.mont(f),this.g=this.curve.g,this.n=this.curve.n,this.hash=f.hash,i(this.g.validate(),"Invalid curve"),i(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}r.PresetCurve=s;function n(f,d){Object.defineProperty(r,f,{configurable:!0,enumerable:!0,get:function(){var u=new s(d);return Object.defineProperty(r,f,{configurable:!0,enumerable:!0,value:u}),u}})}n("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:hr.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),n("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:hr.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),n("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:hr.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),n("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:hr.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),n("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:hr.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),n("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:hr.sha256,gRed:!1,g:["9"]}),n("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:hr.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var o;try{o=null.crash()}catch{o=void 0}n("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:hr.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",o]})});function Di(t){if(!(this instanceof Di))return new Di(t);this.hash=t.hash,this.predResist=!!t.predResist,this.outLen=this.hash.outSize,this.minEntropy=t.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=Pr.toArray(t.entropy,t.entropyEnc||"hex"),r=Pr.toArray(t.nonce,t.nonceEnc||"hex"),i=Pr.toArray(t.pers,t.persEnc||"hex");za(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,r,i)}var hd=Di;Di.prototype._init=function(e,r,i){var s=e.concat(r).concat(i);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var n=0;n<this.V.length;n++)this.K[n]=0,this.V[n]=1;this._update(s),this._reseed=1,this.reseedInterval=281474976710656},Di.prototype._hmac=function(){return new hr.hmac(this.hash,this.K)},Di.prototype._update=function(e){var r=this._hmac().update(this.V).update([0]);e&&(r=r.update(e)),this.K=r.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())},Di.prototype.reseed=function(e,r,i,s){typeof r!="string"&&(s=i,i=r,r=null),e=Pr.toArray(e,r),i=Pr.toArray(i,s),za(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(i||[])),this._reseed=1},Di.prototype.generate=function(e,r,i,s){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof r!="string"&&(s=i,i=r,r=null),i&&(i=Pr.toArray(i,s||"hex"),this._update(i));for(var n=[];n.length<e;)this.V=this._hmac().update(this.V).digest(),n=n.concat(this.V);var o=n.slice(0,e);return this._update(i),this._reseed++,Pr.encode(o,r)};var qa=ur.assert;function kt(t,e){this.ec=t,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}var ja=kt;kt.fromPublic=function(e,r,i){return r instanceof kt?r:new kt(e,{pub:r,pubEnc:i})},kt.fromPrivate=function(e,r,i){return r instanceof kt?r:new kt(e,{priv:r,privEnc:i})},kt.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},kt.prototype.getPublic=function(e,r){return typeof e=="string"&&(r=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),r?this.pub.encode(r,e):this.pub},kt.prototype.getPrivate=function(e){return e==="hex"?this.priv.toString(16,2):this.priv},kt.prototype._importPrivate=function(e,r){this.priv=new me(e,r||16),this.priv=this.priv.umod(this.ec.curve.n)},kt.prototype._importPublic=function(e,r){if(e.x||e.y){this.ec.curve.type==="mont"?qa(e.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&qa(e.x&&e.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(e.x,e.y);return}this.pub=this.ec.curve.decodePoint(e,r)},kt.prototype.derive=function(e){return e.validate()||qa(e.validate(),"public point not validated"),e.mul(this.priv).getX()},kt.prototype.sign=function(e,r,i){return this.ec.sign(e,this,r,i)},kt.prototype.verify=function(e,r){return this.ec.verify(e,r,this)},kt.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var sm=ur.assert;function Qs(t,e){if(t instanceof Qs)return t;this._importDER(t,e)||(sm(t.r&&t.s,"Signature without r or s"),this.r=new me(t.r,16),this.s=new me(t.s,16),t.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=t.recoveryParam)}var eo=Qs;function om(){this.place=0}function Ka(t,e){var r=t[e.place++];if(!(r&128))return r;var i=r&15;if(i===0||i>4)return!1;for(var s=0,n=0,o=e.place;n<i;n++,o++)s<<=8,s|=t[o],s>>>=0;return s<=127?!1:(e.place=o,s)}function ud(t){for(var e=0,r=t.length-1;!t[e]&&!(t[e+1]&128)&&e<r;)e++;return e===0?t:t.slice(e)}Qs.prototype._importDER=function(e,r){e=ur.toArray(e,r);var i=new om;if(e[i.place++]!==48)return!1;var s=Ka(e,i);if(s===!1||s+i.place!==e.length||e[i.place++]!==2)return!1;var n=Ka(e,i);if(n===!1)return!1;var o=e.slice(i.place,n+i.place);if(i.place+=n,e[i.place++]!==2)return!1;var f=Ka(e,i);if(f===!1||e.length!==f+i.place)return!1;var d=e.slice(i.place,f+i.place);if(o[0]===0)if(o[1]&128)o=o.slice(1);else return!1;if(d[0]===0)if(d[1]&128)d=d.slice(1);else return!1;return this.r=new me(o),this.s=new me(d),this.recoveryParam=null,!0};function Ha(t,e){if(e<128){t.push(e);return}var r=1+(Math.log(e)/Math.LN2>>>3);for(t.push(r|128);--r;)t.push(e>>>(r<<3)&255);t.push(e)}Qs.prototype.toDER=function(e){var r=this.r.toArray(),i=this.s.toArray();for(r[0]&128&&(r=[0].concat(r)),i[0]&128&&(i=[0].concat(i)),r=ud(r),i=ud(i);!i[0]&&!(i[1]&128);)i=i.slice(1);var s=[2];Ha(s,r.length),s=s.concat(r),s.push(2),Ha(s,i.length);var n=s.concat(i),o=[48];return Ha(o,n.length),o=o.concat(n),ur.encode(o,e)};var am=function(){throw new Error("unsupported")},dd=ur.assert;function _r(t){if(!(this instanceof _r))return new _r(t);typeof t=="string"&&(dd(Object.prototype.hasOwnProperty.call(Zs,t),"Unknown curve "+t),t=Zs[t]),t instanceof Zs.PresetCurve&&(t={curve:t}),this.curve=t.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=t.curve.g,this.g.precompute(t.curve.n.bitLength()+1),this.hash=t.hash||t.curve.hash}var fm=_r;_r.prototype.keyPair=function(e){return new ja(this,e)},_r.prototype.keyFromPrivate=function(e,r){return ja.fromPrivate(this,e,r)},_r.prototype.keyFromPublic=function(e,r){return ja.fromPublic(this,e,r)},_r.prototype.genKeyPair=function(e){e||(e={});for(var r=new hd({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||am(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),i=this.n.byteLength(),s=this.n.sub(new me(2));;){var n=new me(r.generate(i));if(!(n.cmp(s)>0))return n.iaddn(1),this.keyFromPrivate(n)}},_r.prototype._truncateToN=function(e,r){var i=e.byteLength()*8-this.n.bitLength();return i>0&&(e=e.ushrn(i)),!r&&e.cmp(this.n)>=0?e.sub(this.n):e},_r.prototype.sign=function(e,r,i,s){typeof i=="object"&&(s=i,i=null),s||(s={}),r=this.keyFromPrivate(r,i),e=this._truncateToN(new me(e,16));for(var n=this.n.byteLength(),o=r.getPrivate().toArray("be",n),f=e.toArray("be",n),d=new hd({hash:this.hash,entropy:o,nonce:f,pers:s.pers,persEnc:s.persEnc||"utf8"}),u=this.n.sub(new me(1)),v=0;;v++){var w=s.k?s.k(v):new me(d.generate(this.n.byteLength()));if(w=this._truncateToN(w,!0),!(w.cmpn(1)<=0||w.cmp(u)>=0)){var S=this.g.mul(w);if(!S.isInfinity()){var I=S.getX(),M=I.umod(this.n);if(M.cmpn(0)!==0){var R=w.invm(this.n).mul(M.mul(r.getPrivate()).iadd(e));if(R=R.umod(this.n),R.cmpn(0)!==0){var N=(S.getY().isOdd()?1:0)|(I.cmp(M)!==0?2:0);return s.canonical&&R.cmp(this.nh)>0&&(R=this.n.sub(R),N^=1),new eo({r:M,s:R,recoveryParam:N})}}}}}},_r.prototype.verify=function(e,r,i,s){e=this._truncateToN(new me(e,16)),i=this.keyFromPublic(i,s),r=new eo(r,"hex");var n=r.r,o=r.s;if(n.cmpn(1)<0||n.cmp(this.n)>=0||o.cmpn(1)<0||o.cmp(this.n)>=0)return!1;var f=o.invm(this.n),d=f.mul(e).umod(this.n),u=f.mul(n).umod(this.n),v;return this.curve._maxwellTrick?(v=this.g.jmulAdd(d,i.getPublic(),u),v.isInfinity()?!1:v.eqXToP(n)):(v=this.g.mulAdd(d,i.getPublic(),u),v.isInfinity()?!1:v.getX().umod(this.n).cmp(n)===0)},_r.prototype.recoverPubKey=function(t,e,r,i){dd((3&r)===r,"The recovery param is more than two bits"),e=new eo(e,i);var s=this.n,n=new me(t),o=e.r,f=e.s,d=r&1,u=r>>1;if(o.cmp(this.curve.p.umod(this.curve.n))>=0&&u)throw new Error("Unable to find sencond key candinate");u?o=this.curve.pointFromX(o.add(this.curve.n),d):o=this.curve.pointFromX(o,d);var v=e.r.invm(s),w=s.sub(n).mul(v).umod(s),S=f.mul(v).umod(s);return this.g.mulAdd(w,o,S)},_r.prototype.getKeyRecoveryParam=function(t,e,r,i){if(e=new eo(e,i),e.recoveryParam!==null)return e.recoveryParam;for(var s=0;s<4;s++){var n;try{n=this.recoverPubKey(t,e,s)}catch{continue}if(n.eq(r))return s}throw new Error("Unable to find valid recovery factor")};var cm=Sn(function(t,e){var r=e;r.version="6.5.4",r.utils=ur,r.rand=function(){throw new Error("unsupported")},r.curve=Xs,r.curves=Zs,r.ec=fm,r.eddsa=null});cm.ec;const hm="signing-key/5.7.0";new xe(hm);const um="transactions/5.7.0";new xe(um);var ld;(function(t){t[t.legacy=0]="legacy",t[t.eip2930=1]="eip2930",t[t.eip1559=2]="eip1559"})(ld||(ld={}));function Va(t,e){e||(e=t.reduce((s,n)=>s+n.length,0));const r=lu(e);let i=0;for(const s of t)r.set(s,i),i+=s.length;return r}function Gt(t,e="utf8"){const r=vu[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):r.encoder.encode(t).substring(1)}var pd={},dm="elliptic",lm="6.6.1",pm="EC cryptography",bm="lib/elliptic.js",vm=["lib"],gm={lint:"eslint lib test","lint:fix":"npm run lint -- --fix",unit:"istanbul test _mocha --reporter=spec test/index.js",test:"npm run lint && npm run unit",version:"grunt dist && git add dist/"},ym={type:"git",url:"git@github.com:indutny/elliptic"},mm=["EC","Elliptic","curve","Cryptography"],wm="Fedor Indutny <fedor@indutny.com>",_m="MIT",Em={url:"https://github.com/indutny/elliptic/issues"},xm="https://github.com/indutny/elliptic",Sm={brfs:"^2.0.2",coveralls:"^3.1.0",eslint:"^7.6.0",grunt:"^1.2.1","grunt-browserify":"^5.3.0","grunt-cli":"^1.3.2","grunt-contrib-connect":"^3.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^5.0.0","grunt-mocha-istanbul":"^5.0.2","grunt-saucelabs":"^9.0.1",istanbul:"^0.4.5",mocha:"^8.0.1"},Mm={"bn.js":"^4.11.9",brorand:"^1.1.0","hash.js":"^1.0.0","hmac-drbg":"^1.0.1",inherits:"^2.0.4","minimalistic-assert":"^1.0.1","minimalistic-crypto-utils":"^1.0.1"},Im={name:dm,version:lm,description:pm,main:bm,files:vm,scripts:gm,repository:ym,keywords:mm,author:wm,license:_m,bugs:Em,homepage:xm,devDependencies:Sm,dependencies:Mm},dr={},Yr={exports:{}};(function(t){(function(e,r){function i(D,p){if(!D)throw new Error(p||"Assertion failed")}function s(D,p){D.super_=p;var l=function(){};l.prototype=p.prototype,D.prototype=new l,D.prototype.constructor=D}function n(D,p,l){if(n.isBN(D))return D;this.negative=0,this.words=null,this.length=0,this.red=null,D!==null&&((p==="le"||p==="be")&&(l=p,p=10),this._init(D||0,p||10,l||"be"))}typeof e=="object"?e.exports=n:r.BN=n,n.BN=n,n.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=Ra.Buffer}catch{}n.isBN=function(p){return p instanceof n?!0:p!==null&&typeof p=="object"&&p.constructor.wordSize===n.wordSize&&Array.isArray(p.words)},n.max=function(p,l){return p.cmp(l)>0?p:l},n.min=function(p,l){return p.cmp(l)<0?p:l},n.prototype._init=function(p,l,a){if(typeof p=="number")return this._initNumber(p,l,a);if(typeof p=="object")return this._initArray(p,l,a);l==="hex"&&(l=16),i(l===(l|0)&&l>=2&&l<=36),p=p.toString().replace(/\s+/g,"");var c=0;p[0]==="-"&&(c++,this.negative=1),c<p.length&&(l===16?this._parseHex(p,c,a):(this._parseBase(p,l,c),a==="le"&&this._initArray(this.toArray(),l,a)))},n.prototype._initNumber=function(p,l,a){p<0&&(this.negative=1,p=-p),p<67108864?(this.words=[p&67108863],this.length=1):p<4503599627370496?(this.words=[p&67108863,p/67108864&67108863],this.length=2):(i(p<9007199254740992),this.words=[p&67108863,p/67108864&67108863,1],this.length=3),a==="le"&&this._initArray(this.toArray(),l,a)},n.prototype._initArray=function(p,l,a){if(i(typeof p.length=="number"),p.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(p.length/3),this.words=new Array(this.length);for(var c=0;c<this.length;c++)this.words[c]=0;var b,_,x=0;if(a==="be")for(c=p.length-1,b=0;c>=0;c-=3)_=p[c]|p[c-1]<<8|p[c-2]<<16,this.words[b]|=_<<x&67108863,this.words[b+1]=_>>>26-x&67108863,x+=24,x>=26&&(x-=26,b++);else if(a==="le")for(c=0,b=0;c<p.length;c+=3)_=p[c]|p[c+1]<<8|p[c+2]<<16,this.words[b]|=_<<x&67108863,this.words[b+1]=_>>>26-x&67108863,x+=24,x>=26&&(x-=26,b++);return this.strip()};function f(D,p){var l=D.charCodeAt(p);return l>=65&&l<=70?l-55:l>=97&&l<=102?l-87:l-48&15}function d(D,p,l){var a=f(D,l);return l-1>=p&&(a|=f(D,l-1)<<4),a}n.prototype._parseHex=function(p,l,a){this.length=Math.ceil((p.length-l)/6),this.words=new Array(this.length);for(var c=0;c<this.length;c++)this.words[c]=0;var b=0,_=0,x;if(a==="be")for(c=p.length-1;c>=l;c-=2)x=d(p,l,c)<<b,this.words[_]|=x&67108863,b>=18?(b-=18,_+=1,this.words[_]|=x>>>26):b+=8;else{var m=p.length-l;for(c=m%2===0?l+1:l;c<p.length;c+=2)x=d(p,l,c)<<b,this.words[_]|=x&67108863,b>=18?(b-=18,_+=1,this.words[_]|=x>>>26):b+=8}this.strip()};function u(D,p,l,a){for(var c=0,b=Math.min(D.length,l),_=p;_<b;_++){var x=D.charCodeAt(_)-48;c*=a,x>=49?c+=x-49+10:x>=17?c+=x-17+10:c+=x}return c}n.prototype._parseBase=function(p,l,a){this.words=[0],this.length=1;for(var c=0,b=1;b<=67108863;b*=l)c++;c--,b=b/l|0;for(var _=p.length-a,x=_%c,m=Math.min(_,_-x)+a,h=0,y=a;y<m;y+=c)h=u(p,y,y+c,l),this.imuln(b),this.words[0]+h<67108864?this.words[0]+=h:this._iaddn(h);if(x!==0){var g=1;for(h=u(p,y,p.length,l),y=0;y<x;y++)g*=l;this.imuln(g),this.words[0]+h<67108864?this.words[0]+=h:this._iaddn(h)}this.strip()},n.prototype.copy=function(p){p.words=new Array(this.length);for(var l=0;l<this.length;l++)p.words[l]=this.words[l];p.length=this.length,p.negative=this.negative,p.red=this.red},n.prototype.clone=function(){var p=new n(null);return this.copy(p),p},n.prototype._expand=function(p){for(;this.length<p;)this.words[this.length++]=0;return this},n.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},n.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},n.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var v=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],w=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],S=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];n.prototype.toString=function(p,l){p=p||10,l=l|0||1;var a;if(p===16||p==="hex"){a="";for(var c=0,b=0,_=0;_<this.length;_++){var x=this.words[_],m=((x<<c|b)&16777215).toString(16);b=x>>>24-c&16777215,c+=2,c>=26&&(c-=26,_--),b!==0||_!==this.length-1?a=v[6-m.length]+m+a:a=m+a}for(b!==0&&(a=b.toString(16)+a);a.length%l!==0;)a="0"+a;return this.negative!==0&&(a="-"+a),a}if(p===(p|0)&&p>=2&&p<=36){var h=w[p],y=S[p];a="";var g=this.clone();for(g.negative=0;!g.isZero();){var A=g.modn(y).toString(p);g=g.idivn(y),g.isZero()?a=A+a:a=v[h-A.length]+A+a}for(this.isZero()&&(a="0"+a);a.length%l!==0;)a="0"+a;return this.negative!==0&&(a="-"+a),a}i(!1,"Base should be between 2 and 36")},n.prototype.toNumber=function(){var p=this.words[0];return this.length===2?p+=this.words[1]*67108864:this.length===3&&this.words[2]===1?p+=4503599627370496+this.words[1]*67108864:this.length>2&&i(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-p:p},n.prototype.toJSON=function(){return this.toString(16)},n.prototype.toBuffer=function(p,l){return i(typeof o<"u"),this.toArrayLike(o,p,l)},n.prototype.toArray=function(p,l){return this.toArrayLike(Array,p,l)},n.prototype.toArrayLike=function(p,l,a){var c=this.byteLength(),b=a||Math.max(1,c);i(c<=b,"byte array longer than desired length"),i(b>0,"Requested array length <= 0"),this.strip();var _=l==="le",x=new p(b),m,h,y=this.clone();if(_){for(h=0;!y.isZero();h++)m=y.andln(255),y.iushrn(8),x[h]=m;for(;h<b;h++)x[h]=0}else{for(h=0;h<b-c;h++)x[h]=0;for(h=0;!y.isZero();h++)m=y.andln(255),y.iushrn(8),x[b-h-1]=m}return x},Math.clz32?n.prototype._countBits=function(p){return 32-Math.clz32(p)}:n.prototype._countBits=function(p){var l=p,a=0;return l>=4096&&(a+=13,l>>>=13),l>=64&&(a+=7,l>>>=7),l>=8&&(a+=4,l>>>=4),l>=2&&(a+=2,l>>>=2),a+l},n.prototype._zeroBits=function(p){if(p===0)return 26;var l=p,a=0;return(l&8191)===0&&(a+=13,l>>>=13),(l&127)===0&&(a+=7,l>>>=7),(l&15)===0&&(a+=4,l>>>=4),(l&3)===0&&(a+=2,l>>>=2),(l&1)===0&&a++,a},n.prototype.bitLength=function(){var p=this.words[this.length-1],l=this._countBits(p);return(this.length-1)*26+l};function I(D){for(var p=new Array(D.bitLength()),l=0;l<p.length;l++){var a=l/26|0,c=l%26;p[l]=(D.words[a]&1<<c)>>>c}return p}n.prototype.zeroBits=function(){if(this.isZero())return 0;for(var p=0,l=0;l<this.length;l++){var a=this._zeroBits(this.words[l]);if(p+=a,a!==26)break}return p},n.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},n.prototype.toTwos=function(p){return this.negative!==0?this.abs().inotn(p).iaddn(1):this.clone()},n.prototype.fromTwos=function(p){return this.testn(p-1)?this.notn(p).iaddn(1).ineg():this.clone()},n.prototype.isNeg=function(){return this.negative!==0},n.prototype.neg=function(){return this.clone().ineg()},n.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},n.prototype.iuor=function(p){for(;this.length<p.length;)this.words[this.length++]=0;for(var l=0;l<p.length;l++)this.words[l]=this.words[l]|p.words[l];return this.strip()},n.prototype.ior=function(p){return i((this.negative|p.negative)===0),this.iuor(p)},n.prototype.or=function(p){return this.length>p.length?this.clone().ior(p):p.clone().ior(this)},n.prototype.uor=function(p){return this.length>p.length?this.clone().iuor(p):p.clone().iuor(this)},n.prototype.iuand=function(p){var l;this.length>p.length?l=p:l=this;for(var a=0;a<l.length;a++)this.words[a]=this.words[a]&p.words[a];return this.length=l.length,this.strip()},n.prototype.iand=function(p){return i((this.negative|p.negative)===0),this.iuand(p)},n.prototype.and=function(p){return this.length>p.length?this.clone().iand(p):p.clone().iand(this)},n.prototype.uand=function(p){return this.length>p.length?this.clone().iuand(p):p.clone().iuand(this)},n.prototype.iuxor=function(p){var l,a;this.length>p.length?(l=this,a=p):(l=p,a=this);for(var c=0;c<a.length;c++)this.words[c]=l.words[c]^a.words[c];if(this!==l)for(;c<l.length;c++)this.words[c]=l.words[c];return this.length=l.length,this.strip()},n.prototype.ixor=function(p){return i((this.negative|p.negative)===0),this.iuxor(p)},n.prototype.xor=function(p){return this.length>p.length?this.clone().ixor(p):p.clone().ixor(this)},n.prototype.uxor=function(p){return this.length>p.length?this.clone().iuxor(p):p.clone().iuxor(this)},n.prototype.inotn=function(p){i(typeof p=="number"&&p>=0);var l=Math.ceil(p/26)|0,a=p%26;this._expand(l),a>0&&l--;for(var c=0;c<l;c++)this.words[c]=~this.words[c]&67108863;return a>0&&(this.words[c]=~this.words[c]&67108863>>26-a),this.strip()},n.prototype.notn=function(p){return this.clone().inotn(p)},n.prototype.setn=function(p,l){i(typeof p=="number"&&p>=0);var a=p/26|0,c=p%26;return this._expand(a+1),l?this.words[a]=this.words[a]|1<<c:this.words[a]=this.words[a]&~(1<<c),this.strip()},n.prototype.iadd=function(p){var l;if(this.negative!==0&&p.negative===0)return this.negative=0,l=this.isub(p),this.negative^=1,this._normSign();if(this.negative===0&&p.negative!==0)return p.negative=0,l=this.isub(p),p.negative=1,l._normSign();var a,c;this.length>p.length?(a=this,c=p):(a=p,c=this);for(var b=0,_=0;_<c.length;_++)l=(a.words[_]|0)+(c.words[_]|0)+b,this.words[_]=l&67108863,b=l>>>26;for(;b!==0&&_<a.length;_++)l=(a.words[_]|0)+b,this.words[_]=l&67108863,b=l>>>26;if(this.length=a.length,b!==0)this.words[this.length]=b,this.length++;else if(a!==this)for(;_<a.length;_++)this.words[_]=a.words[_];return this},n.prototype.add=function(p){var l;return p.negative!==0&&this.negative===0?(p.negative=0,l=this.sub(p),p.negative^=1,l):p.negative===0&&this.negative!==0?(this.negative=0,l=p.sub(this),this.negative=1,l):this.length>p.length?this.clone().iadd(p):p.clone().iadd(this)},n.prototype.isub=function(p){if(p.negative!==0){p.negative=0;var l=this.iadd(p);return p.negative=1,l._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(p),this.negative=1,this._normSign();var a=this.cmp(p);if(a===0)return this.negative=0,this.length=1,this.words[0]=0,this;var c,b;a>0?(c=this,b=p):(c=p,b=this);for(var _=0,x=0;x<b.length;x++)l=(c.words[x]|0)-(b.words[x]|0)+_,_=l>>26,this.words[x]=l&67108863;for(;_!==0&&x<c.length;x++)l=(c.words[x]|0)+_,_=l>>26,this.words[x]=l&67108863;if(_===0&&x<c.length&&c!==this)for(;x<c.length;x++)this.words[x]=c.words[x];return this.length=Math.max(this.length,x),c!==this&&(this.negative=1),this.strip()},n.prototype.sub=function(p){return this.clone().isub(p)};function M(D,p,l){l.negative=p.negative^D.negative;var a=D.length+p.length|0;l.length=a,a=a-1|0;var c=D.words[0]|0,b=p.words[0]|0,_=c*b,x=_&67108863,m=_/67108864|0;l.words[0]=x;for(var h=1;h<a;h++){for(var y=m>>>26,g=m&67108863,A=Math.min(h,p.length-1),U=Math.max(0,h-D.length+1);U<=A;U++){var E=h-U|0;c=D.words[E]|0,b=p.words[U]|0,_=c*b+g,y+=_/67108864|0,g=_&67108863}l.words[h]=g|0,m=y|0}return m!==0?l.words[h]=m|0:l.length--,l.strip()}var R=function(p,l,a){var c=p.words,b=l.words,_=a.words,x=0,m,h,y,g=c[0]|0,A=g&8191,U=g>>>13,E=c[1]|0,T=E&8191,L=E>>>13,$=c[2]|0,z=$&8191,W=$>>>13,X=c[3]|0,K=X&8191,ce=X>>>13,Z=c[4]|0,Q=Z&8191,Ue=Z>>>13,ze=c[5]|0,he=ze&8191,Re=ze>>>13,Te=c[6]|0,oe=Te&8191,Ne=Te>>>13,Pe=c[7]|0,fe=Pe&8191,Ce=Pe>>>13,Be=c[8]|0,se=Be&8191,De=Be>>>13,Le=c[9]|0,re=Le&8191,Ve=Le>>>13,We=b[0]|0,pe=We&8191,Ge=We>>>13,Fe=b[1]|0,de=Fe&8191,Ye=Fe>>>13,Qe=b[2]|0,ne=Qe&8191,Je=Qe>>>13,et=b[3]|0,be=et&8191,ke=et>>>13,Oe=b[4]|0,ue=Oe&8191,qe=Oe>>>13,je=b[5]|0,ae=je&8191,tt=je>>>13,rt=b[6]|0,ve=rt&8191,it=rt>>>13,nt=b[7]|0,le=nt&8191,Ke=nt>>>13,Ie=b[8]|0,ge=Ie&8191,st=Ie>>>13,ot=b[9]|0,ye=ot&8191,at=ot>>>13;a.negative=p.negative^l.negative,a.length=19,m=Math.imul(A,pe),h=Math.imul(A,Ge),h=h+Math.imul(U,pe)|0,y=Math.imul(U,Ge);var Ee=(x+m|0)+((h&8191)<<13)|0;x=(y+(h>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,m=Math.imul(T,pe),h=Math.imul(T,Ge),h=h+Math.imul(L,pe)|0,y=Math.imul(L,Ge),m=m+Math.imul(A,de)|0,h=h+Math.imul(A,Ye)|0,h=h+Math.imul(U,de)|0,y=y+Math.imul(U,Ye)|0;var Xe=(x+m|0)+((h&8191)<<13)|0;x=(y+(h>>>13)|0)+(Xe>>>26)|0,Xe&=67108863,m=Math.imul(z,pe),h=Math.imul(z,Ge),h=h+Math.imul(W,pe)|0,y=Math.imul(W,Ge),m=m+Math.imul(T,de)|0,h=h+Math.imul(T,Ye)|0,h=h+Math.imul(L,de)|0,y=y+Math.imul(L,Ye)|0,m=m+Math.imul(A,ne)|0,h=h+Math.imul(A,Je)|0,h=h+Math.imul(U,ne)|0,y=y+Math.imul(U,Je)|0;var ir=(x+m|0)+((h&8191)<<13)|0;x=(y+(h>>>13)|0)+(ir>>>26)|0,ir&=67108863,m=Math.imul(K,pe),h=Math.imul(K,Ge),h=h+Math.imul(ce,pe)|0,y=Math.imul(ce,Ge),m=m+Math.imul(z,de)|0,h=h+Math.imul(z,Ye)|0,h=h+Math.imul(W,de)|0,y=y+Math.imul(W,Ye)|0,m=m+Math.imul(T,ne)|0,h=h+Math.imul(T,Je)|0,h=h+Math.imul(L,ne)|0,y=y+Math.imul(L,Je)|0,m=m+Math.imul(A,be)|0,h=h+Math.imul(A,ke)|0,h=h+Math.imul(U,be)|0,y=y+Math.imul(U,ke)|0;var nr=(x+m|0)+((h&8191)<<13)|0;x=(y+(h>>>13)|0)+(nr>>>26)|0,nr&=67108863,m=Math.imul(Q,pe),h=Math.imul(Q,Ge),h=h+Math.imul(Ue,pe)|0,y=Math.imul(Ue,Ge),m=m+Math.imul(K,de)|0,h=h+Math.imul(K,Ye)|0,h=h+Math.imul(ce,de)|0,y=y+Math.imul(ce,Ye)|0,m=m+Math.imul(z,ne)|0,h=h+Math.imul(z,Je)|0,h=h+Math.imul(W,ne)|0,y=y+Math.imul(W,Je)|0,m=m+Math.imul(T,be)|0,h=h+Math.imul(T,ke)|0,h=h+Math.imul(L,be)|0,y=y+Math.imul(L,ke)|0,m=m+Math.imul(A,ue)|0,h=h+Math.imul(A,qe)|0,h=h+Math.imul(U,ue)|0,y=y+Math.imul(U,qe)|0;var sr=(x+m|0)+((h&8191)<<13)|0;x=(y+(h>>>13)|0)+(sr>>>26)|0,sr&=67108863,m=Math.imul(he,pe),h=Math.imul(he,Ge),h=h+Math.imul(Re,pe)|0,y=Math.imul(Re,Ge),m=m+Math.imul(Q,de)|0,h=h+Math.imul(Q,Ye)|0,h=h+Math.imul(Ue,de)|0,y=y+Math.imul(Ue,Ye)|0,m=m+Math.imul(K,ne)|0,h=h+Math.imul(K,Je)|0,h=h+Math.imul(ce,ne)|0,y=y+Math.imul(ce,Je)|0,m=m+Math.imul(z,be)|0,h=h+Math.imul(z,ke)|0,h=h+Math.imul(W,be)|0,y=y+Math.imul(W,ke)|0,m=m+Math.imul(T,ue)|0,h=h+Math.imul(T,qe)|0,h=h+Math.imul(L,ue)|0,y=y+Math.imul(L,qe)|0,m=m+Math.imul(A,ae)|0,h=h+Math.imul(A,tt)|0,h=h+Math.imul(U,ae)|0,y=y+Math.imul(U,tt)|0;var or=(x+m|0)+((h&8191)<<13)|0;x=(y+(h>>>13)|0)+(or>>>26)|0,or&=67108863,m=Math.imul(oe,pe),h=Math.imul(oe,Ge),h=h+Math.imul(Ne,pe)|0,y=Math.imul(Ne,Ge),m=m+Math.imul(he,de)|0,h=h+Math.imul(he,Ye)|0,h=h+Math.imul(Re,de)|0,y=y+Math.imul(Re,Ye)|0,m=m+Math.imul(Q,ne)|0,h=h+Math.imul(Q,Je)|0,h=h+Math.imul(Ue,ne)|0,y=y+Math.imul(Ue,Je)|0,m=m+Math.imul(K,be)|0,h=h+Math.imul(K,ke)|0,h=h+Math.imul(ce,be)|0,y=y+Math.imul(ce,ke)|0,m=m+Math.imul(z,ue)|0,h=h+Math.imul(z,qe)|0,h=h+Math.imul(W,ue)|0,y=y+Math.imul(W,qe)|0,m=m+Math.imul(T,ae)|0,h=h+Math.imul(T,tt)|0,h=h+Math.imul(L,ae)|0,y=y+Math.imul(L,tt)|0,m=m+Math.imul(A,ve)|0,h=h+Math.imul(A,it)|0,h=h+Math.imul(U,ve)|0,y=y+Math.imul(U,it)|0;var wt=(x+m|0)+((h&8191)<<13)|0;x=(y+(h>>>13)|0)+(wt>>>26)|0,wt&=67108863,m=Math.imul(fe,pe),h=Math.imul(fe,Ge),h=h+Math.imul(Ce,pe)|0,y=Math.imul(Ce,Ge),m=m+Math.imul(oe,de)|0,h=h+Math.imul(oe,Ye)|0,h=h+Math.imul(Ne,de)|0,y=y+Math.imul(Ne,Ye)|0,m=m+Math.imul(he,ne)|0,h=h+Math.imul(he,Je)|0,h=h+Math.imul(Re,ne)|0,y=y+Math.imul(Re,Je)|0,m=m+Math.imul(Q,be)|0,h=h+Math.imul(Q,ke)|0,h=h+Math.imul(Ue,be)|0,y=y+Math.imul(Ue,ke)|0,m=m+Math.imul(K,ue)|0,h=h+Math.imul(K,qe)|0,h=h+Math.imul(ce,ue)|0,y=y+Math.imul(ce,qe)|0,m=m+Math.imul(z,ae)|0,h=h+Math.imul(z,tt)|0,h=h+Math.imul(W,ae)|0,y=y+Math.imul(W,tt)|0,m=m+Math.imul(T,ve)|0,h=h+Math.imul(T,it)|0,h=h+Math.imul(L,ve)|0,y=y+Math.imul(L,it)|0,m=m+Math.imul(A,le)|0,h=h+Math.imul(A,Ke)|0,h=h+Math.imul(U,le)|0,y=y+Math.imul(U,Ke)|0;var ui=(x+m|0)+((h&8191)<<13)|0;x=(y+(h>>>13)|0)+(ui>>>26)|0,ui&=67108863,m=Math.imul(se,pe),h=Math.imul(se,Ge),h=h+Math.imul(De,pe)|0,y=Math.imul(De,Ge),m=m+Math.imul(fe,de)|0,h=h+Math.imul(fe,Ye)|0,h=h+Math.imul(Ce,de)|0,y=y+Math.imul(Ce,Ye)|0,m=m+Math.imul(oe,ne)|0,h=h+Math.imul(oe,Je)|0,h=h+Math.imul(Ne,ne)|0,y=y+Math.imul(Ne,Je)|0,m=m+Math.imul(he,be)|0,h=h+Math.imul(he,ke)|0,h=h+Math.imul(Re,be)|0,y=y+Math.imul(Re,ke)|0,m=m+Math.imul(Q,ue)|0,h=h+Math.imul(Q,qe)|0,h=h+Math.imul(Ue,ue)|0,y=y+Math.imul(Ue,qe)|0,m=m+Math.imul(K,ae)|0,h=h+Math.imul(K,tt)|0,h=h+Math.imul(ce,ae)|0,y=y+Math.imul(ce,tt)|0,m=m+Math.imul(z,ve)|0,h=h+Math.imul(z,it)|0,h=h+Math.imul(W,ve)|0,y=y+Math.imul(W,it)|0,m=m+Math.imul(T,le)|0,h=h+Math.imul(T,Ke)|0,h=h+Math.imul(L,le)|0,y=y+Math.imul(L,Ke)|0,m=m+Math.imul(A,ge)|0,h=h+Math.imul(A,st)|0,h=h+Math.imul(U,ge)|0,y=y+Math.imul(U,st)|0;var di=(x+m|0)+((h&8191)<<13)|0;x=(y+(h>>>13)|0)+(di>>>26)|0,di&=67108863,m=Math.imul(re,pe),h=Math.imul(re,Ge),h=h+Math.imul(Ve,pe)|0,y=Math.imul(Ve,Ge),m=m+Math.imul(se,de)|0,h=h+Math.imul(se,Ye)|0,h=h+Math.imul(De,de)|0,y=y+Math.imul(De,Ye)|0,m=m+Math.imul(fe,ne)|0,h=h+Math.imul(fe,Je)|0,h=h+Math.imul(Ce,ne)|0,y=y+Math.imul(Ce,Je)|0,m=m+Math.imul(oe,be)|0,h=h+Math.imul(oe,ke)|0,h=h+Math.imul(Ne,be)|0,y=y+Math.imul(Ne,ke)|0,m=m+Math.imul(he,ue)|0,h=h+Math.imul(he,qe)|0,h=h+Math.imul(Re,ue)|0,y=y+Math.imul(Re,qe)|0,m=m+Math.imul(Q,ae)|0,h=h+Math.imul(Q,tt)|0,h=h+Math.imul(Ue,ae)|0,y=y+Math.imul(Ue,tt)|0,m=m+Math.imul(K,ve)|0,h=h+Math.imul(K,it)|0,h=h+Math.imul(ce,ve)|0,y=y+Math.imul(ce,it)|0,m=m+Math.imul(z,le)|0,h=h+Math.imul(z,Ke)|0,h=h+Math.imul(W,le)|0,y=y+Math.imul(W,Ke)|0,m=m+Math.imul(T,ge)|0,h=h+Math.imul(T,st)|0,h=h+Math.imul(L,ge)|0,y=y+Math.imul(L,st)|0,m=m+Math.imul(A,ye)|0,h=h+Math.imul(A,at)|0,h=h+Math.imul(U,ye)|0,y=y+Math.imul(U,at)|0;var li=(x+m|0)+((h&8191)<<13)|0;x=(y+(h>>>13)|0)+(li>>>26)|0,li&=67108863,m=Math.imul(re,de),h=Math.imul(re,Ye),h=h+Math.imul(Ve,de)|0,y=Math.imul(Ve,Ye),m=m+Math.imul(se,ne)|0,h=h+Math.imul(se,Je)|0,h=h+Math.imul(De,ne)|0,y=y+Math.imul(De,Je)|0,m=m+Math.imul(fe,be)|0,h=h+Math.imul(fe,ke)|0,h=h+Math.imul(Ce,be)|0,y=y+Math.imul(Ce,ke)|0,m=m+Math.imul(oe,ue)|0,h=h+Math.imul(oe,qe)|0,h=h+Math.imul(Ne,ue)|0,y=y+Math.imul(Ne,qe)|0,m=m+Math.imul(he,ae)|0,h=h+Math.imul(he,tt)|0,h=h+Math.imul(Re,ae)|0,y=y+Math.imul(Re,tt)|0,m=m+Math.imul(Q,ve)|0,h=h+Math.imul(Q,it)|0,h=h+Math.imul(Ue,ve)|0,y=y+Math.imul(Ue,it)|0,m=m+Math.imul(K,le)|0,h=h+Math.imul(K,Ke)|0,h=h+Math.imul(ce,le)|0,y=y+Math.imul(ce,Ke)|0,m=m+Math.imul(z,ge)|0,h=h+Math.imul(z,st)|0,h=h+Math.imul(W,ge)|0,y=y+Math.imul(W,st)|0,m=m+Math.imul(T,ye)|0,h=h+Math.imul(T,at)|0,h=h+Math.imul(L,ye)|0,y=y+Math.imul(L,at)|0;var pi=(x+m|0)+((h&8191)<<13)|0;x=(y+(h>>>13)|0)+(pi>>>26)|0,pi&=67108863,m=Math.imul(re,ne),h=Math.imul(re,Je),h=h+Math.imul(Ve,ne)|0,y=Math.imul(Ve,Je),m=m+Math.imul(se,be)|0,h=h+Math.imul(se,ke)|0,h=h+Math.imul(De,be)|0,y=y+Math.imul(De,ke)|0,m=m+Math.imul(fe,ue)|0,h=h+Math.imul(fe,qe)|0,h=h+Math.imul(Ce,ue)|0,y=y+Math.imul(Ce,qe)|0,m=m+Math.imul(oe,ae)|0,h=h+Math.imul(oe,tt)|0,h=h+Math.imul(Ne,ae)|0,y=y+Math.imul(Ne,tt)|0,m=m+Math.imul(he,ve)|0,h=h+Math.imul(he,it)|0,h=h+Math.imul(Re,ve)|0,y=y+Math.imul(Re,it)|0,m=m+Math.imul(Q,le)|0,h=h+Math.imul(Q,Ke)|0,h=h+Math.imul(Ue,le)|0,y=y+Math.imul(Ue,Ke)|0,m=m+Math.imul(K,ge)|0,h=h+Math.imul(K,st)|0,h=h+Math.imul(ce,ge)|0,y=y+Math.imul(ce,st)|0,m=m+Math.imul(z,ye)|0,h=h+Math.imul(z,at)|0,h=h+Math.imul(W,ye)|0,y=y+Math.imul(W,at)|0;var bi=(x+m|0)+((h&8191)<<13)|0;x=(y+(h>>>13)|0)+(bi>>>26)|0,bi&=67108863,m=Math.imul(re,be),h=Math.imul(re,ke),h=h+Math.imul(Ve,be)|0,y=Math.imul(Ve,ke),m=m+Math.imul(se,ue)|0,h=h+Math.imul(se,qe)|0,h=h+Math.imul(De,ue)|0,y=y+Math.imul(De,qe)|0,m=m+Math.imul(fe,ae)|0,h=h+Math.imul(fe,tt)|0,h=h+Math.imul(Ce,ae)|0,y=y+Math.imul(Ce,tt)|0,m=m+Math.imul(oe,ve)|0,h=h+Math.imul(oe,it)|0,h=h+Math.imul(Ne,ve)|0,y=y+Math.imul(Ne,it)|0,m=m+Math.imul(he,le)|0,h=h+Math.imul(he,Ke)|0,h=h+Math.imul(Re,le)|0,y=y+Math.imul(Re,Ke)|0,m=m+Math.imul(Q,ge)|0,h=h+Math.imul(Q,st)|0,h=h+Math.imul(Ue,ge)|0,y=y+Math.imul(Ue,st)|0,m=m+Math.imul(K,ye)|0,h=h+Math.imul(K,at)|0,h=h+Math.imul(ce,ye)|0,y=y+Math.imul(ce,at)|0;var Mr=(x+m|0)+((h&8191)<<13)|0;x=(y+(h>>>13)|0)+(Mr>>>26)|0,Mr&=67108863,m=Math.imul(re,ue),h=Math.imul(re,qe),h=h+Math.imul(Ve,ue)|0,y=Math.imul(Ve,qe),m=m+Math.imul(se,ae)|0,h=h+Math.imul(se,tt)|0,h=h+Math.imul(De,ae)|0,y=y+Math.imul(De,tt)|0,m=m+Math.imul(fe,ve)|0,h=h+Math.imul(fe,it)|0,h=h+Math.imul(Ce,ve)|0,y=y+Math.imul(Ce,it)|0,m=m+Math.imul(oe,le)|0,h=h+Math.imul(oe,Ke)|0,h=h+Math.imul(Ne,le)|0,y=y+Math.imul(Ne,Ke)|0,m=m+Math.imul(he,ge)|0,h=h+Math.imul(he,st)|0,h=h+Math.imul(Re,ge)|0,y=y+Math.imul(Re,st)|0,m=m+Math.imul(Q,ye)|0,h=h+Math.imul(Q,at)|0,h=h+Math.imul(Ue,ye)|0,y=y+Math.imul(Ue,at)|0;var vi=(x+m|0)+((h&8191)<<13)|0;x=(y+(h>>>13)|0)+(vi>>>26)|0,vi&=67108863,m=Math.imul(re,ae),h=Math.imul(re,tt),h=h+Math.imul(Ve,ae)|0,y=Math.imul(Ve,tt),m=m+Math.imul(se,ve)|0,h=h+Math.imul(se,it)|0,h=h+Math.imul(De,ve)|0,y=y+Math.imul(De,it)|0,m=m+Math.imul(fe,le)|0,h=h+Math.imul(fe,Ke)|0,h=h+Math.imul(Ce,le)|0,y=y+Math.imul(Ce,Ke)|0,m=m+Math.imul(oe,ge)|0,h=h+Math.imul(oe,st)|0,h=h+Math.imul(Ne,ge)|0,y=y+Math.imul(Ne,st)|0,m=m+Math.imul(he,ye)|0,h=h+Math.imul(he,at)|0,h=h+Math.imul(Re,ye)|0,y=y+Math.imul(Re,at)|0;var gi=(x+m|0)+((h&8191)<<13)|0;x=(y+(h>>>13)|0)+(gi>>>26)|0,gi&=67108863,m=Math.imul(re,ve),h=Math.imul(re,it),h=h+Math.imul(Ve,ve)|0,y=Math.imul(Ve,it),m=m+Math.imul(se,le)|0,h=h+Math.imul(se,Ke)|0,h=h+Math.imul(De,le)|0,y=y+Math.imul(De,Ke)|0,m=m+Math.imul(fe,ge)|0,h=h+Math.imul(fe,st)|0,h=h+Math.imul(Ce,ge)|0,y=y+Math.imul(Ce,st)|0,m=m+Math.imul(oe,ye)|0,h=h+Math.imul(oe,at)|0,h=h+Math.imul(Ne,ye)|0,y=y+Math.imul(Ne,at)|0;var Ht=(x+m|0)+((h&8191)<<13)|0;x=(y+(h>>>13)|0)+(Ht>>>26)|0,Ht&=67108863,m=Math.imul(re,le),h=Math.imul(re,Ke),h=h+Math.imul(Ve,le)|0,y=Math.imul(Ve,Ke),m=m+Math.imul(se,ge)|0,h=h+Math.imul(se,st)|0,h=h+Math.imul(De,ge)|0,y=y+Math.imul(De,st)|0,m=m+Math.imul(fe,ye)|0,h=h+Math.imul(fe,at)|0,h=h+Math.imul(Ce,ye)|0,y=y+Math.imul(Ce,at)|0;var yi=(x+m|0)+((h&8191)<<13)|0;x=(y+(h>>>13)|0)+(yi>>>26)|0,yi&=67108863,m=Math.imul(re,ge),h=Math.imul(re,st),h=h+Math.imul(Ve,ge)|0,y=Math.imul(Ve,st),m=m+Math.imul(se,ye)|0,h=h+Math.imul(se,at)|0,h=h+Math.imul(De,ye)|0,y=y+Math.imul(De,at)|0;var mi=(x+m|0)+((h&8191)<<13)|0;x=(y+(h>>>13)|0)+(mi>>>26)|0,mi&=67108863,m=Math.imul(re,ye),h=Math.imul(re,at),h=h+Math.imul(Ve,ye)|0,y=Math.imul(Ve,at);var wi=(x+m|0)+((h&8191)<<13)|0;return x=(y+(h>>>13)|0)+(wi>>>26)|0,wi&=67108863,_[0]=Ee,_[1]=Xe,_[2]=ir,_[3]=nr,_[4]=sr,_[5]=or,_[6]=wt,_[7]=ui,_[8]=di,_[9]=li,_[10]=pi,_[11]=bi,_[12]=Mr,_[13]=vi,_[14]=gi,_[15]=Ht,_[16]=yi,_[17]=mi,_[18]=wi,x!==0&&(_[19]=x,a.length++),a};Math.imul||(R=M);function N(D,p,l){l.negative=p.negative^D.negative,l.length=D.length+p.length;for(var a=0,c=0,b=0;b<l.length-1;b++){var _=c;c=0;for(var x=a&67108863,m=Math.min(b,p.length-1),h=Math.max(0,b-D.length+1);h<=m;h++){var y=b-h,g=D.words[y]|0,A=p.words[h]|0,U=g*A,E=U&67108863;_=_+(U/67108864|0)|0,E=E+x|0,x=E&67108863,_=_+(E>>>26)|0,c+=_>>>26,_&=67108863}l.words[b]=x,a=_,_=c}return a!==0?l.words[b]=a:l.length--,l.strip()}function C(D,p,l){var a=new B;return a.mulp(D,p,l)}n.prototype.mulTo=function(p,l){var a,c=this.length+p.length;return this.length===10&&p.length===10?a=R(this,p,l):c<63?a=M(this,p,l):c<1024?a=N(this,p,l):a=C(this,p,l),a};function B(D,p){this.x=D,this.y=p}B.prototype.makeRBT=function(p){for(var l=new Array(p),a=n.prototype._countBits(p)-1,c=0;c<p;c++)l[c]=this.revBin(c,a,p);return l},B.prototype.revBin=function(p,l,a){if(p===0||p===a-1)return p;for(var c=0,b=0;b<l;b++)c|=(p&1)<<l-b-1,p>>=1;return c},B.prototype.permute=function(p,l,a,c,b,_){for(var x=0;x<_;x++)c[x]=l[p[x]],b[x]=a[p[x]]},B.prototype.transform=function(p,l,a,c,b,_){this.permute(_,p,l,a,c,b);for(var x=1;x<b;x<<=1)for(var m=x<<1,h=Math.cos(2*Math.PI/m),y=Math.sin(2*Math.PI/m),g=0;g<b;g+=m)for(var A=h,U=y,E=0;E<x;E++){var T=a[g+E],L=c[g+E],$=a[g+E+x],z=c[g+E+x],W=A*$-U*z;z=A*z+U*$,$=W,a[g+E]=T+$,c[g+E]=L+z,a[g+E+x]=T-$,c[g+E+x]=L-z,E!==m&&(W=h*A-y*U,U=h*U+y*A,A=W)}},B.prototype.guessLen13b=function(p,l){var a=Math.max(l,p)|1,c=a&1,b=0;for(a=a/2|0;a;a=a>>>1)b++;return 1<<b+1+c},B.prototype.conjugate=function(p,l,a){if(!(a<=1))for(var c=0;c<a/2;c++){var b=p[c];p[c]=p[a-c-1],p[a-c-1]=b,b=l[c],l[c]=-l[a-c-1],l[a-c-1]=-b}},B.prototype.normalize13b=function(p,l){for(var a=0,c=0;c<l/2;c++){var b=Math.round(p[2*c+1]/l)*8192+Math.round(p[2*c]/l)+a;p[c]=b&67108863,b<67108864?a=0:a=b/67108864|0}return p},B.prototype.convert13b=function(p,l,a,c){for(var b=0,_=0;_<l;_++)b=b+(p[_]|0),a[2*_]=b&8191,b=b>>>13,a[2*_+1]=b&8191,b=b>>>13;for(_=2*l;_<c;++_)a[_]=0;i(b===0),i((b&-8192)===0)},B.prototype.stub=function(p){for(var l=new Array(p),a=0;a<p;a++)l[a]=0;return l},B.prototype.mulp=function(p,l,a){var c=2*this.guessLen13b(p.length,l.length),b=this.makeRBT(c),_=this.stub(c),x=new Array(c),m=new Array(c),h=new Array(c),y=new Array(c),g=new Array(c),A=new Array(c),U=a.words;U.length=c,this.convert13b(p.words,p.length,x,c),this.convert13b(l.words,l.length,y,c),this.transform(x,_,m,h,c,b),this.transform(y,_,g,A,c,b);for(var E=0;E<c;E++){var T=m[E]*g[E]-h[E]*A[E];h[E]=m[E]*A[E]+h[E]*g[E],m[E]=T}return this.conjugate(m,h,c),this.transform(m,h,U,_,c,b),this.conjugate(U,_,c),this.normalize13b(U,c),a.negative=p.negative^l.negative,a.length=p.length+l.length,a.strip()},n.prototype.mul=function(p){var l=new n(null);return l.words=new Array(this.length+p.length),this.mulTo(p,l)},n.prototype.mulf=function(p){var l=new n(null);return l.words=new Array(this.length+p.length),C(this,p,l)},n.prototype.imul=function(p){return this.clone().mulTo(p,this)},n.prototype.imuln=function(p){i(typeof p=="number"),i(p<67108864);for(var l=0,a=0;a<this.length;a++){var c=(this.words[a]|0)*p,b=(c&67108863)+(l&67108863);l>>=26,l+=c/67108864|0,l+=b>>>26,this.words[a]=b&67108863}return l!==0&&(this.words[a]=l,this.length++),this},n.prototype.muln=function(p){return this.clone().imuln(p)},n.prototype.sqr=function(){return this.mul(this)},n.prototype.isqr=function(){return this.imul(this.clone())},n.prototype.pow=function(p){var l=I(p);if(l.length===0)return new n(1);for(var a=this,c=0;c<l.length&&l[c]===0;c++,a=a.sqr());if(++c<l.length)for(var b=a.sqr();c<l.length;c++,b=b.sqr())l[c]!==0&&(a=a.mul(b));return a},n.prototype.iushln=function(p){i(typeof p=="number"&&p>=0);var l=p%26,a=(p-l)/26,c=67108863>>>26-l<<26-l,b;if(l!==0){var _=0;for(b=0;b<this.length;b++){var x=this.words[b]&c,m=(this.words[b]|0)-x<<l;this.words[b]=m|_,_=x>>>26-l}_&&(this.words[b]=_,this.length++)}if(a!==0){for(b=this.length-1;b>=0;b--)this.words[b+a]=this.words[b];for(b=0;b<a;b++)this.words[b]=0;this.length+=a}return this.strip()},n.prototype.ishln=function(p){return i(this.negative===0),this.iushln(p)},n.prototype.iushrn=function(p,l,a){i(typeof p=="number"&&p>=0);var c;l?c=(l-l%26)/26:c=0;var b=p%26,_=Math.min((p-b)/26,this.length),x=67108863^67108863>>>b<<b,m=a;if(c-=_,c=Math.max(0,c),m){for(var h=0;h<_;h++)m.words[h]=this.words[h];m.length=_}if(_!==0)if(this.length>_)for(this.length-=_,h=0;h<this.length;h++)this.words[h]=this.words[h+_];else this.words[0]=0,this.length=1;var y=0;for(h=this.length-1;h>=0&&(y!==0||h>=c);h--){var g=this.words[h]|0;this.words[h]=y<<26-b|g>>>b,y=g&x}return m&&y!==0&&(m.words[m.length++]=y),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},n.prototype.ishrn=function(p,l,a){return i(this.negative===0),this.iushrn(p,l,a)},n.prototype.shln=function(p){return this.clone().ishln(p)},n.prototype.ushln=function(p){return this.clone().iushln(p)},n.prototype.shrn=function(p){return this.clone().ishrn(p)},n.prototype.ushrn=function(p){return this.clone().iushrn(p)},n.prototype.testn=function(p){i(typeof p=="number"&&p>=0);var l=p%26,a=(p-l)/26,c=1<<l;if(this.length<=a)return!1;var b=this.words[a];return!!(b&c)},n.prototype.imaskn=function(p){i(typeof p=="number"&&p>=0);var l=p%26,a=(p-l)/26;if(i(this.negative===0,"imaskn works only with positive numbers"),this.length<=a)return this;if(l!==0&&a++,this.length=Math.min(a,this.length),l!==0){var c=67108863^67108863>>>l<<l;this.words[this.length-1]&=c}return this.strip()},n.prototype.maskn=function(p){return this.clone().imaskn(p)},n.prototype.iaddn=function(p){return i(typeof p=="number"),i(p<67108864),p<0?this.isubn(-p):this.negative!==0?this.length===1&&(this.words[0]|0)<p?(this.words[0]=p-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(p),this.negative=1,this):this._iaddn(p)},n.prototype._iaddn=function(p){this.words[0]+=p;for(var l=0;l<this.length&&this.words[l]>=67108864;l++)this.words[l]-=67108864,l===this.length-1?this.words[l+1]=1:this.words[l+1]++;return this.length=Math.max(this.length,l+1),this},n.prototype.isubn=function(p){if(i(typeof p=="number"),i(p<67108864),p<0)return this.iaddn(-p);if(this.negative!==0)return this.negative=0,this.iaddn(p),this.negative=1,this;if(this.words[0]-=p,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var l=0;l<this.length&&this.words[l]<0;l++)this.words[l]+=67108864,this.words[l+1]-=1;return this.strip()},n.prototype.addn=function(p){return this.clone().iaddn(p)},n.prototype.subn=function(p){return this.clone().isubn(p)},n.prototype.iabs=function(){return this.negative=0,this},n.prototype.abs=function(){return this.clone().iabs()},n.prototype._ishlnsubmul=function(p,l,a){var c=p.length+a,b;this._expand(c);var _,x=0;for(b=0;b<p.length;b++){_=(this.words[b+a]|0)+x;var m=(p.words[b]|0)*l;_-=m&67108863,x=(_>>26)-(m/67108864|0),this.words[b+a]=_&67108863}for(;b<this.length-a;b++)_=(this.words[b+a]|0)+x,x=_>>26,this.words[b+a]=_&67108863;if(x===0)return this.strip();for(i(x===-1),x=0,b=0;b<this.length;b++)_=-(this.words[b]|0)+x,x=_>>26,this.words[b]=_&67108863;return this.negative=1,this.strip()},n.prototype._wordDiv=function(p,l){var a=this.length-p.length,c=this.clone(),b=p,_=b.words[b.length-1]|0,x=this._countBits(_);a=26-x,a!==0&&(b=b.ushln(a),c.iushln(a),_=b.words[b.length-1]|0);var m=c.length-b.length,h;if(l!=="mod"){h=new n(null),h.length=m+1,h.words=new Array(h.length);for(var y=0;y<h.length;y++)h.words[y]=0}var g=c.clone()._ishlnsubmul(b,1,m);g.negative===0&&(c=g,h&&(h.words[m]=1));for(var A=m-1;A>=0;A--){var U=(c.words[b.length+A]|0)*67108864+(c.words[b.length+A-1]|0);for(U=Math.min(U/_|0,67108863),c._ishlnsubmul(b,U,A);c.negative!==0;)U--,c.negative=0,c._ishlnsubmul(b,1,A),c.isZero()||(c.negative^=1);h&&(h.words[A]=U)}return h&&h.strip(),c.strip(),l!=="div"&&a!==0&&c.iushrn(a),{div:h||null,mod:c}},n.prototype.divmod=function(p,l,a){if(i(!p.isZero()),this.isZero())return{div:new n(0),mod:new n(0)};var c,b,_;return this.negative!==0&&p.negative===0?(_=this.neg().divmod(p,l),l!=="mod"&&(c=_.div.neg()),l!=="div"&&(b=_.mod.neg(),a&&b.negative!==0&&b.iadd(p)),{div:c,mod:b}):this.negative===0&&p.negative!==0?(_=this.divmod(p.neg(),l),l!=="mod"&&(c=_.div.neg()),{div:c,mod:_.mod}):(this.negative&p.negative)!==0?(_=this.neg().divmod(p.neg(),l),l!=="div"&&(b=_.mod.neg(),a&&b.negative!==0&&b.isub(p)),{div:_.div,mod:b}):p.length>this.length||this.cmp(p)<0?{div:new n(0),mod:this}:p.length===1?l==="div"?{div:this.divn(p.words[0]),mod:null}:l==="mod"?{div:null,mod:new n(this.modn(p.words[0]))}:{div:this.divn(p.words[0]),mod:new n(this.modn(p.words[0]))}:this._wordDiv(p,l)},n.prototype.div=function(p){return this.divmod(p,"div",!1).div},n.prototype.mod=function(p){return this.divmod(p,"mod",!1).mod},n.prototype.umod=function(p){return this.divmod(p,"mod",!0).mod},n.prototype.divRound=function(p){var l=this.divmod(p);if(l.mod.isZero())return l.div;var a=l.div.negative!==0?l.mod.isub(p):l.mod,c=p.ushrn(1),b=p.andln(1),_=a.cmp(c);return _<0||b===1&&_===0?l.div:l.div.negative!==0?l.div.isubn(1):l.div.iaddn(1)},n.prototype.modn=function(p){i(p<=67108863);for(var l=(1<<26)%p,a=0,c=this.length-1;c>=0;c--)a=(l*a+(this.words[c]|0))%p;return a},n.prototype.idivn=function(p){i(p<=67108863);for(var l=0,a=this.length-1;a>=0;a--){var c=(this.words[a]|0)+l*67108864;this.words[a]=c/p|0,l=c%p}return this.strip()},n.prototype.divn=function(p){return this.clone().idivn(p)},n.prototype.egcd=function(p){i(p.negative===0),i(!p.isZero());var l=this,a=p.clone();l.negative!==0?l=l.umod(p):l=l.clone();for(var c=new n(1),b=new n(0),_=new n(0),x=new n(1),m=0;l.isEven()&&a.isEven();)l.iushrn(1),a.iushrn(1),++m;for(var h=a.clone(),y=l.clone();!l.isZero();){for(var g=0,A=1;(l.words[0]&A)===0&&g<26;++g,A<<=1);if(g>0)for(l.iushrn(g);g-- >0;)(c.isOdd()||b.isOdd())&&(c.iadd(h),b.isub(y)),c.iushrn(1),b.iushrn(1);for(var U=0,E=1;(a.words[0]&E)===0&&U<26;++U,E<<=1);if(U>0)for(a.iushrn(U);U-- >0;)(_.isOdd()||x.isOdd())&&(_.iadd(h),x.isub(y)),_.iushrn(1),x.iushrn(1);l.cmp(a)>=0?(l.isub(a),c.isub(_),b.isub(x)):(a.isub(l),_.isub(c),x.isub(b))}return{a:_,b:x,gcd:a.iushln(m)}},n.prototype._invmp=function(p){i(p.negative===0),i(!p.isZero());var l=this,a=p.clone();l.negative!==0?l=l.umod(p):l=l.clone();for(var c=new n(1),b=new n(0),_=a.clone();l.cmpn(1)>0&&a.cmpn(1)>0;){for(var x=0,m=1;(l.words[0]&m)===0&&x<26;++x,m<<=1);if(x>0)for(l.iushrn(x);x-- >0;)c.isOdd()&&c.iadd(_),c.iushrn(1);for(var h=0,y=1;(a.words[0]&y)===0&&h<26;++h,y<<=1);if(h>0)for(a.iushrn(h);h-- >0;)b.isOdd()&&b.iadd(_),b.iushrn(1);l.cmp(a)>=0?(l.isub(a),c.isub(b)):(a.isub(l),b.isub(c))}var g;return l.cmpn(1)===0?g=c:g=b,g.cmpn(0)<0&&g.iadd(p),g},n.prototype.gcd=function(p){if(this.isZero())return p.abs();if(p.isZero())return this.abs();var l=this.clone(),a=p.clone();l.negative=0,a.negative=0;for(var c=0;l.isEven()&&a.isEven();c++)l.iushrn(1),a.iushrn(1);do{for(;l.isEven();)l.iushrn(1);for(;a.isEven();)a.iushrn(1);var b=l.cmp(a);if(b<0){var _=l;l=a,a=_}else if(b===0||a.cmpn(1)===0)break;l.isub(a)}while(!0);return a.iushln(c)},n.prototype.invm=function(p){return this.egcd(p).a.umod(p)},n.prototype.isEven=function(){return(this.words[0]&1)===0},n.prototype.isOdd=function(){return(this.words[0]&1)===1},n.prototype.andln=function(p){return this.words[0]&p},n.prototype.bincn=function(p){i(typeof p=="number");var l=p%26,a=(p-l)/26,c=1<<l;if(this.length<=a)return this._expand(a+1),this.words[a]|=c,this;for(var b=c,_=a;b!==0&&_<this.length;_++){var x=this.words[_]|0;x+=b,b=x>>>26,x&=67108863,this.words[_]=x}return b!==0&&(this.words[_]=b,this.length++),this},n.prototype.isZero=function(){return this.length===1&&this.words[0]===0},n.prototype.cmpn=function(p){var l=p<0;if(this.negative!==0&&!l)return-1;if(this.negative===0&&l)return 1;this.strip();var a;if(this.length>1)a=1;else{l&&(p=-p),i(p<=67108863,"Number is too big");var c=this.words[0]|0;a=c===p?0:c<p?-1:1}return this.negative!==0?-a|0:a},n.prototype.cmp=function(p){if(this.negative!==0&&p.negative===0)return-1;if(this.negative===0&&p.negative!==0)return 1;var l=this.ucmp(p);return this.negative!==0?-l|0:l},n.prototype.ucmp=function(p){if(this.length>p.length)return 1;if(this.length<p.length)return-1;for(var l=0,a=this.length-1;a>=0;a--){var c=this.words[a]|0,b=p.words[a]|0;if(c!==b){c<b?l=-1:c>b&&(l=1);break}}return l},n.prototype.gtn=function(p){return this.cmpn(p)===1},n.prototype.gt=function(p){return this.cmp(p)===1},n.prototype.gten=function(p){return this.cmpn(p)>=0},n.prototype.gte=function(p){return this.cmp(p)>=0},n.prototype.ltn=function(p){return this.cmpn(p)===-1},n.prototype.lt=function(p){return this.cmp(p)===-1},n.prototype.lten=function(p){return this.cmpn(p)<=0},n.prototype.lte=function(p){return this.cmp(p)<=0},n.prototype.eqn=function(p){return this.cmpn(p)===0},n.prototype.eq=function(p){return this.cmp(p)===0},n.red=function(p){return new j(p)},n.prototype.toRed=function(p){return i(!this.red,"Already a number in reduction context"),i(this.negative===0,"red works only with positives"),p.convertTo(this)._forceRed(p)},n.prototype.fromRed=function(){return i(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},n.prototype._forceRed=function(p){return this.red=p,this},n.prototype.forceRed=function(p){return i(!this.red,"Already a number in reduction context"),this._forceRed(p)},n.prototype.redAdd=function(p){return i(this.red,"redAdd works only with red numbers"),this.red.add(this,p)},n.prototype.redIAdd=function(p){return i(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,p)},n.prototype.redSub=function(p){return i(this.red,"redSub works only with red numbers"),this.red.sub(this,p)},n.prototype.redISub=function(p){return i(this.red,"redISub works only with red numbers"),this.red.isub(this,p)},n.prototype.redShl=function(p){return i(this.red,"redShl works only with red numbers"),this.red.shl(this,p)},n.prototype.redMul=function(p){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,p),this.red.mul(this,p)},n.prototype.redIMul=function(p){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,p),this.red.imul(this,p)},n.prototype.redSqr=function(){return i(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},n.prototype.redISqr=function(){return i(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},n.prototype.redSqrt=function(){return i(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},n.prototype.redInvm=function(){return i(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},n.prototype.redNeg=function(){return i(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},n.prototype.redPow=function(p){return i(this.red&&!p.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,p)};var F={k256:null,p224:null,p192:null,p25519:null};function k(D,p){this.name=D,this.p=new n(p,16),this.n=this.p.bitLength(),this.k=new n(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}k.prototype._tmp=function(){var p=new n(null);return p.words=new Array(Math.ceil(this.n/13)),p},k.prototype.ireduce=function(p){var l=p,a;do this.split(l,this.tmp),l=this.imulK(l),l=l.iadd(this.tmp),a=l.bitLength();while(a>this.n);var c=a<this.n?-1:l.ucmp(this.p);return c===0?(l.words[0]=0,l.length=1):c>0?l.isub(this.p):l.strip!==void 0?l.strip():l._strip(),l},k.prototype.split=function(p,l){p.iushrn(this.n,0,l)},k.prototype.imulK=function(p){return p.imul(this.k)};function V(){k.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}s(V,k),V.prototype.split=function(p,l){for(var a=4194303,c=Math.min(p.length,9),b=0;b<c;b++)l.words[b]=p.words[b];if(l.length=c,p.length<=9){p.words[0]=0,p.length=1;return}var _=p.words[9];for(l.words[l.length++]=_&a,b=10;b<p.length;b++){var x=p.words[b]|0;p.words[b-10]=(x&a)<<4|_>>>22,_=x}_>>>=22,p.words[b-10]=_,_===0&&p.length>10?p.length-=10:p.length-=9},V.prototype.imulK=function(p){p.words[p.length]=0,p.words[p.length+1]=0,p.length+=2;for(var l=0,a=0;a<p.length;a++){var c=p.words[a]|0;l+=c*977,p.words[a]=l&67108863,l=c*64+(l/67108864|0)}return p.words[p.length-1]===0&&(p.length--,p.words[p.length-1]===0&&p.length--),p};function H(){k.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}s(H,k);function G(){k.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}s(G,k);function J(){k.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}s(J,k),J.prototype.imulK=function(p){for(var l=0,a=0;a<p.length;a++){var c=(p.words[a]|0)*19+l,b=c&67108863;c>>>=26,p.words[a]=b,l=c}return l!==0&&(p.words[p.length++]=l),p},n._prime=function(p){if(F[p])return F[p];var l;if(p==="k256")l=new V;else if(p==="p224")l=new H;else if(p==="p192")l=new G;else if(p==="p25519")l=new J;else throw new Error("Unknown prime "+p);return F[p]=l,l};function j(D){if(typeof D=="string"){var p=n._prime(D);this.m=p.p,this.prime=p}else i(D.gtn(1),"modulus must be greater than 1"),this.m=D,this.prime=null}j.prototype._verify1=function(p){i(p.negative===0,"red works only with positives"),i(p.red,"red works only with red numbers")},j.prototype._verify2=function(p,l){i((p.negative|l.negative)===0,"red works only with positives"),i(p.red&&p.red===l.red,"red works only with red numbers")},j.prototype.imod=function(p){return this.prime?this.prime.ireduce(p)._forceRed(this):p.umod(this.m)._forceRed(this)},j.prototype.neg=function(p){return p.isZero()?p.clone():this.m.sub(p)._forceRed(this)},j.prototype.add=function(p,l){this._verify2(p,l);var a=p.add(l);return a.cmp(this.m)>=0&&a.isub(this.m),a._forceRed(this)},j.prototype.iadd=function(p,l){this._verify2(p,l);var a=p.iadd(l);return a.cmp(this.m)>=0&&a.isub(this.m),a},j.prototype.sub=function(p,l){this._verify2(p,l);var a=p.sub(l);return a.cmpn(0)<0&&a.iadd(this.m),a._forceRed(this)},j.prototype.isub=function(p,l){this._verify2(p,l);var a=p.isub(l);return a.cmpn(0)<0&&a.iadd(this.m),a},j.prototype.shl=function(p,l){return this._verify1(p),this.imod(p.ushln(l))},j.prototype.imul=function(p,l){return this._verify2(p,l),this.imod(p.imul(l))},j.prototype.mul=function(p,l){return this._verify2(p,l),this.imod(p.mul(l))},j.prototype.isqr=function(p){return this.imul(p,p.clone())},j.prototype.sqr=function(p){return this.mul(p,p)},j.prototype.sqrt=function(p){if(p.isZero())return p.clone();var l=this.m.andln(3);if(i(l%2===1),l===3){var a=this.m.add(new n(1)).iushrn(2);return this.pow(p,a)}for(var c=this.m.subn(1),b=0;!c.isZero()&&c.andln(1)===0;)b++,c.iushrn(1);i(!c.isZero());var _=new n(1).toRed(this),x=_.redNeg(),m=this.m.subn(1).iushrn(1),h=this.m.bitLength();for(h=new n(2*h*h).toRed(this);this.pow(h,m).cmp(x)!==0;)h.redIAdd(x);for(var y=this.pow(h,c),g=this.pow(p,c.addn(1).iushrn(1)),A=this.pow(p,c),U=b;A.cmp(_)!==0;){for(var E=A,T=0;E.cmp(_)!==0;T++)E=E.redSqr();i(T<U);var L=this.pow(y,new n(1).iushln(U-T-1));g=g.redMul(L),y=L.redSqr(),A=A.redMul(y),U=T}return g},j.prototype.invm=function(p){var l=p._invmp(this.m);return l.negative!==0?(l.negative=0,this.imod(l).redNeg()):this.imod(l)},j.prototype.pow=function(p,l){if(l.isZero())return new n(1).toRed(this);if(l.cmpn(1)===0)return p.clone();var a=4,c=new Array(1<<a);c[0]=new n(1).toRed(this),c[1]=p;for(var b=2;b<c.length;b++)c[b]=this.mul(c[b-1],p);var _=c[0],x=0,m=0,h=l.bitLength()%26;for(h===0&&(h=26),b=l.length-1;b>=0;b--){for(var y=l.words[b],g=h-1;g>=0;g--){var A=y>>g&1;if(_!==c[0]&&(_=this.sqr(_)),A===0&&x===0){m=0;continue}x<<=1,x|=A,m++,!(m!==a&&(b!==0||g!==0))&&(_=this.mul(_,c[x]),m=0,x=0)}h=26}return _},j.prototype.convertTo=function(p){var l=p.umod(this.m);return l===p?l.clone():l},j.prototype.convertFrom=function(p){var l=p.clone();return l.red=null,l},n.mont=function(p){return new te(p)};function te(D){j.call(this,D),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new n(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}s(te,j),te.prototype.convertTo=function(p){return this.imod(p.ushln(this.shift))},te.prototype.convertFrom=function(p){var l=this.imod(p.mul(this.rinv));return l.red=null,l},te.prototype.imul=function(p,l){if(p.isZero()||l.isZero())return p.words[0]=0,p.length=1,p;var a=p.imul(l),c=a.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),b=a.isub(c).iushrn(this.shift),_=b;return b.cmp(this.m)>=0?_=b.isub(this.m):b.cmpn(0)<0&&(_=b.iadd(this.m)),_._forceRed(this)},te.prototype.mul=function(p,l){if(p.isZero()||l.isZero())return new n(0)._forceRed(this);var a=p.mul(l),c=a.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),b=a.isub(c).iushrn(this.shift),_=b;return b.cmp(this.m)>=0?_=b.isub(this.m):b.cmpn(0)<0&&(_=b.iadd(this.m)),_._forceRed(this)},te.prototype.invm=function(p){var l=this.imod(p._invmp(this.m).mul(this.r2));return l._forceRed(this)}})(t,Rt)})(Yr);var Wa={};(function(t){var e=t;function r(n,o){if(Array.isArray(n))return n.slice();if(!n)return[];var f=[];if(typeof n!="string"){for(var d=0;d<n.length;d++)f[d]=n[d]|0;return f}if(o==="hex"){n=n.replace(/[^a-z0-9]+/ig,""),n.length%2!==0&&(n="0"+n);for(var d=0;d<n.length;d+=2)f.push(parseInt(n[d]+n[d+1],16))}else for(var d=0;d<n.length;d++){var u=n.charCodeAt(d),v=u>>8,w=u&255;v?f.push(v,w):f.push(w)}return f}e.toArray=r;function i(n){return n.length===1?"0"+n:n}e.zero2=i;function s(n){for(var o="",f=0;f<n.length;f++)o+=i(n[f].toString(16));return o}e.toHex=s,e.encode=function(o,f){return f==="hex"?s(o):o}})(Wa),function(t){var e=t,r=Yr.exports,i=Vi,s=Wa;e.assert=i,e.toArray=s.toArray,e.zero2=s.zero2,e.toHex=s.toHex,e.encode=s.encode;function n(v,w,S){var I=new Array(Math.max(v.bitLength(),S)+1),M;for(M=0;M<I.length;M+=1)I[M]=0;var R=1<<w+1,N=v.clone();for(M=0;M<I.length;M++){var C,B=N.andln(R-1);N.isOdd()?(B>(R>>1)-1?C=(R>>1)-B:C=B,N.isubn(C)):C=0,I[M]=C,N.iushrn(1)}return I}e.getNAF=n;function o(v,w){var S=[[],[]];v=v.clone(),w=w.clone();for(var I=0,M=0,R;v.cmpn(-I)>0||w.cmpn(-M)>0;){var N=v.andln(3)+I&3,C=w.andln(3)+M&3;N===3&&(N=-1),C===3&&(C=-1);var B;(N&1)===0?B=0:(R=v.andln(7)+I&7,(R===3||R===5)&&C===2?B=-N:B=N),S[0].push(B);var F;(C&1)===0?F=0:(R=w.andln(7)+M&7,(R===3||R===5)&&N===2?F=-C:F=C),S[1].push(F),2*I===B+1&&(I=1-I),2*M===F+1&&(M=1-M),v.iushrn(1),w.iushrn(1)}return S}e.getJSF=o;function f(v,w,S){var I="_"+w;v.prototype[w]=function(){return this[I]!==void 0?this[I]:this[I]=S.call(this)}}e.cachedProperty=f;function d(v){return typeof v=="string"?e.toArray(v,"hex"):v}e.parseBytes=d;function u(v){return new r(v,"hex","le")}e.intFromLE=u}(dr);var to={exports:{}},Ga;to.exports=function(e){return Ga||(Ga=new Oi(null)),Ga.generate(e)};function Oi(t){this.rand=t}if(to.exports.Rand=Oi,Oi.prototype.generate=function(e){return this._rand(e)},Oi.prototype._rand=function(e){if(this.rand.getBytes)return this.rand.getBytes(e);for(var r=new Uint8Array(e),i=0;i<r.length;i++)r[i]=this.rand.getByte();return r},typeof self=="object")self.crypto&&self.crypto.getRandomValues?Oi.prototype._rand=function(e){var r=new Uint8Array(e);return self.crypto.getRandomValues(r),r}:self.msCrypto&&self.msCrypto.getRandomValues?Oi.prototype._rand=function(e){var r=new Uint8Array(e);return self.msCrypto.getRandomValues(r),r}:typeof window=="object"&&(Oi.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var bd=Ra;if(typeof bd.randomBytes!="function")throw new Error("Not supported");Oi.prototype._rand=function(e){return bd.randomBytes(e)}}catch{}var Ya={},Yi=Yr.exports,is=dr,ro=is.getNAF,Am=is.getJSF,io=is.assert;function Ri(t,e){this.type=t,this.p=new Yi(e.p,16),this.red=e.prime?Yi.red(e.prime):Yi.mont(this.p),this.zero=new Yi(0).toRed(this.red),this.one=new Yi(1).toRed(this.red),this.two=new Yi(2).toRed(this.red),this.n=e.n&&new Yi(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var no=Ri;Ri.prototype.point=function(){throw new Error("Not implemented")},Ri.prototype.validate=function(){throw new Error("Not implemented")},Ri.prototype._fixedNafMul=function(e,r){io(e.precomputed);var i=e._getDoubles(),s=ro(r,1,this._bitLength),n=(1<<i.step+1)-(i.step%2===0?2:1);n/=3;var o=[],f,d;for(f=0;f<s.length;f+=i.step){d=0;for(var u=f+i.step-1;u>=f;u--)d=(d<<1)+s[u];o.push(d)}for(var v=this.jpoint(null,null,null),w=this.jpoint(null,null,null),S=n;S>0;S--){for(f=0;f<o.length;f++)d=o[f],d===S?w=w.mixedAdd(i.points[f]):d===-S&&(w=w.mixedAdd(i.points[f].neg()));v=v.add(w)}return v.toP()},Ri.prototype._wnafMul=function(e,r){var i=4,s=e._getNAFPoints(i);i=s.wnd;for(var n=s.points,o=ro(r,i,this._bitLength),f=this.jpoint(null,null,null),d=o.length-1;d>=0;d--){for(var u=0;d>=0&&o[d]===0;d--)u++;if(d>=0&&u++,f=f.dblp(u),d<0)break;var v=o[d];io(v!==0),e.type==="affine"?v>0?f=f.mixedAdd(n[v-1>>1]):f=f.mixedAdd(n[-v-1>>1].neg()):v>0?f=f.add(n[v-1>>1]):f=f.add(n[-v-1>>1].neg())}return e.type==="affine"?f.toP():f},Ri.prototype._wnafMulAdd=function(e,r,i,s,n){var o=this._wnafT1,f=this._wnafT2,d=this._wnafT3,u=0,v,w,S;for(v=0;v<s;v++){S=r[v];var I=S._getNAFPoints(e);o[v]=I.wnd,f[v]=I.points}for(v=s-1;v>=1;v-=2){var M=v-1,R=v;if(o[M]!==1||o[R]!==1){d[M]=ro(i[M],o[M],this._bitLength),d[R]=ro(i[R],o[R],this._bitLength),u=Math.max(d[M].length,u),u=Math.max(d[R].length,u);continue}var N=[r[M],null,null,r[R]];r[M].y.cmp(r[R].y)===0?(N[1]=r[M].add(r[R]),N[2]=r[M].toJ().mixedAdd(r[R].neg())):r[M].y.cmp(r[R].y.redNeg())===0?(N[1]=r[M].toJ().mixedAdd(r[R]),N[2]=r[M].add(r[R].neg())):(N[1]=r[M].toJ().mixedAdd(r[R]),N[2]=r[M].toJ().mixedAdd(r[R].neg()));var C=[-3,-1,-5,-7,0,7,5,1,3],B=Am(i[M],i[R]);for(u=Math.max(B[0].length,u),d[M]=new Array(u),d[R]=new Array(u),w=0;w<u;w++){var F=B[0][w]|0,k=B[1][w]|0;d[M][w]=C[(F+1)*3+(k+1)],d[R][w]=0,f[M]=N}}var V=this.jpoint(null,null,null),H=this._wnafT4;for(v=u;v>=0;v--){for(var G=0;v>=0;){var J=!0;for(w=0;w<s;w++)H[w]=d[w][v]|0,H[w]!==0&&(J=!1);if(!J)break;G++,v--}if(v>=0&&G++,V=V.dblp(G),v<0)break;for(w=0;w<s;w++){var j=H[w];j!==0&&(j>0?S=f[w][j-1>>1]:j<0&&(S=f[w][-j-1>>1].neg()),S.type==="affine"?V=V.mixedAdd(S):V=V.add(S))}}for(v=0;v<s;v++)f[v]=null;return n?V:V.toP()};function Er(t,e){this.curve=t,this.type=e,this.precomputed=null}Ri.BasePoint=Er,Er.prototype.eq=function(){throw new Error("Not implemented")},Er.prototype.validate=function(){return this.curve.validate(this)},Ri.prototype.decodePoint=function(e,r){e=is.toArray(e,r);var i=this.p.byteLength();if((e[0]===4||e[0]===6||e[0]===7)&&e.length-1===2*i){e[0]===6?io(e[e.length-1]%2===0):e[0]===7&&io(e[e.length-1]%2===1);var s=this.point(e.slice(1,1+i),e.slice(1+i,1+2*i));return s}else if((e[0]===2||e[0]===3)&&e.length-1===i)return this.pointFromX(e.slice(1,1+i),e[0]===3);throw new Error("Unknown point format")},Er.prototype.encodeCompressed=function(e){return this.encode(e,!0)},Er.prototype._encode=function(e){var r=this.curve.p.byteLength(),i=this.getX().toArray("be",r);return e?[this.getY().isEven()?2:3].concat(i):[4].concat(i,this.getY().toArray("be",r))},Er.prototype.encode=function(e,r){return is.encode(this._encode(r),e)},Er.prototype.precompute=function(e){if(this.precomputed)return this;var r={doubles:null,naf:null,beta:null};return r.naf=this._getNAFPoints(8),r.doubles=this._getDoubles(4,e),r.beta=this._getBeta(),this.precomputed=r,this},Er.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var r=this.precomputed.doubles;return r?r.points.length>=Math.ceil((e.bitLength()+1)/r.step):!1},Er.prototype._getDoubles=function(e,r){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var i=[this],s=this,n=0;n<r;n+=e){for(var o=0;o<e;o++)s=s.dbl();i.push(s)}return{step:e,points:i}},Er.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var r=[this],i=(1<<e)-1,s=i===1?null:this.dbl(),n=1;n<i;n++)r[n]=r[n-1].add(s);return{wnd:e,points:r}},Er.prototype._getBeta=function(){return null},Er.prototype.dblp=function(e){for(var r=this,i=0;i<e;i++)r=r.dbl();return r};var Dm=dr,vt=Yr.exports,Ja=gn.exports,Mn=no,Om=Dm.assert;function xr(t){Mn.call(this,"short",t),this.a=new vt(t.a,16).toRed(this.red),this.b=new vt(t.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(t),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}Ja(xr,Mn);var Rm=xr;xr.prototype._getEndomorphism=function(e){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var r,i;if(e.beta)r=new vt(e.beta,16).toRed(this.red);else{var s=this._getEndoRoots(this.p);r=s[0].cmp(s[1])<0?s[0]:s[1],r=r.toRed(this.red)}if(e.lambda)i=new vt(e.lambda,16);else{var n=this._getEndoRoots(this.n);this.g.mul(n[0]).x.cmp(this.g.x.redMul(r))===0?i=n[0]:(i=n[1],Om(this.g.mul(i).x.cmp(this.g.x.redMul(r))===0))}var o;return e.basis?o=e.basis.map(function(f){return{a:new vt(f.a,16),b:new vt(f.b,16)}}):o=this._getEndoBasis(i),{beta:r,lambda:i,basis:o}}},xr.prototype._getEndoRoots=function(e){var r=e===this.p?this.red:vt.mont(e),i=new vt(2).toRed(r).redInvm(),s=i.redNeg(),n=new vt(3).toRed(r).redNeg().redSqrt().redMul(i),o=s.redAdd(n).fromRed(),f=s.redSub(n).fromRed();return[o,f]},xr.prototype._getEndoBasis=function(e){for(var r=this.n.ushrn(Math.floor(this.n.bitLength()/2)),i=e,s=this.n.clone(),n=new vt(1),o=new vt(0),f=new vt(0),d=new vt(1),u,v,w,S,I,M,R,N=0,C,B;i.cmpn(0)!==0;){var F=s.div(i);C=s.sub(F.mul(i)),B=f.sub(F.mul(n));var k=d.sub(F.mul(o));if(!w&&C.cmp(r)<0)u=R.neg(),v=n,w=C.neg(),S=B;else if(w&&++N===2)break;R=C,s=i,i=C,f=n,n=B,d=o,o=k}I=C.neg(),M=B;var V=w.sqr().add(S.sqr()),H=I.sqr().add(M.sqr());return H.cmp(V)>=0&&(I=u,M=v),w.negative&&(w=w.neg(),S=S.neg()),I.negative&&(I=I.neg(),M=M.neg()),[{a:w,b:S},{a:I,b:M}]},xr.prototype._endoSplit=function(e){var r=this.endo.basis,i=r[0],s=r[1],n=s.b.mul(e).divRound(this.n),o=i.b.neg().mul(e).divRound(this.n),f=n.mul(i.a),d=o.mul(s.a),u=n.mul(i.b),v=o.mul(s.b),w=e.sub(f).sub(d),S=u.add(v).neg();return{k1:w,k2:S}},xr.prototype.pointFromX=function(e,r){e=new vt(e,16),e.red||(e=e.toRed(this.red));var i=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),s=i.redSqrt();if(s.redSqr().redSub(i).cmp(this.zero)!==0)throw new Error("invalid point");var n=s.fromRed().isOdd();return(r&&!n||!r&&n)&&(s=s.redNeg()),this.point(e,s)},xr.prototype.validate=function(e){if(e.inf)return!0;var r=e.x,i=e.y,s=this.a.redMul(r),n=r.redSqr().redMul(r).redIAdd(s).redIAdd(this.b);return i.redSqr().redISub(n).cmpn(0)===0},xr.prototype._endoWnafMulAdd=function(e,r,i){for(var s=this._endoWnafT1,n=this._endoWnafT2,o=0;o<e.length;o++){var f=this._endoSplit(r[o]),d=e[o],u=d._getBeta();f.k1.negative&&(f.k1.ineg(),d=d.neg(!0)),f.k2.negative&&(f.k2.ineg(),u=u.neg(!0)),s[o*2]=d,s[o*2+1]=u,n[o*2]=f.k1,n[o*2+1]=f.k2}for(var v=this._wnafMulAdd(1,s,n,o*2,i),w=0;w<o*2;w++)s[w]=null,n[w]=null;return v};function Mt(t,e,r,i){Mn.BasePoint.call(this,t,"affine"),e===null&&r===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new vt(e,16),this.y=new vt(r,16),i&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}Ja(Mt,Mn.BasePoint),xr.prototype.point=function(e,r,i){return new Mt(this,e,r,i)},xr.prototype.pointFromJSON=function(e,r){return Mt.fromJSON(this,e,r)},Mt.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var r=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var i=this.curve,s=function(n){return i.point(n.x.redMul(i.endo.beta),n.y)};e.beta=r,r.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(s)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(s)}}}return r}},Mt.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},Mt.fromJSON=function(e,r,i){typeof r=="string"&&(r=JSON.parse(r));var s=e.point(r[0],r[1],i);if(!r[2])return s;function n(f){return e.point(f[0],f[1],i)}var o=r[2];return s.precomputed={beta:null,doubles:o.doubles&&{step:o.doubles.step,points:[s].concat(o.doubles.points.map(n))},naf:o.naf&&{wnd:o.naf.wnd,points:[s].concat(o.naf.points.map(n))}},s},Mt.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},Mt.prototype.isInfinity=function(){return this.inf},Mt.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(this.x.cmp(e.x)===0)return this.curve.point(null,null);var r=this.y.redSub(e.y);r.cmpn(0)!==0&&(r=r.redMul(this.x.redSub(e.x).redInvm()));var i=r.redSqr().redISub(this.x).redISub(e.x),s=r.redMul(this.x.redSub(i)).redISub(this.y);return this.curve.point(i,s)},Mt.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(e.cmpn(0)===0)return this.curve.point(null,null);var r=this.curve.a,i=this.x.redSqr(),s=e.redInvm(),n=i.redAdd(i).redIAdd(i).redIAdd(r).redMul(s),o=n.redSqr().redISub(this.x.redAdd(this.x)),f=n.redMul(this.x.redSub(o)).redISub(this.y);return this.curve.point(o,f)},Mt.prototype.getX=function(){return this.x.fromRed()},Mt.prototype.getY=function(){return this.y.fromRed()},Mt.prototype.mul=function(e){return e=new vt(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)},Mt.prototype.mulAdd=function(e,r,i){var s=[this,r],n=[e,i];return this.curve.endo?this.curve._endoWnafMulAdd(s,n):this.curve._wnafMulAdd(1,s,n,2)},Mt.prototype.jmulAdd=function(e,r,i){var s=[this,r],n=[e,i];return this.curve.endo?this.curve._endoWnafMulAdd(s,n,!0):this.curve._wnafMulAdd(1,s,n,2,!0)},Mt.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||this.x.cmp(e.x)===0&&this.y.cmp(e.y)===0)},Mt.prototype.neg=function(e){if(this.inf)return this;var r=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var i=this.precomputed,s=function(n){return n.neg()};r.precomputed={naf:i.naf&&{wnd:i.naf.wnd,points:i.naf.points.map(s)},doubles:i.doubles&&{step:i.doubles.step,points:i.doubles.points.map(s)}}}return r},Mt.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var e=this.curve.jpoint(this.x,this.y,this.curve.one);return e};function Lt(t,e,r,i){Mn.BasePoint.call(this,t,"jacobian"),e===null&&r===null&&i===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new vt(0)):(this.x=new vt(e,16),this.y=new vt(r,16),this.z=new vt(i,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}Ja(Lt,Mn.BasePoint),xr.prototype.jpoint=function(e,r,i){return new Lt(this,e,r,i)},Lt.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),r=e.redSqr(),i=this.x.redMul(r),s=this.y.redMul(r).redMul(e);return this.curve.point(i,s)},Lt.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},Lt.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var r=e.z.redSqr(),i=this.z.redSqr(),s=this.x.redMul(r),n=e.x.redMul(i),o=this.y.redMul(r.redMul(e.z)),f=e.y.redMul(i.redMul(this.z)),d=s.redSub(n),u=o.redSub(f);if(d.cmpn(0)===0)return u.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var v=d.redSqr(),w=v.redMul(d),S=s.redMul(v),I=u.redSqr().redIAdd(w).redISub(S).redISub(S),M=u.redMul(S.redISub(I)).redISub(o.redMul(w)),R=this.z.redMul(e.z).redMul(d);return this.curve.jpoint(I,M,R)},Lt.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var r=this.z.redSqr(),i=this.x,s=e.x.redMul(r),n=this.y,o=e.y.redMul(r).redMul(this.z),f=i.redSub(s),d=n.redSub(o);if(f.cmpn(0)===0)return d.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var u=f.redSqr(),v=u.redMul(f),w=i.redMul(u),S=d.redSqr().redIAdd(v).redISub(w).redISub(w),I=d.redMul(w.redISub(S)).redISub(n.redMul(v)),M=this.z.redMul(f);return this.curve.jpoint(S,I,M)},Lt.prototype.dblp=function(e){if(e===0)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var r;if(this.curve.zeroA||this.curve.threeA){var i=this;for(r=0;r<e;r++)i=i.dbl();return i}var s=this.curve.a,n=this.curve.tinv,o=this.x,f=this.y,d=this.z,u=d.redSqr().redSqr(),v=f.redAdd(f);for(r=0;r<e;r++){var w=o.redSqr(),S=v.redSqr(),I=S.redSqr(),M=w.redAdd(w).redIAdd(w).redIAdd(s.redMul(u)),R=o.redMul(S),N=M.redSqr().redISub(R.redAdd(R)),C=R.redISub(N),B=M.redMul(C);B=B.redIAdd(B).redISub(I);var F=v.redMul(d);r+1<e&&(u=u.redMul(I)),o=N,d=F,v=B}return this.curve.jpoint(o,v.redMul(n),d)},Lt.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},Lt.prototype._zeroDbl=function(){var e,r,i;if(this.zOne){var s=this.x.redSqr(),n=this.y.redSqr(),o=n.redSqr(),f=this.x.redAdd(n).redSqr().redISub(s).redISub(o);f=f.redIAdd(f);var d=s.redAdd(s).redIAdd(s),u=d.redSqr().redISub(f).redISub(f),v=o.redIAdd(o);v=v.redIAdd(v),v=v.redIAdd(v),e=u,r=d.redMul(f.redISub(u)).redISub(v),i=this.y.redAdd(this.y)}else{var w=this.x.redSqr(),S=this.y.redSqr(),I=S.redSqr(),M=this.x.redAdd(S).redSqr().redISub(w).redISub(I);M=M.redIAdd(M);var R=w.redAdd(w).redIAdd(w),N=R.redSqr(),C=I.redIAdd(I);C=C.redIAdd(C),C=C.redIAdd(C),e=N.redISub(M).redISub(M),r=R.redMul(M.redISub(e)).redISub(C),i=this.y.redMul(this.z),i=i.redIAdd(i)}return this.curve.jpoint(e,r,i)},Lt.prototype._threeDbl=function(){var e,r,i;if(this.zOne){var s=this.x.redSqr(),n=this.y.redSqr(),o=n.redSqr(),f=this.x.redAdd(n).redSqr().redISub(s).redISub(o);f=f.redIAdd(f);var d=s.redAdd(s).redIAdd(s).redIAdd(this.curve.a),u=d.redSqr().redISub(f).redISub(f);e=u;var v=o.redIAdd(o);v=v.redIAdd(v),v=v.redIAdd(v),r=d.redMul(f.redISub(u)).redISub(v),i=this.y.redAdd(this.y)}else{var w=this.z.redSqr(),S=this.y.redSqr(),I=this.x.redMul(S),M=this.x.redSub(w).redMul(this.x.redAdd(w));M=M.redAdd(M).redIAdd(M);var R=I.redIAdd(I);R=R.redIAdd(R);var N=R.redAdd(R);e=M.redSqr().redISub(N),i=this.y.redAdd(this.z).redSqr().redISub(S).redISub(w);var C=S.redSqr();C=C.redIAdd(C),C=C.redIAdd(C),C=C.redIAdd(C),r=M.redMul(R.redISub(e)).redISub(C)}return this.curve.jpoint(e,r,i)},Lt.prototype._dbl=function(){var e=this.curve.a,r=this.x,i=this.y,s=this.z,n=s.redSqr().redSqr(),o=r.redSqr(),f=i.redSqr(),d=o.redAdd(o).redIAdd(o).redIAdd(e.redMul(n)),u=r.redAdd(r);u=u.redIAdd(u);var v=u.redMul(f),w=d.redSqr().redISub(v.redAdd(v)),S=v.redISub(w),I=f.redSqr();I=I.redIAdd(I),I=I.redIAdd(I),I=I.redIAdd(I);var M=d.redMul(S).redISub(I),R=i.redAdd(i).redMul(s);return this.curve.jpoint(w,M,R)},Lt.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),r=this.y.redSqr(),i=this.z.redSqr(),s=r.redSqr(),n=e.redAdd(e).redIAdd(e),o=n.redSqr(),f=this.x.redAdd(r).redSqr().redISub(e).redISub(s);f=f.redIAdd(f),f=f.redAdd(f).redIAdd(f),f=f.redISub(o);var d=f.redSqr(),u=s.redIAdd(s);u=u.redIAdd(u),u=u.redIAdd(u),u=u.redIAdd(u);var v=n.redIAdd(f).redSqr().redISub(o).redISub(d).redISub(u),w=r.redMul(v);w=w.redIAdd(w),w=w.redIAdd(w);var S=this.x.redMul(d).redISub(w);S=S.redIAdd(S),S=S.redIAdd(S);var I=this.y.redMul(v.redMul(u.redISub(v)).redISub(f.redMul(d)));I=I.redIAdd(I),I=I.redIAdd(I),I=I.redIAdd(I);var M=this.z.redAdd(f).redSqr().redISub(i).redISub(d);return this.curve.jpoint(S,I,M)},Lt.prototype.mul=function(e,r){return e=new vt(e,r),this.curve._wnafMul(this,e)},Lt.prototype.eq=function(e){if(e.type==="affine")return this.eq(e.toJ());if(this===e)return!0;var r=this.z.redSqr(),i=e.z.redSqr();if(this.x.redMul(i).redISub(e.x.redMul(r)).cmpn(0)!==0)return!1;var s=r.redMul(this.z),n=i.redMul(e.z);return this.y.redMul(n).redISub(e.y.redMul(s)).cmpn(0)===0},Lt.prototype.eqXToP=function(e){var r=this.z.redSqr(),i=e.toRed(this.curve.red).redMul(r);if(this.x.cmp(i)===0)return!0;for(var s=e.clone(),n=this.curve.redN.redMul(r);;){if(s.iadd(this.curve.n),s.cmp(this.curve.p)>=0)return!1;if(i.redIAdd(n),this.x.cmp(i)===0)return!0}},Lt.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},Lt.prototype.isInfinity=function(){return this.z.cmpn(0)===0};var In=Yr.exports,vd=gn.exports,so=no,Tm=dr;function An(t){so.call(this,"mont",t),this.a=new In(t.a,16).toRed(this.red),this.b=new In(t.b,16).toRed(this.red),this.i4=new In(4).toRed(this.red).redInvm(),this.two=new In(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}vd(An,so);var Nm=An;An.prototype.validate=function(e){var r=e.normalize().x,i=r.redSqr(),s=i.redMul(r).redAdd(i.redMul(this.a)).redAdd(r),n=s.redSqrt();return n.redSqr().cmp(s)===0};function It(t,e,r){so.BasePoint.call(this,t,"projective"),e===null&&r===null?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new In(e,16),this.z=new In(r,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}vd(It,so.BasePoint),An.prototype.decodePoint=function(e,r){return this.point(Tm.toArray(e,r),1)},An.prototype.point=function(e,r){return new It(this,e,r)},An.prototype.pointFromJSON=function(e){return It.fromJSON(this,e)},It.prototype.precompute=function(){},It.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},It.fromJSON=function(e,r){return new It(e,r[0],r[1]||e.one)},It.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},It.prototype.isInfinity=function(){return this.z.cmpn(0)===0},It.prototype.dbl=function(){var e=this.x.redAdd(this.z),r=e.redSqr(),i=this.x.redSub(this.z),s=i.redSqr(),n=r.redSub(s),o=r.redMul(s),f=n.redMul(s.redAdd(this.curve.a24.redMul(n)));return this.curve.point(o,f)},It.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},It.prototype.diffAdd=function(e,r){var i=this.x.redAdd(this.z),s=this.x.redSub(this.z),n=e.x.redAdd(e.z),o=e.x.redSub(e.z),f=o.redMul(i),d=n.redMul(s),u=r.z.redMul(f.redAdd(d).redSqr()),v=r.x.redMul(f.redISub(d).redSqr());return this.curve.point(u,v)},It.prototype.mul=function(e){for(var r=e.clone(),i=this,s=this.curve.point(null,null),n=this,o=[];r.cmpn(0)!==0;r.iushrn(1))o.push(r.andln(1));for(var f=o.length-1;f>=0;f--)o[f]===0?(i=i.diffAdd(s,n),s=s.dbl()):(s=i.diffAdd(s,n),i=i.dbl());return s},It.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},It.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},It.prototype.eq=function(e){return this.getX().cmp(e.getX())===0},It.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},It.prototype.getX=function(){return this.normalize(),this.x.fromRed()};var Pm=dr,ai=Yr.exports,gd=gn.exports,oo=no,Cm=Pm.assert;function Jr(t){this.twisted=(t.a|0)!==1,this.mOneA=this.twisted&&(t.a|0)===-1,this.extended=this.mOneA,oo.call(this,"edwards",t),this.a=new ai(t.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new ai(t.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new ai(t.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),Cm(!this.twisted||this.c.fromRed().cmpn(1)===0),this.oneC=(t.c|0)===1}gd(Jr,oo);var Bm=Jr;Jr.prototype._mulA=function(e){return this.mOneA?e.redNeg():this.a.redMul(e)},Jr.prototype._mulC=function(e){return this.oneC?e:this.c.redMul(e)},Jr.prototype.jpoint=function(e,r,i,s){return this.point(e,r,i,s)},Jr.prototype.pointFromX=function(e,r){e=new ai(e,16),e.red||(e=e.toRed(this.red));var i=e.redSqr(),s=this.c2.redSub(this.a.redMul(i)),n=this.one.redSub(this.c2.redMul(this.d).redMul(i)),o=s.redMul(n.redInvm()),f=o.redSqrt();if(f.redSqr().redSub(o).cmp(this.zero)!==0)throw new Error("invalid point");var d=f.fromRed().isOdd();return(r&&!d||!r&&d)&&(f=f.redNeg()),this.point(e,f)},Jr.prototype.pointFromY=function(e,r){e=new ai(e,16),e.red||(e=e.toRed(this.red));var i=e.redSqr(),s=i.redSub(this.c2),n=i.redMul(this.d).redMul(this.c2).redSub(this.a),o=s.redMul(n.redInvm());if(o.cmp(this.zero)===0){if(r)throw new Error("invalid point");return this.point(this.zero,e)}var f=o.redSqrt();if(f.redSqr().redSub(o).cmp(this.zero)!==0)throw new Error("invalid point");return f.fromRed().isOdd()!==r&&(f=f.redNeg()),this.point(f,e)},Jr.prototype.validate=function(e){if(e.isInfinity())return!0;e.normalize();var r=e.x.redSqr(),i=e.y.redSqr(),s=r.redMul(this.a).redAdd(i),n=this.c2.redMul(this.one.redAdd(this.d.redMul(r).redMul(i)));return s.cmp(n)===0};function ut(t,e,r,i,s){oo.BasePoint.call(this,t,"projective"),e===null&&r===null&&i===null?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new ai(e,16),this.y=new ai(r,16),this.z=i?new ai(i,16):this.curve.one,this.t=s&&new ai(s,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}gd(ut,oo.BasePoint),Jr.prototype.pointFromJSON=function(e){return ut.fromJSON(this,e)},Jr.prototype.point=function(e,r,i,s){return new ut(this,e,r,i,s)},ut.fromJSON=function(e,r){return new ut(e,r[0],r[1],r[2])},ut.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},ut.prototype.isInfinity=function(){return this.x.cmpn(0)===0&&(this.y.cmp(this.z)===0||this.zOne&&this.y.cmp(this.curve.c)===0)},ut.prototype._extDbl=function(){var e=this.x.redSqr(),r=this.y.redSqr(),i=this.z.redSqr();i=i.redIAdd(i);var s=this.curve._mulA(e),n=this.x.redAdd(this.y).redSqr().redISub(e).redISub(r),o=s.redAdd(r),f=o.redSub(i),d=s.redSub(r),u=n.redMul(f),v=o.redMul(d),w=n.redMul(d),S=f.redMul(o);return this.curve.point(u,v,S,w)},ut.prototype._projDbl=function(){var e=this.x.redAdd(this.y).redSqr(),r=this.x.redSqr(),i=this.y.redSqr(),s,n,o,f,d,u;if(this.curve.twisted){f=this.curve._mulA(r);var v=f.redAdd(i);this.zOne?(s=e.redSub(r).redSub(i).redMul(v.redSub(this.curve.two)),n=v.redMul(f.redSub(i)),o=v.redSqr().redSub(v).redSub(v)):(d=this.z.redSqr(),u=v.redSub(d).redISub(d),s=e.redSub(r).redISub(i).redMul(u),n=v.redMul(f.redSub(i)),o=v.redMul(u))}else f=r.redAdd(i),d=this.curve._mulC(this.z).redSqr(),u=f.redSub(d).redSub(d),s=this.curve._mulC(e.redISub(f)).redMul(u),n=this.curve._mulC(f).redMul(r.redISub(i)),o=f.redMul(u);return this.curve.point(s,n,o)},ut.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},ut.prototype._extAdd=function(e){var r=this.y.redSub(this.x).redMul(e.y.redSub(e.x)),i=this.y.redAdd(this.x).redMul(e.y.redAdd(e.x)),s=this.t.redMul(this.curve.dd).redMul(e.t),n=this.z.redMul(e.z.redAdd(e.z)),o=i.redSub(r),f=n.redSub(s),d=n.redAdd(s),u=i.redAdd(r),v=o.redMul(f),w=d.redMul(u),S=o.redMul(u),I=f.redMul(d);return this.curve.point(v,w,I,S)},ut.prototype._projAdd=function(e){var r=this.z.redMul(e.z),i=r.redSqr(),s=this.x.redMul(e.x),n=this.y.redMul(e.y),o=this.curve.d.redMul(s).redMul(n),f=i.redSub(o),d=i.redAdd(o),u=this.x.redAdd(this.y).redMul(e.x.redAdd(e.y)).redISub(s).redISub(n),v=r.redMul(f).redMul(u),w,S;return this.curve.twisted?(w=r.redMul(d).redMul(n.redSub(this.curve._mulA(s))),S=f.redMul(d)):(w=r.redMul(d).redMul(n.redSub(s)),S=this.curve._mulC(f).redMul(d)),this.curve.point(v,w,S)},ut.prototype.add=function(e){return this.isInfinity()?e:e.isInfinity()?this:this.curve.extended?this._extAdd(e):this._projAdd(e)},ut.prototype.mul=function(e){return this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve._wnafMul(this,e)},ut.prototype.mulAdd=function(e,r,i){return this.curve._wnafMulAdd(1,[this,r],[e,i],2,!1)},ut.prototype.jmulAdd=function(e,r,i){return this.curve._wnafMulAdd(1,[this,r],[e,i],2,!0)},ut.prototype.normalize=function(){if(this.zOne)return this;var e=this.z.redInvm();return this.x=this.x.redMul(e),this.y=this.y.redMul(e),this.t&&(this.t=this.t.redMul(e)),this.z=this.curve.one,this.zOne=!0,this},ut.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},ut.prototype.getX=function(){return this.normalize(),this.x.fromRed()},ut.prototype.getY=function(){return this.normalize(),this.y.fromRed()},ut.prototype.eq=function(e){return this===e||this.getX().cmp(e.getX())===0&&this.getY().cmp(e.getY())===0},ut.prototype.eqXToP=function(e){var r=e.toRed(this.curve.red).redMul(this.z);if(this.x.cmp(r)===0)return!0;for(var i=e.clone(),s=this.curve.redN.redMul(this.z);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(r.redIAdd(s),this.x.cmp(r)===0)return!0}},ut.prototype.toP=ut.prototype.normalize,ut.prototype.mixedAdd=ut.prototype.add,function(t){var e=t;e.base=no,e.short=Rm,e.mont=Nm,e.edwards=Bm}(Ya);var ao={},Xa,yd;function Lm(){return yd||(yd=1,Xa={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}),Xa}(function(t){var e=t,r=hr,i=Ya,s=dr,n=s.assert;function o(u){u.type==="short"?this.curve=new i.short(u):u.type==="edwards"?this.curve=new i.edwards(u):this.curve=new i.mont(u),this.g=this.curve.g,this.n=this.curve.n,this.hash=u.hash,n(this.g.validate(),"Invalid curve"),n(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}e.PresetCurve=o;function f(u,v){Object.defineProperty(e,u,{configurable:!0,enumerable:!0,get:function(){var w=new o(v);return Object.defineProperty(e,u,{configurable:!0,enumerable:!0,value:w}),w}})}f("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:r.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),f("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:r.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),f("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:r.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),f("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:r.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),f("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:r.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),f("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:r.sha256,gRed:!1,g:["9"]}),f("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:r.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var d;try{d=Lm()}catch{d=void 0}f("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:r.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",d]})})(ao);var Fm=hr,Ji=Wa,md=Vi;function Ti(t){if(!(this instanceof Ti))return new Ti(t);this.hash=t.hash,this.predResist=!!t.predResist,this.outLen=this.hash.outSize,this.minEntropy=t.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=Ji.toArray(t.entropy,t.entropyEnc||"hex"),r=Ji.toArray(t.nonce,t.nonceEnc||"hex"),i=Ji.toArray(t.pers,t.persEnc||"hex");md(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,r,i)}var $m=Ti;Ti.prototype._init=function(e,r,i){var s=e.concat(r).concat(i);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var n=0;n<this.V.length;n++)this.K[n]=0,this.V[n]=1;this._update(s),this._reseed=1,this.reseedInterval=281474976710656},Ti.prototype._hmac=function(){return new Fm.hmac(this.hash,this.K)},Ti.prototype._update=function(e){var r=this._hmac().update(this.V).update([0]);e&&(r=r.update(e)),this.K=r.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())},Ti.prototype.reseed=function(e,r,i,s){typeof r!="string"&&(s=i,i=r,r=null),e=Ji.toArray(e,r),i=Ji.toArray(i,s),md(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(i||[])),this._reseed=1},Ti.prototype.generate=function(e,r,i,s){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof r!="string"&&(s=i,i=r,r=null),i&&(i=Ji.toArray(i,s||"hex"),this._update(i));for(var n=[];n.length<e;)this.V=this._hmac().update(this.V).digest(),n=n.concat(this.V);var o=n.slice(0,e);return this._update(i),this._reseed++,Ji.encode(o,r)};var Um=Yr.exports,zm=dr,Za=zm.assert;function qt(t,e){this.ec=t,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}var km=qt;qt.fromPublic=function(e,r,i){return r instanceof qt?r:new qt(e,{pub:r,pubEnc:i})},qt.fromPrivate=function(e,r,i){return r instanceof qt?r:new qt(e,{priv:r,privEnc:i})},qt.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},qt.prototype.getPublic=function(e,r){return typeof e=="string"&&(r=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),r?this.pub.encode(r,e):this.pub},qt.prototype.getPrivate=function(e){return e==="hex"?this.priv.toString(16,2):this.priv},qt.prototype._importPrivate=function(e,r){this.priv=new Um(e,r||16),this.priv=this.priv.umod(this.ec.curve.n)},qt.prototype._importPublic=function(e,r){if(e.x||e.y){this.ec.curve.type==="mont"?Za(e.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&Za(e.x&&e.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(e.x,e.y);return}this.pub=this.ec.curve.decodePoint(e,r)},qt.prototype.derive=function(e){return e.validate()||Za(e.validate(),"public point not validated"),e.mul(this.priv).getX()},qt.prototype.sign=function(e,r,i){return this.ec.sign(e,this,r,i)},qt.prototype.verify=function(e,r,i){return this.ec.verify(e,r,this,void 0,i)},qt.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var fo=Yr.exports,Qa=dr,qm=Qa.assert;function co(t,e){if(t instanceof co)return t;this._importDER(t,e)||(qm(t.r&&t.s,"Signature without r or s"),this.r=new fo(t.r,16),this.s=new fo(t.s,16),t.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=t.recoveryParam)}var jm=co;function Km(){this.place=0}function ef(t,e){var r=t[e.place++];if(!(r&128))return r;var i=r&15;if(i===0||i>4||t[e.place]===0)return!1;for(var s=0,n=0,o=e.place;n<i;n++,o++)s<<=8,s|=t[o],s>>>=0;return s<=127?!1:(e.place=o,s)}function wd(t){for(var e=0,r=t.length-1;!t[e]&&!(t[e+1]&128)&&e<r;)e++;return e===0?t:t.slice(e)}co.prototype._importDER=function(e,r){e=Qa.toArray(e,r);var i=new Km;if(e[i.place++]!==48)return!1;var s=ef(e,i);if(s===!1||s+i.place!==e.length||e[i.place++]!==2)return!1;var n=ef(e,i);if(n===!1||(e[i.place]&128)!==0)return!1;var o=e.slice(i.place,n+i.place);if(i.place+=n,e[i.place++]!==2)return!1;var f=ef(e,i);if(f===!1||e.length!==f+i.place||(e[i.place]&128)!==0)return!1;var d=e.slice(i.place,f+i.place);if(o[0]===0)if(o[1]&128)o=o.slice(1);else return!1;if(d[0]===0)if(d[1]&128)d=d.slice(1);else return!1;return this.r=new fo(o),this.s=new fo(d),this.recoveryParam=null,!0};function tf(t,e){if(e<128){t.push(e);return}var r=1+(Math.log(e)/Math.LN2>>>3);for(t.push(r|128);--r;)t.push(e>>>(r<<3)&255);t.push(e)}co.prototype.toDER=function(e){var r=this.r.toArray(),i=this.s.toArray();for(r[0]&128&&(r=[0].concat(r)),i[0]&128&&(i=[0].concat(i)),r=wd(r),i=wd(i);!i[0]&&!(i[1]&128);)i=i.slice(1);var s=[2];tf(s,r.length),s=s.concat(r),s.push(2),tf(s,i.length);var n=s.concat(i),o=[48];return tf(o,n.length),o=o.concat(n),Qa.encode(o,e)};var Cr=Yr.exports,_d=$m,Hm=dr,rf=ao,Vm=to.exports,Xi=Hm.assert,nf=km,ho=jm;function Sr(t){if(!(this instanceof Sr))return new Sr(t);typeof t=="string"&&(Xi(Object.prototype.hasOwnProperty.call(rf,t),"Unknown curve "+t),t=rf[t]),t instanceof rf.PresetCurve&&(t={curve:t}),this.curve=t.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=t.curve.g,this.g.precompute(t.curve.n.bitLength()+1),this.hash=t.hash||t.curve.hash}var Wm=Sr;Sr.prototype.keyPair=function(e){return new nf(this,e)},Sr.prototype.keyFromPrivate=function(e,r){return nf.fromPrivate(this,e,r)},Sr.prototype.keyFromPublic=function(e,r){return nf.fromPublic(this,e,r)},Sr.prototype.genKeyPair=function(e){e||(e={});for(var r=new _d({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||Vm(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),i=this.n.byteLength(),s=this.n.sub(new Cr(2));;){var n=new Cr(r.generate(i));if(!(n.cmp(s)>0))return n.iaddn(1),this.keyFromPrivate(n)}},Sr.prototype._truncateToN=function(e,r,i){var s;if(Cr.isBN(e)||typeof e=="number")e=new Cr(e,16),s=e.byteLength();else if(typeof e=="object")s=e.length,e=new Cr(e,16);else{var n=e.toString();s=n.length+1>>>1,e=new Cr(n,16)}typeof i!="number"&&(i=s*8);var o=i-this.n.bitLength();return o>0&&(e=e.ushrn(o)),!r&&e.cmp(this.n)>=0?e.sub(this.n):e},Sr.prototype.sign=function(e,r,i,s){if(typeof i=="object"&&(s=i,i=null),s||(s={}),typeof e!="string"&&typeof e!="number"&&!Cr.isBN(e)){Xi(typeof e=="object"&&e&&typeof e.length=="number","Expected message to be an array-like, a hex string, or a BN instance"),Xi(e.length>>>0===e.length);for(var n=0;n<e.length;n++)Xi((e[n]&255)===e[n])}r=this.keyFromPrivate(r,i),e=this._truncateToN(e,!1,s.msgBitLength),Xi(!e.isNeg(),"Can not sign a negative message");var o=this.n.byteLength(),f=r.getPrivate().toArray("be",o),d=e.toArray("be",o);Xi(new Cr(d).eq(e),"Can not sign message");for(var u=new _d({hash:this.hash,entropy:f,nonce:d,pers:s.pers,persEnc:s.persEnc||"utf8"}),v=this.n.sub(new Cr(1)),w=0;;w++){var S=s.k?s.k(w):new Cr(u.generate(this.n.byteLength()));if(S=this._truncateToN(S,!0),!(S.cmpn(1)<=0||S.cmp(v)>=0)){var I=this.g.mul(S);if(!I.isInfinity()){var M=I.getX(),R=M.umod(this.n);if(R.cmpn(0)!==0){var N=S.invm(this.n).mul(R.mul(r.getPrivate()).iadd(e));if(N=N.umod(this.n),N.cmpn(0)!==0){var C=(I.getY().isOdd()?1:0)|(M.cmp(R)!==0?2:0);return s.canonical&&N.cmp(this.nh)>0&&(N=this.n.sub(N),C^=1),new ho({r:R,s:N,recoveryParam:C})}}}}}},Sr.prototype.verify=function(e,r,i,s,n){n||(n={}),e=this._truncateToN(e,!1,n.msgBitLength),i=this.keyFromPublic(i,s),r=new ho(r,"hex");var o=r.r,f=r.s;if(o.cmpn(1)<0||o.cmp(this.n)>=0||f.cmpn(1)<0||f.cmp(this.n)>=0)return!1;var d=f.invm(this.n),u=d.mul(e).umod(this.n),v=d.mul(o).umod(this.n),w;return this.curve._maxwellTrick?(w=this.g.jmulAdd(u,i.getPublic(),v),w.isInfinity()?!1:w.eqXToP(o)):(w=this.g.mulAdd(u,i.getPublic(),v),w.isInfinity()?!1:w.getX().umod(this.n).cmp(o)===0)},Sr.prototype.recoverPubKey=function(t,e,r,i){Xi((3&r)===r,"The recovery param is more than two bits"),e=new ho(e,i);var s=this.n,n=new Cr(t),o=e.r,f=e.s,d=r&1,u=r>>1;if(o.cmp(this.curve.p.umod(this.curve.n))>=0&&u)throw new Error("Unable to find sencond key candinate");u?o=this.curve.pointFromX(o.add(this.curve.n),d):o=this.curve.pointFromX(o,d);var v=e.r.invm(s),w=s.sub(n).mul(v).umod(s),S=f.mul(v).umod(s);return this.g.mulAdd(w,o,S)},Sr.prototype.getKeyRecoveryParam=function(t,e,r,i){if(e=new ho(e,i),e.recoveryParam!==null)return e.recoveryParam;for(var s=0;s<4;s++){var n;try{n=this.recoverPubKey(t,e,s)}catch{continue}if(n.eq(r))return s}throw new Error("Unable to find valid recovery factor")};var ns=dr,Ed=ns.assert,xd=ns.parseBytes,Dn=ns.cachedProperty;function At(t,e){this.eddsa=t,this._secret=xd(e.secret),t.isPoint(e.pub)?this._pub=e.pub:this._pubBytes=xd(e.pub)}At.fromPublic=function(e,r){return r instanceof At?r:new At(e,{pub:r})},At.fromSecret=function(e,r){return r instanceof At?r:new At(e,{secret:r})},At.prototype.secret=function(){return this._secret},Dn(At,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())}),Dn(At,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())}),Dn(At,"privBytes",function(){var e=this.eddsa,r=this.hash(),i=e.encodingLength-1,s=r.slice(0,e.encodingLength);return s[0]&=248,s[i]&=127,s[i]|=64,s}),Dn(At,"priv",function(){return this.eddsa.decodeInt(this.privBytes())}),Dn(At,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()}),Dn(At,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)}),At.prototype.sign=function(e){return Ed(this._secret,"KeyPair can only verify"),this.eddsa.sign(e,this)},At.prototype.verify=function(e,r){return this.eddsa.verify(e,r,this)},At.prototype.getSecret=function(e){return Ed(this._secret,"KeyPair is public only"),ns.encode(this.secret(),e)},At.prototype.getPublic=function(e){return ns.encode(this.pubBytes(),e)};var Gm=At,Ym=Yr.exports,uo=dr,Sd=uo.assert,lo=uo.cachedProperty,Jm=uo.parseBytes;function Zi(t,e){this.eddsa=t,typeof e!="object"&&(e=Jm(e)),Array.isArray(e)&&(Sd(e.length===t.encodingLength*2,"Signature has invalid size"),e={R:e.slice(0,t.encodingLength),S:e.slice(t.encodingLength)}),Sd(e.R&&e.S,"Signature without R or S"),t.isPoint(e.R)&&(this._R=e.R),e.S instanceof Ym&&(this._S=e.S),this._Rencoded=Array.isArray(e.R)?e.R:e.Rencoded,this._Sencoded=Array.isArray(e.S)?e.S:e.Sencoded}lo(Zi,"S",function(){return this.eddsa.decodeInt(this.Sencoded())}),lo(Zi,"R",function(){return this.eddsa.decodePoint(this.Rencoded())}),lo(Zi,"Rencoded",function(){return this.eddsa.encodePoint(this.R())}),lo(Zi,"Sencoded",function(){return this.eddsa.encodeInt(this.S())}),Zi.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},Zi.prototype.toHex=function(){return uo.encode(this.toBytes(),"hex").toUpperCase()};var Xm=Zi,Zm=hr,Qm=ao,On=dr,e6=On.assert,Md=On.parseBytes,Id=Gm,Ad=Xm;function tr(t){if(e6(t==="ed25519","only tested with ed25519 so far"),!(this instanceof tr))return new tr(t);t=Qm[t].curve,this.curve=t,this.g=t.g,this.g.precompute(t.n.bitLength()+1),this.pointClass=t.point().constructor,this.encodingLength=Math.ceil(t.n.bitLength()/8),this.hash=Zm.sha512}var t6=tr;tr.prototype.sign=function(e,r){e=Md(e);var i=this.keyFromSecret(r),s=this.hashInt(i.messagePrefix(),e),n=this.g.mul(s),o=this.encodePoint(n),f=this.hashInt(o,i.pubBytes(),e).mul(i.priv()),d=s.add(f).umod(this.curve.n);return this.makeSignature({R:n,S:d,Rencoded:o})},tr.prototype.verify=function(e,r,i){if(e=Md(e),r=this.makeSignature(r),r.S().gte(r.eddsa.curve.n)||r.S().isNeg())return!1;var s=this.keyFromPublic(i),n=this.hashInt(r.Rencoded(),s.pubBytes(),e),o=this.g.mul(r.S()),f=r.R().add(s.pub().mul(n));return f.eq(o)},tr.prototype.hashInt=function(){for(var e=this.hash(),r=0;r<arguments.length;r++)e.update(arguments[r]);return On.intFromLE(e.digest()).umod(this.curve.n)},tr.prototype.keyFromPublic=function(e){return Id.fromPublic(this,e)},tr.prototype.keyFromSecret=function(e){return Id.fromSecret(this,e)},tr.prototype.makeSignature=function(e){return e instanceof Ad?e:new Ad(this,e)},tr.prototype.encodePoint=function(e){var r=e.getY().toArray("le",this.encodingLength);return r[this.encodingLength-1]|=e.getX().isOdd()?128:0,r},tr.prototype.decodePoint=function(e){e=On.parseBytes(e);var r=e.length-1,i=e.slice(0,r).concat(e[r]&-129),s=(e[r]&128)!==0,n=On.intFromLE(i);return this.curve.pointFromY(n,s)},tr.prototype.encodeInt=function(e){return e.toArray("le",this.encodingLength)},tr.prototype.decodeInt=function(e){return On.intFromLE(e)},tr.prototype.isPoint=function(e){return e instanceof this.pointClass},function(t){var e=t;e.version=Im.version,e.utils=dr,e.rand=to.exports,e.curve=Ya,e.curves=ao,e.ec=Wm,e.eddsa=t6}(pd);const r6={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}};var i6=Object.defineProperty,Dd=Object.getOwnPropertySymbols,n6=Object.prototype.hasOwnProperty,s6=Object.prototype.propertyIsEnumerable,Od=(t,e,r)=>e in t?i6(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,o6=(t,e)=>{for(var r in e||(e={}))n6.call(e,r)&&Od(t,r,e[r]);if(Dd)for(var r of Dd(e))s6.call(e,r)&&Od(t,r,e[r]);return t};const a6="ReactNative",Br={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},f6="js";function po(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function Qi(){return!Ks()&&!!Ma()&&navigator.product===a6}function c6(){return Qi()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="android"}function h6(){return Qi()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="ios"}function bo(){return!po()&&!!Ma()&&!!Ks()}function vo(){return Qi()?Br.reactNative:po()?Br.node:bo()?Br.browser:Br.unknown}function Rd(){var t;try{return Qi()&&typeof global<"u"&&typeof(global==null?void 0:global.Application)<"u"?(t=global.Application)==null?void 0:t.applicationId:void 0}catch{return}}function u6(t,e){const r=new URLSearchParams(t);for(const i of Object.keys(e).sort())if(e.hasOwnProperty(i)){const s=e[i];s!==void 0&&r.set(i,s)}return r.toString()}function d6(){return Eu()||{name:"",description:"",url:"",icons:[""]}}function l6(){if(vo()===Br.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:r,Version:i}=global.Platform;return[r,i].join("-")}const t=t3();if(t===null)return"unknown";const e=t.os?t.os.replace(" ","").toLowerCase():"unknown";return t.type==="browser"?[e,t.name,t.version].join("-"):[e,t.version].join("-")}function p6(){var t;const e=vo();return e===Br.browser?[e,((t=_u())==null?void 0:t.host)||"unknown"].join(":"):e}function Td(t,e,r){const i=l6(),s=p6();return[[t,e].join("-"),[f6,r].join("-"),i,s].join("/")}function b6({protocol:t,version:e,relayUrl:r,sdkVersion:i,auth:s,projectId:n,useOnCloseEvent:o,bundleId:f,packageName:d}){const u=r.split("?"),v=Td(t,e,i),w={auth:s,ua:v,projectId:n,useOnCloseEvent:o||void 0,packageName:d||void 0,bundleId:f||void 0},S=u6(u[1]||"",w);return u[0]+"?"+S}function Nd(t){return Object.fromEntries(t.entries())}function Pd(t){return new Map(Object.entries(t))}function v6(t=ie.FIVE_MINUTES,e){const r=ie.toMiliseconds(t||ie.FIVE_MINUTES);let i,s,n,o;return{resolve:f=>{n&&i&&(clearTimeout(n),i(f),o=Promise.resolve(f))},reject:f=>{n&&s&&(clearTimeout(n),s(f))},done:()=>new Promise((f,d)=>{if(o)return f(o);n=setTimeout(()=>{const u=new Error(e);o=Promise.reject(u),d(u)},r),i=f,s=d})}}function Ni(t,e,r){return new Promise(async(i,s)=>{const n=setTimeout(()=>s(new Error(r)),e);try{const o=await t;i(o)}catch(o){s(o)}clearTimeout(n)})}function Cd(t,e){if(typeof e=="string"&&e.startsWith(`${t}:`))return e;if(t.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(t.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${t}`)}function g6(t){return Cd("topic",t)}function y6(t){return Cd("id",t)}function m6(t){const[e,r]=t.split(":"),i={id:void 0,topic:void 0};if(e==="topic"&&typeof r=="string")i.topic=r;else if(e==="id"&&Number.isInteger(Number(r)))i.id=Number(r);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${r}`);return i}function ss(t,e){return ie.fromMiliseconds((e||Date.now())+ie.toMiliseconds(t))}function Bd(t){return Date.now()>=ie.toMiliseconds(t)}function sf(t,e){return`${t}${e?`:${e}`:""}`}function Ld(){return typeof crypto<"u"&&crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})}function Fd(){return typeof process<"u"&&process.env.IS_VITEST==="true"}function $d(t){return Buffer.from(t,"base64").toString("utf-8")}function w6(t){return new Promise(e=>setTimeout(e,t))}function os(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function _6(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function go(t,...e){if(!_6(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function of(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");os(t.outputLen),os(t.blockLen)}function Rn(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Ud(t,e){go(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}const yo=BigInt(2**32-1),zd=BigInt(32);function E6(t,e=!1){return e?{h:Number(t&yo),l:Number(t>>zd&yo)}:{h:Number(t>>zd&yo)|0,l:Number(t&yo)|0}}function x6(t,e=!1){let r=new Uint32Array(t.length),i=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:n,l:o}=E6(t[s],e);[r[s],i[s]]=[n,o]}return[r,i]}const S6=(t,e,r)=>t<<r|e>>>32-r,M6=(t,e,r)=>e<<r|t>>>32-r,I6=(t,e,r)=>e<<r-32|t>>>64-r,A6=(t,e,r)=>t<<r-32|e>>>64-r,Tn=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function D6(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function af(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function Xr(t,e){return t<<32-e|t>>>e}const kd=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function O6(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function qd(t){for(let e=0;e<t.length;e++)t[e]=O6(t[e])}function R6(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function Nn(t){return typeof t=="string"&&(t=R6(t)),go(t),t}class ff{clone(){return this._cloneInto()}}function jd(t){const e=i=>t().update(Nn(i)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function as(t=32){if(Tn&&typeof Tn.getRandomValues=="function")return Tn.getRandomValues(new Uint8Array(t));if(Tn&&typeof Tn.randomBytes=="function")return Tn.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}const Kd=[],Hd=[],Vd=[],T6=BigInt(0),fs=BigInt(1),N6=BigInt(2),P6=BigInt(7),C6=BigInt(256),B6=BigInt(113);for(let t=0,e=fs,r=1,i=0;t<24;t++){[r,i]=[i,(2*r+3*i)%5],Kd.push(2*(5*i+r)),Hd.push((t+1)*(t+2)/2%64);let s=T6;for(let n=0;n<7;n++)e=(e<<fs^(e>>P6)*B6)%C6,e&N6&&(s^=fs<<(fs<<BigInt(n))-fs);Vd.push(s)}const[L6,F6]=x6(Vd,!0),Wd=(t,e,r)=>r>32?I6(t,e,r):S6(t,e,r),Gd=(t,e,r)=>r>32?A6(t,e,r):M6(t,e,r);function $6(t,e=24){const r=new Uint32Array(10);for(let i=24-e;i<24;i++){for(let o=0;o<10;o++)r[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const f=(o+8)%10,d=(o+2)%10,u=r[d],v=r[d+1],w=Wd(u,v,1)^r[f],S=Gd(u,v,1)^r[f+1];for(let I=0;I<50;I+=10)t[o+I]^=w,t[o+I+1]^=S}let s=t[2],n=t[3];for(let o=0;o<24;o++){const f=Hd[o],d=Wd(s,n,f),u=Gd(s,n,f),v=Kd[o];s=t[v],n=t[v+1],t[v]=d,t[v+1]=u}for(let o=0;o<50;o+=10){for(let f=0;f<10;f++)r[f]=t[o+f];for(let f=0;f<10;f++)t[o+f]^=~r[(f+2)%10]&r[(f+4)%10]}t[0]^=L6[i],t[1]^=F6[i]}r.fill(0)}class cf extends ff{constructor(e,r,i,s=!1,n=24){if(super(),this.blockLen=e,this.suffix=r,this.outputLen=i,this.enableXOF=s,this.rounds=n,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,os(i),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=D6(this.state)}keccak(){kd||qd(this.state32),$6(this.state32,this.rounds),kd||qd(this.state32),this.posOut=0,this.pos=0}update(e){Rn(this);const{blockLen:r,state:i}=this;e=Nn(e);const s=e.length;for(let n=0;n<s;){const o=Math.min(r-this.pos,s-n);for(let f=0;f<o;f++)i[this.pos++]^=e[n++];this.pos===r&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:r,pos:i,blockLen:s}=this;e[i]^=r,(r&128)!==0&&i===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){Rn(this,!1),go(e),this.finish();const r=this.state,{blockLen:i}=this;for(let s=0,n=e.length;s<n;){this.posOut>=i&&this.keccak();const o=Math.min(i-this.posOut,n-s);e.set(r.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return os(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(Ud(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:r,suffix:i,outputLen:s,rounds:n,enableXOF:o}=this;return e||(e=new cf(r,i,s,o,n)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=n,e.suffix=i,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}}((t,e,r)=>jd(()=>new cf(e,t,r)))(1,136,256/8);function hf(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function Yd(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function lr(t,...e){if(!Yd(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function Jd(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function U6(t,e){lr(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}function Xd(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}const Pi=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),z6=t=>new DataView(t.buffer,t.byteOffset,t.byteLength);if(!(new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68))throw new Error("Non little-endian hardware is not supported");function k6(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function uf(t){if(typeof t=="string")t=k6(t);else if(Yd(t))t=df(t);else throw new Error("Uint8Array expected, got "+typeof t);return t}function q6(t,e){if(e==null||typeof e!="object")throw new Error("options must be defined");return Object.assign(t,e)}function j6(t,e){if(t.length!==e.length)return!1;let r=0;for(let i=0;i<t.length;i++)r|=t[i]^e[i];return r===0}const K6=(t,e)=>{function r(i,...s){if(lr(i),t.nonceLength!==void 0){const u=s[0];if(!u)throw new Error("nonce / iv required");t.varSizeNonce?lr(u):lr(u,t.nonceLength)}const n=t.tagLength;n&&s[1]!==void 0&&lr(s[1]);const o=e(i,...s),f=(u,v)=>{if(v!==void 0){if(u!==2)throw new Error("cipher output not supported");lr(v)}};let d=!1;return{encrypt(u,v){if(d)throw new Error("cannot encrypt() twice with same key + nonce");return d=!0,lr(u),f(o.encrypt.length,v),o.encrypt(u,v)},decrypt(u,v){if(lr(u),n&&u.length<n)throw new Error("invalid ciphertext length: smaller than tagLength="+n);return f(o.decrypt.length,v),o.decrypt(u,v)}}}return Object.assign(r,t),r};function Zd(t,e,r=!0){if(e===void 0)return new Uint8Array(t);if(e.length!==t)throw new Error("invalid output length, expected "+t+", got: "+e.length);if(r&&!H6(e))throw new Error("invalid output, must be aligned");return e}function Qd(t,e,r,i){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,i);const s=BigInt(32),n=BigInt(4294967295),o=Number(r>>s&n),f=Number(r&n),d=i?4:0,u=i?0:4;t.setUint32(e+d,o,i),t.setUint32(e+u,f,i)}function H6(t){return t.byteOffset%4===0}function df(t){return Uint8Array.from(t)}function Pn(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}const e0=t=>Uint8Array.from(t.split("").map(e=>e.charCodeAt(0))),V6=e0("expand 16-byte k"),W6=e0("expand 32-byte k"),G6=Pi(V6),Y6=Pi(W6);function $e(t,e){return t<<e|t>>>32-e}function lf(t){return t.byteOffset%4===0}const mo=64,J6=16,t0=2**32-1,r0=new Uint32Array;function X6(t,e,r,i,s,n,o,f){const d=s.length,u=new Uint8Array(mo),v=Pi(u),w=lf(s)&&lf(n),S=w?Pi(s):r0,I=w?Pi(n):r0;for(let M=0;M<d;o++){if(t(e,r,i,v,o,f),o>=t0)throw new Error("arx: counter overflow");const R=Math.min(mo,d-M);if(w&&R===mo){const N=M/4;if(M%4!==0)throw new Error("arx: invalid block position");for(let C=0,B;C<J6;C++)B=N+C,I[B]=S[B]^v[C];M+=mo;continue}for(let N=0,C;N<R;N++)C=M+N,n[C]=s[C]^u[N];M+=R}}function Z6(t,e){const{allowShortKeys:r,extendNonceFn:i,counterLength:s,counterRight:n,rounds:o}=q6({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof t!="function")throw new Error("core must be a function");return hf(s),hf(o),Xd(n),Xd(r),(f,d,u,v,w=0)=>{lr(f),lr(d),lr(u);const S=u.length;if(v===void 0&&(v=new Uint8Array(S)),lr(v),hf(w),w<0||w>=t0)throw new Error("arx: counter overflow");if(v.length<S)throw new Error(`arx: output (${v.length}) is shorter than data (${S})`);const I=[];let M=f.length,R,N;if(M===32)I.push(R=df(f)),N=Y6;else if(M===16&&r)R=new Uint8Array(32),R.set(f),R.set(f,16),N=G6,I.push(R);else throw new Error(`arx: invalid 32-byte key, got length=${M}`);lf(d)||I.push(d=df(d));const C=Pi(R);if(i){if(d.length!==24)throw new Error("arx: extended nonce must be 24 bytes");i(N,C,Pi(d.subarray(0,16)),C),d=d.subarray(16)}const B=16-s;if(B!==d.length)throw new Error(`arx: nonce must be ${B} or 16 bytes`);if(B!==12){const k=new Uint8Array(12);k.set(d,n?0:12-d.length),d=k,I.push(d)}const F=Pi(d);return X6(t,N,C,F,u,v,w,o),Pn(...I),v}}const Ft=(t,e)=>t[e++]&255|(t[e++]&255)<<8;class Q6{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=uf(e),lr(e,32);const r=Ft(e,0),i=Ft(e,2),s=Ft(e,4),n=Ft(e,6),o=Ft(e,8),f=Ft(e,10),d=Ft(e,12),u=Ft(e,14);this.r[0]=r&8191,this.r[1]=(r>>>13|i<<3)&8191,this.r[2]=(i>>>10|s<<6)&7939,this.r[3]=(s>>>7|n<<9)&8191,this.r[4]=(n>>>4|o<<12)&255,this.r[5]=o>>>1&8190,this.r[6]=(o>>>14|f<<2)&8191,this.r[7]=(f>>>11|d<<5)&8065,this.r[8]=(d>>>8|u<<8)&8191,this.r[9]=u>>>5&127;for(let v=0;v<8;v++)this.pad[v]=Ft(e,16+2*v)}process(e,r,i=!1){const s=i?0:2048,{h:n,r:o}=this,f=o[0],d=o[1],u=o[2],v=o[3],w=o[4],S=o[5],I=o[6],M=o[7],R=o[8],N=o[9],C=Ft(e,r+0),B=Ft(e,r+2),F=Ft(e,r+4),k=Ft(e,r+6),V=Ft(e,r+8),H=Ft(e,r+10),G=Ft(e,r+12),J=Ft(e,r+14);let j=n[0]+(C&8191),te=n[1]+((C>>>13|B<<3)&8191),D=n[2]+((B>>>10|F<<6)&8191),p=n[3]+((F>>>7|k<<9)&8191),l=n[4]+((k>>>4|V<<12)&8191),a=n[5]+(V>>>1&8191),c=n[6]+((V>>>14|H<<2)&8191),b=n[7]+((H>>>11|G<<5)&8191),_=n[8]+((G>>>8|J<<8)&8191),x=n[9]+(J>>>5|s),m=0,h=m+j*f+te*(5*N)+D*(5*R)+p*(5*M)+l*(5*I);m=h>>>13,h&=8191,h+=a*(5*S)+c*(5*w)+b*(5*v)+_*(5*u)+x*(5*d),m+=h>>>13,h&=8191;let y=m+j*d+te*f+D*(5*N)+p*(5*R)+l*(5*M);m=y>>>13,y&=8191,y+=a*(5*I)+c*(5*S)+b*(5*w)+_*(5*v)+x*(5*u),m+=y>>>13,y&=8191;let g=m+j*u+te*d+D*f+p*(5*N)+l*(5*R);m=g>>>13,g&=8191,g+=a*(5*M)+c*(5*I)+b*(5*S)+_*(5*w)+x*(5*v),m+=g>>>13,g&=8191;let A=m+j*v+te*u+D*d+p*f+l*(5*N);m=A>>>13,A&=8191,A+=a*(5*R)+c*(5*M)+b*(5*I)+_*(5*S)+x*(5*w),m+=A>>>13,A&=8191;let U=m+j*w+te*v+D*u+p*d+l*f;m=U>>>13,U&=8191,U+=a*(5*N)+c*(5*R)+b*(5*M)+_*(5*I)+x*(5*S),m+=U>>>13,U&=8191;let E=m+j*S+te*w+D*v+p*u+l*d;m=E>>>13,E&=8191,E+=a*f+c*(5*N)+b*(5*R)+_*(5*M)+x*(5*I),m+=E>>>13,E&=8191;let T=m+j*I+te*S+D*w+p*v+l*u;m=T>>>13,T&=8191,T+=a*d+c*f+b*(5*N)+_*(5*R)+x*(5*M),m+=T>>>13,T&=8191;let L=m+j*M+te*I+D*S+p*w+l*v;m=L>>>13,L&=8191,L+=a*u+c*d+b*f+_*(5*N)+x*(5*R),m+=L>>>13,L&=8191;let $=m+j*R+te*M+D*I+p*S+l*w;m=$>>>13,$&=8191,$+=a*v+c*u+b*d+_*f+x*(5*N),m+=$>>>13,$&=8191;let z=m+j*N+te*R+D*M+p*I+l*S;m=z>>>13,z&=8191,z+=a*w+c*v+b*u+_*d+x*f,m+=z>>>13,z&=8191,m=(m<<2)+m|0,m=m+h|0,h=m&8191,m=m>>>13,y+=m,n[0]=h,n[1]=y,n[2]=g,n[3]=A,n[4]=U,n[5]=E,n[6]=T,n[7]=L,n[8]=$,n[9]=z}finalize(){const{h:e,pad:r}=this,i=new Uint16Array(10);let s=e[1]>>>13;e[1]&=8191;for(let f=2;f<10;f++)e[f]+=s,s=e[f]>>>13,e[f]&=8191;e[0]+=s*5,s=e[0]>>>13,e[0]&=8191,e[1]+=s,s=e[1]>>>13,e[1]&=8191,e[2]+=s,i[0]=e[0]+5,s=i[0]>>>13,i[0]&=8191;for(let f=1;f<10;f++)i[f]=e[f]+s,s=i[f]>>>13,i[f]&=8191;i[9]-=8192;let n=(s^1)-1;for(let f=0;f<10;f++)i[f]&=n;n=~n;for(let f=0;f<10;f++)e[f]=e[f]&n|i[f];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let o=e[0]+r[0];e[0]=o&65535;for(let f=1;f<8;f++)o=(e[f]+r[f]|0)+(o>>>16)|0,e[f]=o&65535;Pn(i)}update(e){Jd(this);const{buffer:r,blockLen:i}=this;e=uf(e);const s=e.length;for(let n=0;n<s;){const o=Math.min(i-this.pos,s-n);if(o===i){for(;i<=s-n;n+=i)this.process(e,n);continue}r.set(e.subarray(n,n+o),this.pos),this.pos+=o,n+=o,this.pos===i&&(this.process(r,0,!1),this.pos=0)}return this}destroy(){Pn(this.h,this.r,this.buffer,this.pad)}digestInto(e){Jd(this),U6(e,this),this.finished=!0;const{buffer:r,h:i}=this;let{pos:s}=this;if(s){for(r[s++]=1;s<16;s++)r[s]=0;this.process(r,0,!0)}this.finalize();let n=0;for(let o=0;o<8;o++)e[n++]=i[o]>>>0,e[n++]=i[o]>>>8;return e}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const i=e.slice(0,r);return this.destroy(),i}}function e4(t){const e=(i,s)=>t(s).update(uf(i)).digest(),r=t(new Uint8Array(32));return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=i=>t(i),e}const t4=e4(t=>new Q6(t));function r4(t,e,r,i,s,n=20){let o=t[0],f=t[1],d=t[2],u=t[3],v=e[0],w=e[1],S=e[2],I=e[3],M=e[4],R=e[5],N=e[6],C=e[7],B=s,F=r[0],k=r[1],V=r[2],H=o,G=f,J=d,j=u,te=v,D=w,p=S,l=I,a=M,c=R,b=N,_=C,x=B,m=F,h=k,y=V;for(let A=0;A<n;A+=2)H=H+te|0,x=$e(x^H,16),a=a+x|0,te=$e(te^a,12),H=H+te|0,x=$e(x^H,8),a=a+x|0,te=$e(te^a,7),G=G+D|0,m=$e(m^G,16),c=c+m|0,D=$e(D^c,12),G=G+D|0,m=$e(m^G,8),c=c+m|0,D=$e(D^c,7),J=J+p|0,h=$e(h^J,16),b=b+h|0,p=$e(p^b,12),J=J+p|0,h=$e(h^J,8),b=b+h|0,p=$e(p^b,7),j=j+l|0,y=$e(y^j,16),_=_+y|0,l=$e(l^_,12),j=j+l|0,y=$e(y^j,8),_=_+y|0,l=$e(l^_,7),H=H+D|0,y=$e(y^H,16),b=b+y|0,D=$e(D^b,12),H=H+D|0,y=$e(y^H,8),b=b+y|0,D=$e(D^b,7),G=G+p|0,x=$e(x^G,16),_=_+x|0,p=$e(p^_,12),G=G+p|0,x=$e(x^G,8),_=_+x|0,p=$e(p^_,7),J=J+l|0,m=$e(m^J,16),a=a+m|0,l=$e(l^a,12),J=J+l|0,m=$e(m^J,8),a=a+m|0,l=$e(l^a,7),j=j+te|0,h=$e(h^j,16),c=c+h|0,te=$e(te^c,12),j=j+te|0,h=$e(h^j,8),c=c+h|0,te=$e(te^c,7);let g=0;i[g++]=o+H|0,i[g++]=f+G|0,i[g++]=d+J|0,i[g++]=u+j|0,i[g++]=v+te|0,i[g++]=w+D|0,i[g++]=S+p|0,i[g++]=I+l|0,i[g++]=M+a|0,i[g++]=R+c|0,i[g++]=N+b|0,i[g++]=C+_|0,i[g++]=B+x|0,i[g++]=F+m|0,i[g++]=k+h|0,i[g++]=V+y|0}const i4=Z6(r4,{counterRight:!1,counterLength:4,allowShortKeys:!1}),n4=new Uint8Array(16),i0=(t,e)=>{t.update(e);const r=e.length%16;r&&t.update(n4.subarray(r))},s4=new Uint8Array(32);function n0(t,e,r,i,s){const n=t(e,r,s4),o=t4.create(n);s&&i0(o,s),i0(o,i);const f=new Uint8Array(16),d=z6(f);Qd(d,0,BigInt(s?s.length:0),!0),Qd(d,8,BigInt(i.length),!0),o.update(f);const u=o.digest();return Pn(n,f),u}const o4=t=>(e,r,i)=>({encrypt(s,n){const o=s.length;n=Zd(o+16,n,!1),n.set(s);const f=n.subarray(0,-16);t(e,r,f,f,1);const d=n0(t,e,r,f,i);return n.set(d,o),Pn(d),n},decrypt(s,n){n=Zd(s.length-16,n,!1);const o=s.subarray(0,-16),f=s.subarray(-16),d=n0(t,e,r,o,i);if(!j6(f,d))throw new Error("invalid tag");return n.set(s.subarray(0,-16)),t(e,r,n,n,1),Pn(d),n}}),s0=K6({blockSize:64,nonceLength:12,tagLength:16},o4(i4));class o0 extends ff{constructor(e,r){super(),this.finished=!1,this.destroyed=!1,of(e);const i=Nn(r);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,n=new Uint8Array(s);n.set(i.length>s?e.create().update(i).digest():i);for(let o=0;o<n.length;o++)n[o]^=54;this.iHash.update(n),this.oHash=e.create();for(let o=0;o<n.length;o++)n[o]^=106;this.oHash.update(n),n.fill(0)}update(e){return Rn(this),this.iHash.update(e),this}digestInto(e){Rn(this),go(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:r,iHash:i,finished:s,destroyed:n,blockLen:o,outputLen:f}=this;return e=e,e.finished=s,e.destroyed=n,e.blockLen=o,e.outputLen=f,e.oHash=r._cloneInto(e.oHash),e.iHash=i._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const pf=(t,e,r)=>new o0(t,e).update(r).digest();pf.create=(t,e)=>new o0(t,e);function a4(t,e,r){return of(t),r===void 0&&(r=new Uint8Array(t.outputLen)),pf(t,Nn(r),Nn(e))}const bf=new Uint8Array([0]),a0=new Uint8Array;function f4(t,e,r,i=32){if(of(t),os(i),i>255*t.outputLen)throw new Error("Length should be <= 255*HashLen");const s=Math.ceil(i/t.outputLen);r===void 0&&(r=a0);const n=new Uint8Array(s*t.outputLen),o=pf.create(t,e),f=o._cloneInto(),d=new Uint8Array(o.outputLen);for(let u=0;u<s;u++)bf[0]=u+1,f.update(u===0?a0:d).update(r).update(bf).digestInto(d),n.set(d,t.outputLen*u),o._cloneInto(f);return o.destroy(),f.destroy(),d.fill(0),bf.fill(0),n.slice(0,i)}const c4=(t,e,r,i,s)=>f4(t,a4(t,e,r),i,s);function h4(t,e,r,i){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,i);const s=BigInt(32),n=BigInt(4294967295),o=Number(r>>s&n),f=Number(r&n),d=i?4:0,u=i?0:4;t.setUint32(e+d,o,i),t.setUint32(e+u,f,i)}function u4(t,e,r){return t&e^~t&r}function d4(t,e,r){return t&e^t&r^e&r}class l4 extends ff{constructor(e,r,i,s){super(),this.blockLen=e,this.outputLen=r,this.padOffset=i,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=af(this.buffer)}update(e){Rn(this);const{view:r,buffer:i,blockLen:s}=this;e=Nn(e);const n=e.length;for(let o=0;o<n;){const f=Math.min(s-this.pos,n-o);if(f===s){const d=af(e);for(;s<=n-o;o+=s)this.process(d,o);continue}i.set(e.subarray(o,o+f),this.pos),this.pos+=f,o+=f,this.pos===s&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Rn(this),Ud(e,this),this.finished=!0;const{buffer:r,view:i,blockLen:s,isLE:n}=this;let{pos:o}=this;r[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(i,0),o=0);for(let w=o;w<s;w++)r[w]=0;h4(i,s-8,BigInt(this.length*8),n),this.process(i,0);const f=af(e),d=this.outputLen;if(d%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=d/4,v=this.get();if(u>v.length)throw new Error("_sha2: outputLen bigger than state");for(let w=0;w<u;w++)f.setUint32(4*w,v[w],n)}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const i=e.slice(0,r);return this.destroy(),i}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:r,buffer:i,length:s,finished:n,destroyed:o,pos:f}=this;return e.length=s,e.pos=f,e.finished=n,e.destroyed=o,s%r&&e.buffer.set(i),e}}const p4=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Ci=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Bi=new Uint32Array(64);class b4 extends l4{constructor(){super(64,32,8,!1),this.A=Ci[0]|0,this.B=Ci[1]|0,this.C=Ci[2]|0,this.D=Ci[3]|0,this.E=Ci[4]|0,this.F=Ci[5]|0,this.G=Ci[6]|0,this.H=Ci[7]|0}get(){const{A:e,B:r,C:i,D:s,E:n,F:o,G:f,H:d}=this;return[e,r,i,s,n,o,f,d]}set(e,r,i,s,n,o,f,d){this.A=e|0,this.B=r|0,this.C=i|0,this.D=s|0,this.E=n|0,this.F=o|0,this.G=f|0,this.H=d|0}process(e,r){for(let w=0;w<16;w++,r+=4)Bi[w]=e.getUint32(r,!1);for(let w=16;w<64;w++){const S=Bi[w-15],I=Bi[w-2],M=Xr(S,7)^Xr(S,18)^S>>>3,R=Xr(I,17)^Xr(I,19)^I>>>10;Bi[w]=R+Bi[w-7]+M+Bi[w-16]|0}let{A:i,B:s,C:n,D:o,E:f,F:d,G:u,H:v}=this;for(let w=0;w<64;w++){const S=Xr(f,6)^Xr(f,11)^Xr(f,25),I=v+S+u4(f,d,u)+p4[w]+Bi[w]|0,M=(Xr(i,2)^Xr(i,13)^Xr(i,22))+d4(i,s,n)|0;v=u,u=d,d=f,f=o+I|0,o=n,n=s,s=i,i=I+M|0}i=i+this.A|0,s=s+this.B|0,n=n+this.C|0,o=o+this.D|0,f=f+this.E|0,d=d+this.F|0,u=u+this.G|0,v=v+this.H|0,this.set(i,s,n,o,f,d,u,v)}roundClean(){Bi.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const wo=jd(()=>new b4);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const f0=BigInt(0);function vf(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function c0(t){if(!vf(t))throw new Error("Uint8Array expected")}const v4=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function g4(t){c0(t);let e="";for(let r=0;r<t.length;r++)e+=v4[t[r]];return e}function y4(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?f0:BigInt("0x"+t)}const fi={_0:48,_9:57,A:65,F:70,a:97,f:102};function h0(t){if(t>=fi._0&&t<=fi._9)return t-fi._0;if(t>=fi.A&&t<=fi.F)return t-(fi.A-10);if(t>=fi.a&&t<=fi.f)return t-(fi.a-10)}function u0(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,r=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const i=new Uint8Array(r);for(let s=0,n=0;s<r;s++,n+=2){const o=h0(t.charCodeAt(n)),f=h0(t.charCodeAt(n+1));if(o===void 0||f===void 0){const d=t[n]+t[n+1];throw new Error('hex string expected, got non-hex character "'+d+'" at index '+n)}i[s]=o*16+f}return i}function d0(t){return c0(t),y4(g4(Uint8Array.from(t).reverse()))}function m4(t,e){return u0(t.toString(16).padStart(e*2,"0"))}function w4(t,e){return m4(t,e).reverse()}function l0(t,e,r){let i;if(typeof e=="string")try{i=u0(e)}catch(n){throw new Error(t+" must be hex string or Uint8Array, cause: "+n)}else if(vf(e))i=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=i.length;if(typeof r=="number"&&s!==r)throw new Error(t+" of length "+r+" expected, got "+s);return i}const gf=t=>typeof t=="bigint"&&f0<=t;function _4(t,e,r){return gf(t)&&gf(e)&&gf(r)&&e<=t&&t<r}function p0(t,e,r,i){if(!_4(e,r,i))throw new Error("expected valid "+t+": "+r+" <= n < "+i+", got "+e)}const E4={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||vf(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function x4(t,e,r={}){const i=(s,n,o)=>{const f=E4[n];if(typeof f!="function")throw new Error("invalid validator function");const d=t[s];if(!(o&&d===void 0)&&!f(d,t))throw new Error("param "+String(s)+" is invalid. Expected "+n+", got "+d)};for(const[s,n]of Object.entries(e))i(s,n,!1);for(const[s,n]of Object.entries(r))i(s,n,!0);return t}const Cn=BigInt(0),_o=BigInt(1);function b0(t,e){const r=t%e;return r>=Cn?r:e+r}function S4(t,e,r){if(e<Cn)throw new Error("invalid exponent, negatives unsupported");if(r<=Cn)throw new Error("invalid modulus");if(r===_o)return Cn;let i=_o;for(;e>Cn;)e&_o&&(i=i*t%r),t=t*t%r,e>>=_o;return i}function Lr(t,e,r){let i=t;for(;e-- >Cn;)i*=i,i%=r;return i}BigInt(0),BigInt(1),BigInt(0),BigInt(1),BigInt(2),BigInt(8);const Bn=BigInt(0),yf=BigInt(1);function M4(t){return x4(t,{a:"bigint"},{montgomeryBits:"isSafeInteger",nByteLength:"isSafeInteger",adjustScalarBytes:"function",domain:"function",powPminus2:"function",Gu:"bigint"}),Object.freeze(o6({},t))}function I4(t){const e=M4(t),{P:r}=e,i=B=>b0(B,r),s=e.montgomeryBits,n=Math.ceil(s/8),o=e.nByteLength,f=e.adjustScalarBytes||(B=>B),d=e.powPminus2||(B=>S4(B,r-BigInt(2),r));function u(B,F,k){const V=i(B*(F-k));return F=i(F-V),k=i(k+V),[F,k]}const v=(e.a-BigInt(2))/BigInt(4);function w(B,F){p0("u",B,Bn,r),p0("scalar",F,Bn,r);const k=F,V=B;let H=yf,G=Bn,J=B,j=yf,te=Bn,D;for(let l=BigInt(s-1);l>=Bn;l--){const a=k>>l&yf;te^=a,D=u(te,H,J),H=D[0],J=D[1],D=u(te,G,j),G=D[0],j=D[1],te=a;const c=H+G,b=i(c*c),_=H-G,x=i(_*_),m=b-x,h=J+j,y=J-j,g=i(y*c),A=i(h*_),U=g+A,E=g-A;J=i(U*U),j=i(V*i(E*E)),H=i(b*x),G=i(m*(b+i(v*m)))}D=u(te,H,J),H=D[0],J=D[1],D=u(te,G,j),G=D[0],j=D[1];const p=d(G);return i(H*p)}function S(B){return w4(i(B),n)}function I(B){const F=l0("u coordinate",B,n);return o===32&&(F[31]&=127),d0(F)}function M(B){const F=l0("scalar",B),k=F.length;if(k!==n&&k!==o){let V=""+n+" or "+o;throw new Error("invalid scalar, expected "+V+" bytes, got "+k)}return d0(f(F))}function R(B,F){const k=I(F),V=M(B),H=w(k,V);if(H===Bn)throw new Error("invalid private or public key received");return S(H)}const N=S(e.Gu);function C(B){return R(B,N)}return{scalarMult:R,scalarMultBase:C,getSharedSecret:(B,F)=>R(B,F),getPublicKey:B=>C(B),utils:{randomPrivateKey:()=>e.randomBytes(e.nByteLength)},GuBytes:N}}const mf=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949");BigInt(0);const A4=BigInt(1),v0=BigInt(2),D4=BigInt(3),O4=BigInt(5);BigInt(8);function R4(t){const e=BigInt(10),r=BigInt(20),i=BigInt(40),s=BigInt(80),n=mf,o=t*t%n*t%n,f=Lr(o,v0,n)*o%n,d=Lr(f,A4,n)*t%n,u=Lr(d,O4,n)*d%n,v=Lr(u,e,n)*u%n,w=Lr(v,r,n)*v%n,S=Lr(w,i,n)*w%n,I=Lr(S,s,n)*S%n,M=Lr(I,s,n)*S%n,R=Lr(M,e,n)*u%n;return{pow_p_5_8:Lr(R,v0,n)*t%n,b2:o}}function T4(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}const wf=I4({P:mf,a:BigInt(486662),montgomeryBits:255,nByteLength:32,Gu:BigInt(9),powPminus2:t=>{const e=mf,{pow_p_5_8:r,b2:i}=R4(t);return b0(Lr(r,D4,e)*i,e)},adjustScalarBytes:T4,randomBytes:as}),g0="base10",jt="base16",Eo="base64pad",cs="utf8",y0=0,Ln=1,xo=2,N4=0,m0=1,hs=12,_f=32;function P4(){const t=wf.utils.randomPrivateKey(),e=wf.getPublicKey(t);return{privateKey:Gt(t,jt),publicKey:Gt(e,jt)}}function Ef(){const t=as(_f);return Gt(t,jt)}function C4(t,e){const r=wf.getSharedSecret(cr(t,jt),cr(e,jt)),i=c4(wo,r,void 0,void 0,_f);return Gt(i,jt)}function B4(t){const e=wo(cr(t,jt));return Gt(e,jt)}function xf(t){const e=wo(cr(t,cs));return Gt(e,jt)}function w0(t){return cr(`${t}`,g0)}function en(t){return Number(Gt(t,g0))}function L4(t){const e=w0(typeof t.type<"u"?t.type:y0);if(en(e)===Ln&&typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const r=typeof t.senderPublicKey<"u"?cr(t.senderPublicKey,jt):void 0,i=typeof t.iv<"u"?cr(t.iv,jt):as(hs),s=cr(t.symKey,jt),n=s0(s,i).encrypt(cr(t.message,cs));return _0({type:e,sealed:n,iv:i,senderPublicKey:r,encoding:t.encoding})}function F4(t){const e=cr(t.symKey,jt),{sealed:r,iv:i}=us(t),s=s0(e,i).decrypt(r);if(s===null)throw new Error("Failed to decrypt");return Gt(s,cs)}function $4(t,e){const r=w0(xo),i=as(hs),s=cr(t,cs);return _0({type:r,sealed:s,iv:i,encoding:e})}function U4(t,e){const{sealed:r}=us({encoded:t,encoding:e});return Gt(r,cs)}function _0(t){const{encoding:e=Eo}=t;if(en(t.type)===xo)return Gt(Va([t.type,t.sealed]),e);if(en(t.type)===Ln){if(typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return Gt(Va([t.type,t.senderPublicKey,t.iv,t.sealed]),e)}return Gt(Va([t.type,t.iv,t.sealed]),e)}function us(t){const{encoded:e,encoding:r=Eo}=t,i=cr(e,r),s=i.slice(N4,m0),n=m0;if(en(s)===Ln){const u=n+_f,v=u+hs,w=i.slice(n,u),S=i.slice(u,v),I=i.slice(v);return{type:s,sealed:I,iv:S,senderPublicKey:w}}if(en(s)===xo){const u=i.slice(n),v=as(hs);return{type:s,sealed:u,iv:v}}const o=n+hs,f=i.slice(n,o),d=i.slice(o);return{type:s,sealed:d,iv:f}}function z4(t,e){const r=us({encoded:t,encoding:e?.encoding});return E0({type:en(r.type),senderPublicKey:typeof r.senderPublicKey<"u"?Gt(r.senderPublicKey,jt):void 0,receiverPublicKey:e?.receiverPublicKey})}function E0(t){const e=t?.type||y0;if(e===Ln){if(typeof t?.senderPublicKey>"u")throw new Error("missing sender public key");if(typeof t?.receiverPublicKey>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:t?.senderPublicKey,receiverPublicKey:t?.receiverPublicKey}}function x0(t){return t.type===Ln&&typeof t.senderPublicKey=="string"&&typeof t.receiverPublicKey=="string"}function S0(t){return t.type===xo}function k4(t){return new pd.ec("p256").keyFromPublic({x:Buffer.from(t.x,"base64").toString("hex"),y:Buffer.from(t.y,"base64").toString("hex")},"hex")}function q4(t){let e=t.replace(/-/g,"+").replace(/_/g,"/");const r=e.length%4;return r>0&&(e+="=".repeat(4-r)),e}function j4(t){return Buffer.from(q4(t),"base64")}function K4(t,e){const[r,i,s]=t.split("."),n=j4(s);if(n.length!==64)throw new Error("Invalid signature length");const o=n.slice(0,32).toString("hex"),f=n.slice(32,64).toString("hex"),d=`${r}.${i}`,u=wo(d),v=k4(e),w=Gt(u,jt);if(!v.verify(w,{r:o,s:f}))throw new Error("Invalid signature");return _a(t).payload}const H4="irn";function So(t){return t?.relay||{protocol:H4}}function ds(t){const e=r6[t];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${t}`);return e}function V4(t,e="-"){const r={},i="relay"+e;return Object.keys(t).forEach(s=>{if(s.startsWith(i)){const n=s.replace(i,""),o=t[s];r[n]=o}}),r}function M0(t){if(!t.includes("wc:")){const u=$d(t);u!=null&&u.includes("wc:")&&(t=u)}t=t.includes("wc://")?t.replace("wc://",""):t,t=t.includes("wc:")?t.replace("wc:",""):t;const e=t.indexOf(":"),r=t.indexOf("?")!==-1?t.indexOf("?"):void 0,i=t.substring(0,e),s=t.substring(e+1,r).split("@"),n=typeof r<"u"?t.substring(r):"",o=new URLSearchParams(n),f={};o.forEach((u,v)=>{f[v]=u});const d=typeof f.methods=="string"?f.methods.split(","):void 0;return{protocol:i,topic:W4(s[0]),version:parseInt(s[1],10),symKey:f.symKey,relay:V4(f),methods:d,expiryTimestamp:f.expiryTimestamp?parseInt(f.expiryTimestamp,10):void 0}}function W4(t){return t.startsWith("//")?t.substring(2):t}function G4(t,e="-"){const r="relay",i={};return Object.keys(t).forEach(s=>{const n=r+e+s;t[s]&&(i[n]=t[s])}),i}function I0(t){const e=new URLSearchParams,r=G4(t.relay);Object.keys(r).sort().forEach(s=>{e.set(s,r[s])}),e.set("symKey",t.symKey),t.expiryTimestamp&&e.set("expiryTimestamp",t.expiryTimestamp.toString()),t.methods&&e.set("methods",t.methods.join(","));const i=e.toString();return`${t.protocol}:${t.topic}@${t.version}?${i}`}const Y4={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},J4={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function Ze(t,e){const{message:r,code:i}=J4[t];return{message:e?`${r} ${e}`:r,code:i}}function ls(t,e){const{message:r,code:i}=Y4[t];return{message:e?`${r} ${e}`:r,code:i}}function Mo(t){return typeof t>"u"}function A0(t,e){return e&&Mo(t)?!0:typeof t=="string"&&!!t.trim().length}function X4(t){function e(r){try{return typeof new URL(r)<"u"}catch{return!1}}try{if(A0(t,!1)){if(e(t))return!0;const r=$d(t);return e(r)}}catch{}return!1}function Z4(t){var e;return(e=t?.proposer)==null?void 0:e.publicKey}function Q4(t){return t?.topic}function Sf(t){return typeof t<"u"&&typeof t!==null}function D0(){const t=vo();return new Promise(e=>{switch(t){case Br.browser:e(e8());break;case Br.reactNative:e(t8());break;case Br.node:e(r8());break;default:e(!0)}})}function e8(){return bo()&&navigator?.onLine}async function t8(){if(Qi()&&typeof global<"u"&&global!=null&&global.NetInfo){const t=await(global==null?void 0:global.NetInfo.fetch());return t?.isConnected}return!0}function r8(){return!0}function i8(t){switch(vo()){case Br.browser:n8(t);break;case Br.reactNative:s8(t);break}}function n8(t){!Qi()&&bo()&&(window.addEventListener("online",()=>t(!0)),window.addEventListener("offline",()=>t(!1)))}function s8(t){Qi()&&typeof global<"u"&&global!=null&&global.NetInfo&&global?.NetInfo.addEventListener(e=>t(e?.isConnected))}var o8=Object.defineProperty,a8=(t,e,r)=>e in t?o8(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Zr=(t,e,r)=>a8(t,typeof e!="symbol"?e+"":e,r);class O0{constructor(e,r){this.core=e,this.logger=r,Zr(this,"keychain",new Map),Zr(this,"name",Dc),Zr(this,"version",Oc),Zr(this,"initialized",!1),Zr(this,"storagePrefix",Dr),Zr(this,"init",async()=>{if(!this.initialized){const i=await this.getKeyChain();typeof i<"u"&&(this.keychain=i),this.initialized=!0}}),Zr(this,"has",i=>(this.isInitialized(),this.keychain.has(i))),Zr(this,"set",async(i,s)=>{this.isInitialized(),this.keychain.set(i,s),await this.persist()}),Zr(this,"get",i=>{this.isInitialized();const s=this.keychain.get(i);if(typeof s>"u"){const{message:n}=Ze("NO_MATCHING_KEY",`${this.name}: ${i}`);throw new Error(n)}return s}),Zr(this,"del",async i=>{this.isInitialized(),this.keychain.delete(i),await this.persist()}),this.core=e,this.logger=Jt(r,this.name)}get context(){return ar(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,Nd(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?Pd(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=Ze("NOT_INITIALIZED",this.name);throw new Error(e)}}}var f8=Object.defineProperty,c8=(t,e,r)=>e in t?f8(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,$t=(t,e,r)=>c8(t,typeof e!="symbol"?e+"":e,r);class R0{constructor(e,r,i){this.core=e,this.logger=r,$t(this,"name",Ic),$t(this,"keychain"),$t(this,"randomSessionIdentifier",Ef()),$t(this,"initialized",!1),$t(this,"init",async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)}),$t(this,"hasKeys",s=>(this.isInitialized(),this.keychain.has(s))),$t(this,"getClientId",async()=>{this.isInitialized();const s=await this.getClientSeed(),n=Zh(s);return Xh(n.publicKey)}),$t(this,"generateKeyPair",()=>{this.isInitialized();const s=P4();return this.setPrivateKey(s.publicKey,s.privateKey)}),$t(this,"signJWT",async s=>{this.isInitialized();const n=await this.getClientSeed(),o=Zh(n),f=this.randomSessionIdentifier;return await Ag(f,s,Ac,o)}),$t(this,"generateSharedKey",(s,n,o)=>{this.isInitialized();const f=this.getPrivateKey(s),d=C4(f,n);return this.setSymKey(d,o)}),$t(this,"setSymKey",async(s,n)=>{this.isInitialized();const o=n||B4(s);return await this.keychain.set(o,s),o}),$t(this,"deleteKeyPair",async s=>{this.isInitialized(),await this.keychain.del(s)}),$t(this,"deleteSymKey",async s=>{this.isInitialized(),await this.keychain.del(s)}),$t(this,"encode",async(s,n,o)=>{this.isInitialized();const f=E0(o),d=qi(n);if(S0(f))return $4(d,o?.encoding);if(x0(f)){const S=f.senderPublicKey,I=f.receiverPublicKey;s=await this.generateSharedKey(S,I)}const u=this.getSymKey(s),{type:v,senderPublicKey:w}=f;return L4({type:v,symKey:u,message:d,senderPublicKey:w,encoding:o?.encoding})}),$t(this,"decode",async(s,n,o)=>{this.isInitialized();const f=z4(n,o);if(S0(f)){const d=U4(n,o?.encoding);return an(d)}if(x0(f)){const d=f.receiverPublicKey,u=f.senderPublicKey;s=await this.generateSharedKey(d,u)}try{const d=this.getSymKey(s),u=F4({symKey:d,encoded:n,encoding:o?.encoding});return an(u)}catch(d){this.logger.error(`Failed to decode message from topic: '${s}', clientId: '${await this.getClientId()}'`),this.logger.error(d)}}),$t(this,"getPayloadType",(s,n=Eo)=>{const o=us({encoded:s,encoding:n});return en(o.type)}),$t(this,"getPayloadSenderPublicKey",(s,n=Eo)=>{const o=us({encoded:s,encoding:n});return o.senderPublicKey?Gt(o.senderPublicKey,jt):void 0}),this.core=e,this.logger=Jt(r,this.name),this.keychain=i||new O0(this.core,this.logger)}get context(){return ar(this.logger)}async setPrivateKey(e,r){return await this.keychain.set(e,r),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(Xo)}catch{e=Ef(),await this.keychain.set(Xo,e)}return cr(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=Ze("NOT_INITIALIZED",this.name);throw new Error(e)}}}var h8=Object.defineProperty,u8=(t,e,r)=>e in t?h8(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Qr=(t,e,r)=>u8(t,typeof e!="symbol"?e+"":e,r);class T0 extends mp{constructor(e,r){super(e,r),this.logger=e,this.core=r,Qr(this,"messages",new Map),Qr(this,"name",Rc),Qr(this,"version",Tc),Qr(this,"initialized",!1),Qr(this,"storagePrefix",Dr),Qr(this,"init",async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const i=await this.getRelayerMessages();typeof i<"u"&&(this.messages=i),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(i){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(i)}finally{this.initialized=!0}}}),Qr(this,"set",async(i,s)=>{this.isInitialized();const n=xf(s);let o=this.messages.get(i);return typeof o>"u"&&(o={}),typeof o[n]<"u"||(o[n]=s,this.messages.set(i,o),await this.persist()),n}),Qr(this,"get",i=>{this.isInitialized();let s=this.messages.get(i);return typeof s>"u"&&(s={}),s}),Qr(this,"has",(i,s)=>{this.isInitialized();const n=this.get(i),o=xf(s);return typeof n[o]<"u"}),Qr(this,"del",async i=>{this.isInitialized(),this.messages.delete(i),await this.persist()}),this.logger=Jt(e,this.name),this.core=r}get context(){return ar(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,Nd(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?Pd(e):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){const{message:e}=Ze("NOT_INITIALIZED",this.name);throw new Error(e)}}}const d8="PARSE_ERROR",l8="INVALID_REQUEST",p8="METHOD_NOT_FOUND",b8="INVALID_PARAMS",N0="INTERNAL_ERROR",Mf="SERVER_ERROR",v8=[-32700,-32600,-32601,-32602,-32603],ps={[d8]:{code:-32700,message:"Parse error"},[l8]:{code:-32600,message:"Invalid Request"},[p8]:{code:-32601,message:"Method not found"},[b8]:{code:-32602,message:"Invalid params"},[N0]:{code:-32603,message:"Internal error"},[Mf]:{code:-32e3,message:"Server error"}},P0=Mf;function g8(t){return v8.includes(t)}function C0(t){return Object.keys(ps).includes(t)?ps[t]:ps[P0]}function y8(t){const e=Object.values(ps).find(r=>r.code===t);return e||ps[P0]}function m8(t,e,r){return t.message.includes("getaddrinfo ENOTFOUND")||t.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${r} RPC url at ${e}`):t}var B0={};/*! *****************************************************************************
	Copyright (c) Microsoft Corporation.

	Permission to use, copy, modify, and/or distribute this software for any
	purpose with or without fee is hereby granted.

	THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
	REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
	AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
	INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
	LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
	OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
	PERFORMANCE OF THIS SOFTWARE.
	***************************************************************************** */var If=function(t,e){return If=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},If(t,e)};function w8(t,e){If(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Af=function(){return Af=Object.assign||function(e){for(var r,i=1,s=arguments.length;i<s;i++){r=arguments[i];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Af.apply(this,arguments)};function _8(t,e){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(r[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(r[i[s]]=t[i[s]]);return r}function E8(t,e,r,i){var s=arguments.length,n=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,r):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(t,e,r,i);else for(var f=t.length-1;f>=0;f--)(o=t[f])&&(n=(s<3?o(n):s>3?o(e,r,n):o(e,r))||n);return s>3&&n&&Object.defineProperty(e,r,n),n}function x8(t,e){return function(r,i){e(r,i,t)}}function S8(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function M8(t,e,r,i){function s(n){return n instanceof r?n:new r(function(o){o(n)})}return new(r||(r=Promise))(function(n,o){function f(v){try{u(i.next(v))}catch(w){o(w)}}function d(v){try{u(i.throw(v))}catch(w){o(w)}}function u(v){v.done?n(v.value):s(v.value).then(f,d)}u((i=i.apply(t,e||[])).next())})}function I8(t,e){var r={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]},i,s,n,o;return o={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function f(u){return function(v){return d([u,v])}}function d(u){if(i)throw new TypeError("Generator is already executing.");for(;r;)try{if(i=1,s&&(n=u[0]&2?s.return:u[0]?s.throw||((n=s.return)&&n.call(s),0):s.next)&&!(n=n.call(s,u[1])).done)return n;switch(s=0,n&&(u=[u[0]&2,n.value]),u[0]){case 0:case 1:n=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,s=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(n=r.trys,!(n=n.length>0&&n[n.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!n||u[1]>n[0]&&u[1]<n[3])){r.label=u[1];break}if(u[0]===6&&r.label<n[1]){r.label=n[1],n=u;break}if(n&&r.label<n[2]){r.label=n[2],r.ops.push(u);break}n[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(v){u=[6,v],s=0}finally{i=n=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function A8(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}function D8(t,e){for(var r in t)r!=="default"&&!e.hasOwnProperty(r)&&(e[r]=t[r])}function Df(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],i=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function L0(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var i=r.call(t),s,n=[],o;try{for(;(e===void 0||e-- >0)&&!(s=i.next()).done;)n.push(s.value)}catch(f){o={error:f}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return n}function O8(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(L0(arguments[e]));return t}function R8(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var i=Array(t),s=0,e=0;e<r;e++)for(var n=arguments[e],o=0,f=n.length;o<f;o++,s++)i[s]=n[o];return i}function bs(t){return this instanceof bs?(this.v=t,this):new bs(t)}function T8(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=r.apply(t,e||[]),s,n=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(S){i[S]&&(s[S]=function(I){return new Promise(function(M,R){n.push([S,I,M,R])>1||f(S,I)})})}function f(S,I){try{d(i[S](I))}catch(M){w(n[0][3],M)}}function d(S){S.value instanceof bs?Promise.resolve(S.value.v).then(u,v):w(n[0][2],S)}function u(S){f("next",S)}function v(S){f("throw",S)}function w(S,I){S(I),n.shift(),n.length&&f(n[0][0],n[0][1])}}function N8(t){var e,r;return e={},i("next"),i("throw",function(s){throw s}),i("return"),e[Symbol.iterator]=function(){return this},e;function i(s,n){e[s]=t[s]?function(o){return(r=!r)?{value:bs(t[s](o)),done:s==="return"}:n?n(o):o}:n}}function P8(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof Df=="function"?Df(t):t[Symbol.iterator](),r={},i("next"),i("throw"),i("return"),r[Symbol.asyncIterator]=function(){return this},r);function i(n){r[n]=t[n]&&function(o){return new Promise(function(f,d){o=t[n](o),s(f,d,o.done,o.value)})}}function s(n,o,f,d){Promise.resolve(d).then(function(u){n({value:u,done:f})},o)}}function C8(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function B8(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function L8(t){return t&&t.__esModule?t:{default:t}}function F8(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function $8(t,e,r){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,r),r}var U8=Object.freeze({__proto__:null,__extends:w8,get __assign(){return Af},__rest:_8,__decorate:E8,__param:x8,__metadata:S8,__awaiter:M8,__generator:I8,__createBinding:A8,__exportStar:D8,__values:Df,__read:L0,__spread:O8,__spreadArrays:R8,__await:bs,__asyncGenerator:T8,__asyncDelegator:N8,__asyncValues:P8,__makeTemplateObject:C8,__importStar:B8,__importDefault:L8,__classPrivateFieldGet:F8,__classPrivateFieldSet:$8}),z8=Co(U8),ci={},F0;function k8(){if(F0)return ci;F0=1,Object.defineProperty(ci,"__esModule",{value:!0}),ci.isBrowserCryptoAvailable=ci.getSubtleCrypto=ci.getBrowerCrypto=void 0;function t(){return Rt?.crypto||Rt?.msCrypto||{}}ci.getBrowerCrypto=t;function e(){const i=t();return i.subtle||i.webkitSubtle}ci.getSubtleCrypto=e;function r(){return!!t()&&!!e()}return ci.isBrowserCryptoAvailable=r,ci}var hi={},$0;function q8(){if($0)return hi;$0=1,Object.defineProperty(hi,"__esModule",{value:!0}),hi.isBrowser=hi.isNode=hi.isReactNative=void 0;function t(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}hi.isReactNative=t;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}hi.isNode=e;function r(){return!t()&&!e()}return hi.isBrowser=r,hi}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=z8;e.__exportStar(k8(),t),e.__exportStar(q8(),t)})(B0);function U0(t=3){const e=Date.now()*Math.pow(10,t),r=Math.floor(Math.random()*Math.pow(10,t));return e+r}function Of(t=6){return BigInt(U0(t))}function Rf(t,e,r){return{id:r||U0(),jsonrpc:"2.0",method:t,params:e}}function z0(t,e){return{id:t,jsonrpc:"2.0",result:e}}function k0(t,e,r){return{id:t,jsonrpc:"2.0",error:j8(e,r)}}function j8(t,e){return typeof t>"u"?C0(N0):(typeof t=="string"&&(t=Object.assign(Object.assign({},C0(Mf)),{message:t})),typeof e<"u"&&(t.data=e),g8(t.code)&&(t=y8(t.code)),t)}class K8{}class H8 extends K8{constructor(){super()}}class V8 extends H8{constructor(e){super()}}const W8="^wss?:";function G8(t){const e=t.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function Y8(t,e){const r=G8(t);return typeof r>"u"?!1:new RegExp(e).test(r)}function q0(t){return Y8(t,W8)}function J8(t){return new RegExp("wss?://localhost(:d{2,5})?").test(t)}function j0(t){return typeof t=="object"&&"id"in t&&"jsonrpc"in t&&t.jsonrpc==="2.0"}function K0(t){return j0(t)&&"method"in t}function Tf(t){return j0(t)&&(H0(t)||Io(t))}function H0(t){return"result"in t}function Io(t){return"error"in t}class X8 extends V8{constructor(e){super(e),this.events=new br.exports.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async request(e,r){return this.requestStrict(Rf(e.method,e.params||[],e.id||Of().toString()),r)}async requestStrict(e,r){return new Promise(async(i,s)=>{if(!this.connection.connected)try{await this.open()}catch(n){s(n)}this.events.on(`${e.id}`,n=>{Io(n)?s(n.error):i(n.result)});try{await this.connection.send(e,r)}catch(n){s(n)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),Tf(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}}const Z8=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),Q8=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",V0=t=>t.split("?")[0],W0=10,e5=Z8();class t5{constructor(e){if(this.url=e,this.events=new br.exports.EventEmitter,this.registering=!1,!q0(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,r)=>{if(typeof this.socket>"u"){r(new Error("Connection already closed"));return}this.socket.onclose=i=>{this.onClose(i),e()},this.socket.close()})}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(qi(e))}catch(r){this.onError(e.id,r)}}register(e=this.url){if(!q0(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const r=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=r||this.events.listenerCount("open")>=r)&&this.events.setMaxListeners(r+1),new Promise((i,s)=>{this.events.once("register_error",n=>{this.resetMaxListeners(),s(n)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return s(new Error("WebSocket connection is missing or invalid"));i(this.socket)})})}return this.url=e,this.registering=!0,new Promise((r,i)=>{const s=B0.isReactNative()?void 0:{rejectUnauthorized:!J8(e)},n=new e5(e,[],s);Q8()?n.onerror=o=>{const f=o;i(this.emitError(f.error))}:n.on("error",o=>{i(this.emitError(o))}),n.onopen=()=>{this.onOpen(n),r(n)}})}onOpen(e){e.onmessage=r=>this.onPayload(r),e.onclose=r=>this.onClose(r),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const r=typeof e.data=="string"?an(e.data):e.data;this.events.emit("payload",r)}onError(e,r){const i=this.parseError(r),s=i.message||i.toString(),n=k0(e,s);this.events.emit("payload",n)}parseError(e,r=this.url){return m8(e,V0(r),"WS")}resetMaxListeners(){this.events.getMaxListeners()>W0&&this.events.setMaxListeners(W0)}emitError(e){const r=this.parseError(new Error(e?.message||`WebSocket connection failed for host: ${V0(this.url)}`));return this.events.emit("register_error",r),r}}var r5=Object.defineProperty,i5=Object.defineProperties,n5=Object.getOwnPropertyDescriptors,G0=Object.getOwnPropertySymbols,s5=Object.prototype.hasOwnProperty,o5=Object.prototype.propertyIsEnumerable,Nf=(t,e,r)=>e in t?r5(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Ao=(t,e)=>{for(var r in e||(e={}))s5.call(e,r)&&Nf(t,r,e[r]);if(G0)for(var r of G0(e))o5.call(e,r)&&Nf(t,r,e[r]);return t},Pf=(t,e)=>i5(t,n5(e)),Fr=(t,e,r)=>Nf(t,typeof e!="symbol"?e+"":e,r);class a5 extends wp{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,Fr(this,"events",new br.exports.EventEmitter),Fr(this,"name",Nc),Fr(this,"queue",new Map),Fr(this,"publishTimeout",ie.toMiliseconds(ie.ONE_MINUTE)),Fr(this,"initialPublishTimeout",ie.toMiliseconds(ie.ONE_SECOND*15)),Fr(this,"needsTransportRestart",!1),Fr(this,"publish",async(i,s,n)=>{var o;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:i,message:s,opts:n}});const f=n?.ttl||Zo,d=So(n),u=n?.prompt||!1,v=n?.tag||0,w=n?.id||Of().toString(),S={topic:i,message:s,opts:{ttl:f,relay:d,prompt:u,tag:v,id:w,attestation:n?.attestation,tvf:n?.tvf}},I=`Failed to publish payload, please try again. id:${w} tag:${v}`;try{const M=new Promise(async R=>{const N=({id:B})=>{S.opts.id===B&&(this.removeRequestFromQueue(B),this.relayer.events.removeListener(Tt.publish,N),R(S))};this.relayer.events.on(Tt.publish,N);const C=Ni(new Promise((B,F)=>{this.rpcPublish({topic:i,message:s,ttl:f,prompt:u,tag:v,id:w,attestation:n?.attestation,tvf:n?.tvf}).then(B).catch(k=>{this.logger.warn(k,k?.message),F(k)})}),this.initialPublishTimeout,`Failed initial publish, retrying.... id:${w} tag:${v}`);try{await C,this.events.removeListener(Tt.publish,N)}catch(B){this.queue.set(w,Pf(Ao({},S),{attempt:1})),this.logger.warn(B,B?.message)}});this.logger.trace({type:"method",method:"publish",params:{id:w,topic:i,message:s,opts:n}}),await Ni(M,this.publishTimeout,I)}catch(M){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(M),(o=n?.internal)!=null&&o.throwOnFailedPublish)throw M}finally{this.queue.delete(w)}}),Fr(this,"on",(i,s)=>{this.events.on(i,s)}),Fr(this,"once",(i,s)=>{this.events.once(i,s)}),Fr(this,"off",(i,s)=>{this.events.off(i,s)}),Fr(this,"removeListener",(i,s)=>{this.events.removeListener(i,s)}),this.relayer=e,this.logger=Jt(r,this.name),this.registerEventListeners()}get context(){return ar(this.logger)}async rpcPublish(e){var r,i,s,n;const{topic:o,message:f,ttl:d=Zo,prompt:u,tag:v,id:w,attestation:S,tvf:I}=e,M={method:ds(So().protocol).publish,params:Ao({topic:o,message:f,ttl:d,prompt:u,tag:v,attestation:S},I),id:w};Mo((r=M.params)==null?void 0:r.prompt)&&((i=M.params)==null||delete i.prompt),Mo((s=M.params)==null?void 0:s.tag)&&((n=M.params)==null||delete n.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:M});const R=await this.relayer.request(M);return this.relayer.events.emit(Tt.publish,e),this.logger.debug("Successfully Published Payload"),R}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async(e,r)=>{const i=e.attempt+1;this.queue.set(r,Pf(Ao({},e),{attempt:i}));const{topic:s,message:n,opts:o,attestation:f}=e;this.logger.warn({},`Publisher: queue->publishing: ${e.opts.id}, tag: ${e.opts.tag}, attempt: ${i}`),await this.rpcPublish(Pf(Ao({},e),{topic:s,message:n,ttl:o.ttl,prompt:o.prompt,tag:o.tag,id:o.id,attestation:f,tvf:o.tvf})),this.logger.warn({},`Publisher: queue->published: ${e.opts.id}`)})}registerEventListeners(){this.relayer.core.heartbeat.on(on.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(Tt.connection_stalled);return}this.checkQueue()}),this.relayer.on(Tt.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}}var f5=Object.defineProperty,c5=(t,e,r)=>e in t?f5(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Fn=(t,e,r)=>c5(t,typeof e!="symbol"?e+"":e,r);class h5{constructor(){Fn(this,"map",new Map),Fn(this,"set",(e,r)=>{const i=this.get(e);this.exists(e,r)||this.map.set(e,[...i,r])}),Fn(this,"get",e=>this.map.get(e)||[]),Fn(this,"exists",(e,r)=>this.get(e).includes(r)),Fn(this,"delete",(e,r)=>{if(typeof r>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const i=this.get(e);if(!this.exists(e,r))return;const s=i.filter(n=>n!==r);if(!s.length){this.map.delete(e);return}this.map.set(e,s)}),Fn(this,"clear",()=>{this.map.clear()})}get topics(){return Array.from(this.map.keys())}}var u5=Object.defineProperty,d5=Object.defineProperties,l5=Object.getOwnPropertyDescriptors,Y0=Object.getOwnPropertySymbols,p5=Object.prototype.hasOwnProperty,b5=Object.prototype.propertyIsEnumerable,Cf=(t,e,r)=>e in t?u5(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,vs=(t,e)=>{for(var r in e||(e={}))p5.call(e,r)&&Cf(t,r,e[r]);if(Y0)for(var r of Y0(e))b5.call(e,r)&&Cf(t,r,e[r]);return t},Bf=(t,e)=>d5(t,l5(e)),ct=(t,e,r)=>Cf(t,typeof e!="symbol"?e+"":e,r);class J0 extends xp{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,ct(this,"subscriptions",new Map),ct(this,"topicMap",new h5),ct(this,"events",new br.exports.EventEmitter),ct(this,"name",zc),ct(this,"version",kc),ct(this,"pending",new Map),ct(this,"cached",[]),ct(this,"initialized",!1),ct(this,"pendingSubscriptionWatchLabel","pending_sub_watch_label"),ct(this,"pollingInterval",20),ct(this,"storagePrefix",Dr),ct(this,"subscribeTimeout",ie.toMiliseconds(ie.ONE_MINUTE)),ct(this,"initialSubscribeTimeout",ie.toMiliseconds(ie.ONE_SECOND*15)),ct(this,"clientId"),ct(this,"batchSubscribeTopicsLimit",500),ct(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),await this.restore()),this.initialized=!0}),ct(this,"subscribe",async(i,s)=>{this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:i,opts:s}});try{const n=So(s),o={topic:i,relay:n,transportType:s?.transportType};this.pending.set(i,o);const f=await this.rpcSubscribe(i,n,s);return typeof f=="string"&&(this.onSubscribe(f,o),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:i,opts:s}})),f}catch(n){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(n),n}}),ct(this,"unsubscribe",async(i,s)=>{await this.restartToComplete(),this.isInitialized(),typeof s?.id<"u"?await this.unsubscribeById(i,s.id,s):await this.unsubscribeByTopic(i,s)}),ct(this,"isSubscribed",async i=>{if(this.topics.includes(i))return!0;const s=`${this.pendingSubscriptionWatchLabel}_${i}`;return await new Promise((n,o)=>{const f=new ie.Watch;f.start(s);const d=setInterval(()=>{(!this.pending.has(i)&&this.topics.includes(i)||this.cached.some(u=>u.topic===i))&&(clearInterval(d),f.stop(s),n(!0)),f.elapsed(s)>=qc&&(clearInterval(d),f.stop(s),o(new Error("Subscription resolution timeout")))},this.pollingInterval)}).catch(()=>!1)}),ct(this,"on",(i,s)=>{this.events.on(i,s)}),ct(this,"once",(i,s)=>{this.events.once(i,s)}),ct(this,"off",(i,s)=>{this.events.off(i,s)}),ct(this,"removeListener",(i,s)=>{this.events.removeListener(i,s)}),ct(this,"start",async()=>{await this.onConnect()}),ct(this,"stop",async()=>{await this.onDisconnect()}),ct(this,"restart",async()=>{await this.restore(),await this.onRestart()}),ct(this,"checkPending",async()=>{if(this.pending.size===0&&(!this.initialized||!this.relayer.connected))return;const i=[];this.pending.forEach(s=>{i.push(s)}),await this.batchSubscribe(i)}),ct(this,"registerEventListeners",()=>{this.relayer.core.heartbeat.on(on.pulse,async()=>{await this.checkPending()}),this.events.on(Xt.created,async i=>{const s=Xt.created;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:i}),await this.persist()}),this.events.on(Xt.deleted,async i=>{const s=Xt.deleted;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:i}),await this.persist()})}),this.relayer=e,this.logger=Jt(r,this.name),this.clientId=""}get context(){return ar(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(e,r){let i=!1;try{i=this.getSubscription(e).topic===r}catch{}return i}reset(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,r){const i=this.topicMap.get(e);await Promise.all(i.map(async s=>await this.unsubscribeById(e,s,r)))}async unsubscribeById(e,r,i){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:i}});try{const s=So(i);await this.rpcUnsubscribe(e,r,s);const n=ls("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,r,n),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:i}})}catch(s){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(s),s}}async rpcSubscribe(e,r,i){var s;i?.transportType===ji.relay&&await this.restartToComplete();const n={method:ds(r.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});const o=(s=i?.internal)==null?void 0:s.throwOnFailedPublish;try{const f=await this.getSubscriptionId(e);if(i?.transportType===ji.link_mode)return setTimeout(()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(n).catch(v=>this.logger.warn(v))},ie.toMiliseconds(ie.ONE_SECOND)),f;const d=new Promise(async v=>{const w=S=>{S.topic===e&&(this.events.removeListener(Xt.created,w),v(S.id))};this.events.on(Xt.created,w);try{const S=await Ni(new Promise((I,M)=>{this.relayer.request(n).catch(R=>{this.logger.warn(R,R?.message),M(R)}).then(I)}),this.initialSubscribeTimeout,`Subscribing to ${e} failed, please try again`);this.events.removeListener(Xt.created,w),v(S)}catch{}}),u=await Ni(d,this.subscribeTimeout,`Subscribing to ${e} failed, please try again`);if(!u&&o)throw new Error(`Subscribing to ${e} failed, please try again`);return u?f:null}catch(f){if(this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(Tt.connection_stalled),o)throw f}return null}async rpcBatchSubscribe(e){if(!e.length)return;const r=e[0].relay,i={method:ds(r.protocol).batchSubscribe,params:{topics:e.map(s=>s.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});try{await await Ni(new Promise(s=>{this.relayer.request(i).catch(n=>this.logger.warn(n)).then(s)}),this.subscribeTimeout,"rpcBatchSubscribe failed, please try again")}catch{this.relayer.events.emit(Tt.connection_stalled)}}async rpcBatchFetchMessages(e){if(!e.length)return;const r=e[0].relay,i={method:ds(r.protocol).batchFetchMessages,params:{topics:e.map(n=>n.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});let s;try{s=await await Ni(new Promise((n,o)=>{this.relayer.request(i).catch(f=>{this.logger.warn(f),o(f)}).then(n)}),this.subscribeTimeout,"rpcBatchFetchMessages failed, please try again")}catch{this.relayer.events.emit(Tt.connection_stalled)}return s}rpcUnsubscribe(e,r,i){const s={method:ds(i.protocol).unsubscribe,params:{topic:e,id:r}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s}),this.relayer.request(s)}onSubscribe(e,r){this.setSubscription(e,Bf(vs({},r),{id:e})),this.pending.delete(r.topic)}onBatchSubscribe(e){e.length&&e.forEach(r=>{this.setSubscription(r.id,vs({},r)),this.pending.delete(r.topic)})}async onUnsubscribe(e,r,i){this.events.removeAllListeners(r),this.hasSubscription(r,e)&&this.deleteSubscription(r,i),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,r){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:r}),this.addSubscription(e,r)}addSubscription(e,r){this.subscriptions.set(e,vs({},r)),this.topicMap.set(r.topic,e),this.events.emit(Xt.created,r)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const r=this.subscriptions.get(e);if(!r){const{message:i}=Ze("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(i)}return r}deleteSubscription(e,r){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:r});const i=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(i.topic,e),this.events.emit(Xt.deleted,Bf(vs({},i),{reason:r}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(Xt.sync)}async onRestart(){if(this.cached.length){const e=[...this.cached],r=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let i=0;i<r;i++){const s=e.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(s)}}this.events.emit(Xt.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:r}=Ze("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){e.length&&(await this.rpcBatchSubscribe(e),this.onBatchSubscribe(await Promise.all(e.map(async r=>Bf(vs({},r),{id:await this.getSubscriptionId(r.topic)})))))}async batchFetchMessages(e){if(!e.length)return;this.logger.trace(`Fetching batch messages for ${e.length} subscriptions`);const r=await this.rpcBatchFetchMessages(e);r&&r.messages&&(await w6(ie.toMiliseconds(ie.ONE_SECOND)),await this.relayer.handleBatchMessageEvents(r.messages))}async onConnect(){await this.restart(),this.reset()}onDisconnect(){this.onDisable()}isInitialized(){if(!this.initialized){const{message:e}=Ze("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(){!this.relayer.connected&&!this.relayer.connecting&&await this.relayer.transportOpen()}async getClientId(){return this.clientId||(this.clientId=await this.relayer.core.crypto.getClientId()),this.clientId}async getSubscriptionId(e){return xf(e+await this.getClientId())}}var v5=Object.defineProperty,X0=Object.getOwnPropertySymbols,g5=Object.prototype.hasOwnProperty,y5=Object.prototype.propertyIsEnumerable,Lf=(t,e,r)=>e in t?v5(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Z0=(t,e)=>{for(var r in e||(e={}))g5.call(e,r)&&Lf(t,r,e[r]);if(X0)for(var r of X0(e))y5.call(e,r)&&Lf(t,r,e[r]);return t},He=(t,e,r)=>Lf(t,typeof e!="symbol"?e+"":e,r);class Q0 extends _p{constructor(e){super(e),He(this,"protocol","wc"),He(this,"version",2),He(this,"core"),He(this,"logger"),He(this,"events",new br.exports.EventEmitter),He(this,"provider"),He(this,"messages"),He(this,"subscriber"),He(this,"publisher"),He(this,"name",Bc),He(this,"transportExplicitlyClosed",!1),He(this,"initialized",!1),He(this,"connectionAttemptInProgress",!1),He(this,"relayUrl"),He(this,"projectId"),He(this,"packageName"),He(this,"bundleId"),He(this,"hasExperiencedNetworkDisruption",!1),He(this,"pingTimeout"),He(this,"heartBeatTimeout",ie.toMiliseconds(ie.THIRTY_SECONDS+ie.FIVE_SECONDS)),He(this,"reconnectTimeout"),He(this,"connectPromise"),He(this,"requestsInFlight",[]),He(this,"connectTimeout",ie.toMiliseconds(ie.ONE_SECOND*15)),He(this,"request",async r=>{var i,s;this.logger.debug("Publishing Request Payload");const n=r.id||Of().toString();await this.toEstablishConnection();try{this.logger.trace({id:n,method:r.method,topic:(i=r.params)==null?void 0:i.topic},"relayer.request - publishing...");const o=`${n}:${((s=r.params)==null?void 0:s.tag)||""}`;this.requestsInFlight.push(o);const f=await this.provider.request(r);return this.requestsInFlight=this.requestsInFlight.filter(d=>d!==o),f}catch(o){throw this.logger.debug(`Failed to Publish Request: ${n}`),o}}),He(this,"resetPingTimeout",()=>{if(po())try{clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var r,i,s;this.logger.debug({},"pingTimeout: Connection stalled, terminating..."),(s=(i=(r=this.provider)==null?void 0:r.connection)==null?void 0:i.socket)==null||s.terminate()},this.heartBeatTimeout)}catch(r){this.logger.warn(r,r?.message)}}),He(this,"onPayloadHandler",r=>{this.onProviderPayload(r),this.resetPingTimeout()}),He(this,"onConnectHandler",()=>{this.logger.warn({},"Relayer connected \u{1F6DC}"),this.startPingTimeout(),this.events.emit(Tt.connect)}),He(this,"onDisconnectHandler",()=>{this.logger.warn({},"Relayer disconnected \u{1F6D1}"),this.requestsInFlight=[],this.onProviderDisconnect()}),He(this,"onProviderErrorHandler",r=>{this.logger.fatal(r,`Fatal socket error: ${r?.message}`),this.events.emit(Tt.error,r),this.logger.fatal("Fatal socket error received, closing transport"),this.transportClose()}),He(this,"registerProviderListeners",()=>{this.provider.on(fr.payload,this.onPayloadHandler),this.provider.on(fr.connect,this.onConnectHandler),this.provider.on(fr.disconnect,this.onDisconnectHandler),this.provider.on(fr.error,this.onProviderErrorHandler)}),this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?Jt(e.logger,this.name):Ei(Ec({level:e.logger||Cc})),this.messages=new T0(this.logger,e.core),this.subscriber=new J0(this,this.logger),this.publisher=new a5(this,this.logger),this.relayUrl=e?.relayUrl||Qo,this.projectId=e.projectId,c6()?this.packageName=Rd():h6()&&(this.bundleId=Rd()),this.provider={}}async init(){if(this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.subscriber.cached.length>0)try{await this.transportOpen()}catch(e){this.logger.warn(e,e?.message)}}get context(){return ar(this.logger)}get connected(){var e,r,i;return((i=(r=(e=this.provider)==null?void 0:e.connection)==null?void 0:r.socket)==null?void 0:i.readyState)===1}get connecting(){var e,r,i;return((i=(r=(e=this.provider)==null?void 0:e.connection)==null?void 0:r.socket)==null?void 0:i.readyState)===0}async publish(e,r,i){this.isInitialized(),await this.publisher.publish(e,r,i),await this.recordMessageEvent({topic:e,message:r,publishedAt:Date.now(),transportType:ji.relay})}async subscribe(e,r){var i,s,n;this.isInitialized(),(!(r!=null&&r.transportType)||r?.transportType==="relay")&&await this.toEstablishConnection();const o=typeof((i=r?.internal)==null?void 0:i.throwOnFailedPublish)>"u"?!0:(s=r?.internal)==null?void 0:s.throwOnFailedPublish;let f=((n=this.subscriber.topicMap.get(e))==null?void 0:n[0])||"",d;const u=v=>{v.topic===e&&(this.subscriber.off(Xt.created,u),d())};return await Promise.all([new Promise(v=>{d=v,this.subscriber.on(Xt.created,u)}),new Promise(async(v,w)=>{f=await this.subscriber.subscribe(e,Z0({internal:{throwOnFailedPublish:o}},r)).catch(S=>{o&&w(S)})||f,v()})]),f}async unsubscribe(e,r){this.isInitialized(),await this.subscriber.unsubscribe(e,r)}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async transportDisconnect(){this.provider.disconnect&&(this.hasExperiencedNetworkDisruption||this.connected)?await Ni(this.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(e){if(this.connectPromise?(this.logger.debug({},"Waiting for existing connection attempt to resolve..."),await this.connectPromise,this.logger.debug({},"Existing connection attempt resolved")):(this.connectPromise=new Promise(async(r,i)=>{await this.connect(e).then(r).catch(i).finally(()=>{this.connectPromise=void 0})}),await this.connectPromise),!this.connected)throw new Error(`Couldn't establish socket connection to the relay server: ${this.relayUrl}`)}async restartTransport(e){this.logger.debug({},"Restarting transport..."),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await D0())throw new Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(e){if(e?.length===0){this.logger.trace("Batch message events is empty. Ignoring...");return}const r=e.sort((i,s)=>i.publishedAt-s.publishedAt);this.logger.debug(`Batch of ${r.length} message events sorted`);for(const i of r)try{await this.onMessageEvent(i)}catch(s){this.logger.warn(s,"Error while processing batch message event: "+s?.message)}this.logger.trace(`Batch of ${r.length} message events processed`)}async onLinkMessageEvent(e,r){const{topic:i}=e;if(!r.sessionExists){const s=ss(ie.FIVE_MINUTES),n={topic:i,expiry:s,relay:{protocol:"irn"},active:!1};await this.core.pairing.pairings.set(i,n)}this.events.emit(Tt.message,e),await this.recordMessageEvent(e)}async connect(e){await this.confirmOnlineStateOrThrow(),e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportDisconnect()),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;let r=1;for(;r<6;){try{this.logger.debug({},`Connecting to ${this.relayUrl}, attempt: ${r}...`),await this.createProvider(),await new Promise(async(i,s)=>{const n=()=>{s(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(fr.disconnect,n),await Ni(new Promise((o,f)=>{this.provider.connect().then(o).catch(f)}),this.connectTimeout,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(o=>{s(o)}).finally(()=>{this.provider.off(fr.disconnect,n),clearTimeout(this.reconnectTimeout),this.reconnectTimeout=void 0}),await new Promise(async(o,f)=>{const d=()=>{f(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(fr.disconnect,d),await this.subscriber.start().then(o).catch(f).finally(()=>{this.provider.off(fr.disconnect,d)})}),this.hasExperiencedNetworkDisruption=!1,i()})}catch(i){await this.subscriber.stop();const s=i;this.logger.warn({},s.message),this.hasExperiencedNetworkDisruption=!0}finally{this.connectionAttemptInProgress=!1}if(this.connected){this.logger.debug({},`Connected to ${this.relayUrl} successfully on attempt: ${r}`);break}await new Promise(i=>setTimeout(i,ie.toMiliseconds(r*1))),r++}}startPingTimeout(){var e,r,i,s,n;if(po())try{(r=(e=this.provider)==null?void 0:e.connection)!=null&&r.socket&&((n=(s=(i=this.provider)==null?void 0:i.connection)==null?void 0:s.socket)==null||n.on("ping",()=>{this.resetPingTimeout()})),this.resetPingTimeout()}catch(o){this.logger.warn(o,o?.message)}}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new X8(new t5(b6({sdkVersion:Ps,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId,packageName:this.packageName}))),this.registerProviderListeners()}async recordMessageEvent(e){const{topic:r,message:i}=e;await this.messages.set(r,i)}async shouldIgnoreMessageEvent(e){const{topic:r,message:i}=e;if(!i||i.length===0)return this.logger.warn(`Ignoring invalid/empty message: ${i}`),!0;if(!await this.subscriber.isSubscribed(r))return this.logger.warn(`Ignoring message for non-subscribed topic ${r}`),!0;const s=this.messages.has(r,i);return s&&this.logger.warn(`Ignoring duplicate message: ${i}`),s}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),K0(e)){if(!e.method.endsWith(Lc))return;const r=e.params,{topic:i,message:s,publishedAt:n,attestation:o}=r.data,f={topic:i,message:s,publishedAt:n,transportType:ji.relay,attestation:o};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(Z0({type:"event",event:r.id},f)),this.events.emit(r.id,f),await this.acknowledgePayload(e),await this.onMessageEvent(f)}else Tf(e)&&this.events.emit(Tt.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(this.events.emit(Tt.message,e),await this.recordMessageEvent(e))}async acknowledgePayload(e){const r=z0(e.id,!0);await this.provider.connection.send(r)}unregisterProviderListeners(){this.provider.off(fr.payload,this.onPayloadHandler),this.provider.off(fr.connect,this.onConnectHandler),this.provider.off(fr.disconnect,this.onDisconnectHandler),this.provider.off(fr.error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let e=await D0();i8(async r=>{e!==r&&(e=r,r?await this.transportOpen().catch(i=>this.logger.error(i,i?.message)):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))})}async onProviderDisconnect(){await this.subscriber.stop(),clearTimeout(this.pingTimeout),this.events.emit(Tt.disconnect),this.connectionAttemptInProgress=!1,!this.transportExplicitlyClosed&&(this.reconnectTimeout||this.connectPromise||(this.reconnectTimeout=setTimeout(async()=>{clearTimeout(this.reconnectTimeout),await this.transportOpen().catch(e=>this.logger.error(e,e?.message))},ie.toMiliseconds(Fc))))}isInitialized(){if(!this.initialized){const{message:e}=Ze("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){await this.confirmOnlineStateOrThrow(),!this.connected&&await this.transportOpen()}}var Ff={exports:{}};(function(t,e){var r=200,i="__lodash_hash_undefined__",s=1,n=2,o=9007199254740991,f="[object Arguments]",d="[object Array]",u="[object AsyncFunction]",v="[object Boolean]",w="[object Date]",S="[object Error]",I="[object Function]",M="[object GeneratorFunction]",R="[object Map]",N="[object Number]",C="[object Null]",B="[object Object]",F="[object Promise]",k="[object Proxy]",V="[object RegExp]",H="[object Set]",G="[object String]",J="[object Symbol]",j="[object Undefined]",te="[object WeakMap]",D="[object ArrayBuffer]",p="[object DataView]",l="[object Float32Array]",a="[object Float64Array]",c="[object Int8Array]",b="[object Int16Array]",_="[object Int32Array]",x="[object Uint8Array]",m="[object Uint8ClampedArray]",h="[object Uint16Array]",y="[object Uint32Array]",g=/[\\^$.*+?()[\]{}|]/g,A=/^\[object .+?Constructor\]$/,U=/^(?:0|[1-9]\d*)$/,E={};E[l]=E[a]=E[c]=E[b]=E[_]=E[x]=E[m]=E[h]=E[y]=!0,E[f]=E[d]=E[D]=E[v]=E[p]=E[w]=E[S]=E[I]=E[R]=E[N]=E[B]=E[V]=E[H]=E[G]=E[te]=!1;var T=typeof Rt=="object"&&Rt&&Rt.Object===Object&&Rt,L=typeof self=="object"&&self&&self.Object===Object&&self,$=T||L||Function("return this")(),z=e&&!e.nodeType&&e,W=z&&!0&&t&&!t.nodeType&&t,X=W&&W.exports===z,K=X&&T.process,ce=function(){try{return K&&K.binding&&K.binding("util")}catch{}}(),Z=ce&&ce.isTypedArray;function Q(O,P){for(var q=-1,ee=O==null?0:O.length,lt=0,we=[];++q<ee;){var gt=O[q];P(gt,q,O)&&(we[lt++]=gt)}return we}function Ue(O,P){for(var q=-1,ee=P.length,lt=O.length;++q<ee;)O[lt+q]=P[q];return O}function ze(O,P){for(var q=-1,ee=O==null?0:O.length;++q<ee;)if(P(O[q],q,O))return!0;return!1}function he(O,P){for(var q=-1,ee=Array(O);++q<O;)ee[q]=P(q);return ee}function Re(O){return function(P){return O(P)}}function Te(O,P){return O.has(P)}function oe(O,P){return O?.[P]}function Ne(O){var P=-1,q=Array(O.size);return O.forEach(function(ee,lt){q[++P]=[lt,ee]}),q}function Pe(O,P){return function(q){return O(P(q))}}function fe(O){var P=-1,q=Array(O.size);return O.forEach(function(ee){q[++P]=ee}),q}var Ce=Array.prototype,Be=Function.prototype,se=Object.prototype,De=$["__core-js_shared__"],Le=Be.toString,re=se.hasOwnProperty,Ve=function(){var O=/[^.]+$/.exec(De&&De.keys&&De.keys.IE_PROTO||"");return O?"Symbol(src)_1."+O:""}(),We=se.toString,pe=RegExp("^"+Le.call(re).replace(g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ge=X?$.Buffer:void 0,Fe=$.Symbol,de=$.Uint8Array,Ye=se.propertyIsEnumerable,Qe=Ce.splice,ne=Fe?Fe.toStringTag:void 0,Je=Object.getOwnPropertySymbols,et=Ge?Ge.isBuffer:void 0,be=Pe(Object.keys,Object),ke=$n($,"DataView"),Oe=$n($,"Map"),ue=$n($,"Promise"),qe=$n($,"Set"),je=$n($,"WeakMap"),ae=$n(Object,"create"),tt=tn(ke),rt=tn(Oe),ve=tn(ue),it=tn(qe),nt=tn(je),le=Fe?Fe.prototype:void 0,Ke=le?le.valueOf:void 0;function Ie(O){var P=-1,q=O==null?0:O.length;for(this.clear();++P<q;){var ee=O[P];this.set(ee[0],ee[1])}}function ge(){this.__data__=ae?ae(null):{},this.size=0}function st(O){var P=this.has(O)&&delete this.__data__[O];return this.size-=P?1:0,P}function ot(O){var P=this.__data__;if(ae){var q=P[O];return q===i?void 0:q}return re.call(P,O)?P[O]:void 0}function ye(O){var P=this.__data__;return ae?P[O]!==void 0:re.call(P,O)}function at(O,P){var q=this.__data__;return this.size+=this.has(O)?0:1,q[O]=ae&&P===void 0?i:P,this}Ie.prototype.clear=ge,Ie.prototype.delete=st,Ie.prototype.get=ot,Ie.prototype.has=ye,Ie.prototype.set=at;function Ee(O){var P=-1,q=O==null?0:O.length;for(this.clear();++P<q;){var ee=O[P];this.set(ee[0],ee[1])}}function Xe(){this.__data__=[],this.size=0}function ir(O){var P=this.__data__,q=Oo(P,O);if(q<0)return!1;var ee=P.length-1;return q==ee?P.pop():Qe.call(P,q,1),--this.size,!0}function nr(O){var P=this.__data__,q=Oo(P,O);return q<0?void 0:P[q][1]}function sr(O){return Oo(this.__data__,O)>-1}function or(O,P){var q=this.__data__,ee=Oo(q,O);return ee<0?(++this.size,q.push([O,P])):q[ee][1]=P,this}Ee.prototype.clear=Xe,Ee.prototype.delete=ir,Ee.prototype.get=nr,Ee.prototype.has=sr,Ee.prototype.set=or;function wt(O){var P=-1,q=O==null?0:O.length;for(this.clear();++P<q;){var ee=O[P];this.set(ee[0],ee[1])}}function ui(){this.size=0,this.__data__={hash:new Ie,map:new(Oe||Ee),string:new Ie}}function di(O){var P=Ro(this,O).delete(O);return this.size-=P?1:0,P}function li(O){return Ro(this,O).get(O)}function pi(O){return Ro(this,O).has(O)}function bi(O,P){var q=Ro(this,O),ee=q.size;return q.set(O,P),this.size+=q.size==ee?0:1,this}wt.prototype.clear=ui,wt.prototype.delete=di,wt.prototype.get=li,wt.prototype.has=pi,wt.prototype.set=bi;function Mr(O){var P=-1,q=O==null?0:O.length;for(this.__data__=new wt;++P<q;)this.add(O[P])}function vi(O){return this.__data__.set(O,i),this}function gi(O){return this.__data__.has(O)}Mr.prototype.add=Mr.prototype.push=vi,Mr.prototype.has=gi;function Ht(O){var P=this.__data__=new Ee(O);this.size=P.size}function yi(){this.__data__=new Ee,this.size=0}function mi(O){var P=this.__data__,q=P.delete(O);return this.size=P.size,q}function wi(O){return this.__data__.get(O)}function ys(O){return this.__data__.has(O)}function ms(O,P){var q=this.__data__;if(q instanceof Ee){var ee=q.__data__;if(!Oe||ee.length<r-1)return ee.push([O,P]),this.size=++q.size,this;q=this.__data__=new wt(ee)}return q.set(O,P),this.size=q.size,this}Ht.prototype.clear=yi,Ht.prototype.delete=mi,Ht.prototype.get=wi,Ht.prototype.has=ys,Ht.prototype.set=ms;function z5(O,P){var q=To(O),ee=!q&&tw(O),lt=!q&&!ee&&kf(O),we=!q&&!ee&&!lt&&_l(O),gt=q||ee||lt||we,Ot=gt?he(O.length,String):[],zt=Ot.length;for(var pt in O)(P||re.call(O,pt))&&!(gt&&(pt=="length"||lt&&(pt=="offset"||pt=="parent")||we&&(pt=="buffer"||pt=="byteLength"||pt=="byteOffset")||J5(pt,zt)))&&Ot.push(pt);return Ot}function Oo(O,P){for(var q=O.length;q--;)if(gl(O[q][0],P))return q;return-1}function k5(O,P,q){var ee=P(O);return To(O)?ee:Ue(ee,q(O))}function ws(O){return O==null?O===void 0?j:C:ne&&ne in Object(O)?G5(O):ew(O)}function ll(O){return _s(O)&&ws(O)==f}function pl(O,P,q,ee,lt){return O===P?!0:O==null||P==null||!_s(O)&&!_s(P)?O!==O&&P!==P:q5(O,P,q,ee,pl,lt)}function q5(O,P,q,ee,lt,we){var gt=To(O),Ot=To(P),zt=gt?d:Li(O),pt=Ot?d:Li(P);zt=zt==f?B:zt,pt=pt==f?B:pt;var pr=zt==B,$r=pt==B,Vt=zt==pt;if(Vt&&kf(O)){if(!kf(P))return!1;gt=!0,pr=!1}if(Vt&&!pr)return we||(we=new Ht),gt||_l(O)?bl(O,P,q,ee,lt,we):V5(O,P,zt,q,ee,lt,we);if(!(q&s)){var Ir=pr&&re.call(O,"__wrapped__"),Ar=$r&&re.call(P,"__wrapped__");if(Ir||Ar){var Fi=Ir?O.value():O,_i=Ar?P.value():P;return we||(we=new Ht),lt(Fi,_i,q,ee,we)}}return Vt?(we||(we=new Ht),W5(O,P,q,ee,lt,we)):!1}function j5(O){if(!wl(O)||Z5(O))return!1;var P=yl(O)?pe:A;return P.test(tn(O))}function K5(O){return _s(O)&&ml(O.length)&&!!E[ws(O)]}function H5(O){if(!Q5(O))return be(O);var P=[];for(var q in Object(O))re.call(O,q)&&q!="constructor"&&P.push(q);return P}function bl(O,P,q,ee,lt,we){var gt=q&s,Ot=O.length,zt=P.length;if(Ot!=zt&&!(gt&&zt>Ot))return!1;var pt=we.get(O);if(pt&&we.get(P))return pt==P;var pr=-1,$r=!0,Vt=q&n?new Mr:void 0;for(we.set(O,P),we.set(P,O);++pr<Ot;){var Ir=O[pr],Ar=P[pr];if(ee)var Fi=gt?ee(Ar,Ir,pr,P,O,we):ee(Ir,Ar,pr,O,P,we);if(Fi!==void 0){if(Fi)continue;$r=!1;break}if(Vt){if(!ze(P,function(_i,rn){if(!Te(Vt,rn)&&(Ir===_i||lt(Ir,_i,q,ee,we)))return Vt.push(rn)})){$r=!1;break}}else if(!(Ir===Ar||lt(Ir,Ar,q,ee,we))){$r=!1;break}}return we.delete(O),we.delete(P),$r}function V5(O,P,q,ee,lt,we,gt){switch(q){case p:if(O.byteLength!=P.byteLength||O.byteOffset!=P.byteOffset)return!1;O=O.buffer,P=P.buffer;case D:return!(O.byteLength!=P.byteLength||!we(new de(O),new de(P)));case v:case w:case N:return gl(+O,+P);case S:return O.name==P.name&&O.message==P.message;case V:case G:return O==P+"";case R:var Ot=Ne;case H:var zt=ee&s;if(Ot||(Ot=fe),O.size!=P.size&&!zt)return!1;var pt=gt.get(O);if(pt)return pt==P;ee|=n,gt.set(O,P);var pr=bl(Ot(O),Ot(P),ee,lt,we,gt);return gt.delete(O),pr;case J:if(Ke)return Ke.call(O)==Ke.call(P)}return!1}function W5(O,P,q,ee,lt,we){var gt=q&s,Ot=vl(O),zt=Ot.length,pt=vl(P),pr=pt.length;if(zt!=pr&&!gt)return!1;for(var $r=zt;$r--;){var Vt=Ot[$r];if(!(gt?Vt in P:re.call(P,Vt)))return!1}var Ir=we.get(O);if(Ir&&we.get(P))return Ir==P;var Ar=!0;we.set(O,P),we.set(P,O);for(var Fi=gt;++$r<zt;){Vt=Ot[$r];var _i=O[Vt],rn=P[Vt];if(ee)var El=gt?ee(rn,_i,Vt,P,O,we):ee(_i,rn,Vt,O,P,we);if(!(El===void 0?_i===rn||lt(_i,rn,q,ee,we):El)){Ar=!1;break}Fi||(Fi=Vt=="constructor")}if(Ar&&!Fi){var No=O.constructor,Po=P.constructor;No!=Po&&"constructor"in O&&"constructor"in P&&!(typeof No=="function"&&No instanceof No&&typeof Po=="function"&&Po instanceof Po)&&(Ar=!1)}return we.delete(O),we.delete(P),Ar}function vl(O){return k5(O,nw,Y5)}function Ro(O,P){var q=O.__data__;return X5(P)?q[typeof P=="string"?"string":"hash"]:q.map}function $n(O,P){var q=oe(O,P);return j5(q)?q:void 0}function G5(O){var P=re.call(O,ne),q=O[ne];try{O[ne]=void 0;var ee=!0}catch{}var lt=We.call(O);return ee&&(P?O[ne]=q:delete O[ne]),lt}var Y5=Je?function(O){return O==null?[]:(O=Object(O),Q(Je(O),function(P){return Ye.call(O,P)}))}:sw,Li=ws;(ke&&Li(new ke(new ArrayBuffer(1)))!=p||Oe&&Li(new Oe)!=R||ue&&Li(ue.resolve())!=F||qe&&Li(new qe)!=H||je&&Li(new je)!=te)&&(Li=function(O){var P=ws(O),q=P==B?O.constructor:void 0,ee=q?tn(q):"";if(ee)switch(ee){case tt:return p;case rt:return R;case ve:return F;case it:return H;case nt:return te}return P});function J5(O,P){return P=P??o,!!P&&(typeof O=="number"||U.test(O))&&O>-1&&O%1==0&&O<P}function X5(O){var P=typeof O;return P=="string"||P=="number"||P=="symbol"||P=="boolean"?O!=="__proto__":O===null}function Z5(O){return!!Ve&&Ve in O}function Q5(O){var P=O&&O.constructor,q=typeof P=="function"&&P.prototype||se;return O===q}function ew(O){return We.call(O)}function tn(O){if(O!=null){try{return Le.call(O)}catch{}try{return O+""}catch{}}return""}function gl(O,P){return O===P||O!==O&&P!==P}var tw=ll(function(){return arguments}())?ll:function(O){return _s(O)&&re.call(O,"callee")&&!Ye.call(O,"callee")},To=Array.isArray;function rw(O){return O!=null&&ml(O.length)&&!yl(O)}var kf=et||ow;function iw(O,P){return pl(O,P)}function yl(O){if(!wl(O))return!1;var P=ws(O);return P==I||P==M||P==u||P==k}function ml(O){return typeof O=="number"&&O>-1&&O%1==0&&O<=o}function wl(O){var P=typeof O;return O!=null&&(P=="object"||P=="function")}function _s(O){return O!=null&&typeof O=="object"}var _l=Z?Re(Z):K5;function nw(O){return rw(O)?z5(O):H5(O)}function sw(){return[]}function ow(){return!1}t.exports=iw})(Ff,Ff.exports);var m5=Ff.exports,w5=Object.defineProperty,el=Object.getOwnPropertySymbols,_5=Object.prototype.hasOwnProperty,E5=Object.prototype.propertyIsEnumerable,$f=(t,e,r)=>e in t?w5(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,tl=(t,e)=>{for(var r in e||(e={}))_5.call(e,r)&&$f(t,r,e[r]);if(el)for(var r of el(e))E5.call(e,r)&&$f(t,r,e[r]);return t},rr=(t,e,r)=>$f(t,typeof e!="symbol"?e+"":e,r);class rl extends Ep{constructor(e,r,i,s=Dr,n=void 0){super(e,r,i,s),this.core=e,this.logger=r,this.name=i,rr(this,"map",new Map),rr(this,"version",$c),rr(this,"cached",[]),rr(this,"initialized",!1),rr(this,"getKey"),rr(this,"storagePrefix",Dr),rr(this,"recentlyDeleted",[]),rr(this,"recentlyDeletedLimit",200),rr(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(o=>{this.getKey&&o!==null&&!Mo(o)?this.map.set(this.getKey(o),o):Z4(o)?this.map.set(o.id,o):Q4(o)&&this.map.set(o.topic,o)}),this.cached=[],this.initialized=!0)}),rr(this,"set",async(o,f)=>{this.isInitialized(),this.map.has(o)?await this.update(o,f):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:o,value:f}),this.map.set(o,f),await this.persist())}),rr(this,"get",o=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:o}),this.getData(o))),rr(this,"getAll",o=>(this.isInitialized(),o?this.values.filter(f=>Object.keys(o).every(d=>m5(f[d],o[d]))):this.values)),rr(this,"update",async(o,f)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:o,update:f});const d=tl(tl({},this.getData(o)),f);this.map.set(o,d),await this.persist()}),rr(this,"delete",async(o,f)=>{this.isInitialized(),this.map.has(o)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:o,reason:f}),this.map.delete(o),this.addToRecentlyDeleted(o),await this.persist())}),this.logger=Jt(r,this.name),this.storagePrefix=s,this.getKey=n}get context(){return ar(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const r=this.map.get(e);if(!r){if(this.recentlyDeleted.includes(e)){const{message:s}=Ze("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${e}`);throw this.logger.error(s),new Error(s)}const{message:i}=Ze("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(i),new Error(i)}return r}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:r}=Ze("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=Ze("NOT_INITIALIZED",this.name);throw new Error(e)}}}var x5=Object.defineProperty,S5=(t,e,r)=>e in t?x5(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Ae=(t,e,r)=>S5(t,typeof e!="symbol"?e+"":e,r);class il{constructor(e,r){this.core=e,this.logger=r,Ae(this,"name",jc),Ae(this,"version",Kc),Ae(this,"events",new br.exports),Ae(this,"pairings"),Ae(this,"initialized",!1),Ae(this,"storagePrefix",Dr),Ae(this,"ignoredPayloadTypes",[Ln]),Ae(this,"registeredMethods",[]),Ae(this,"init",async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))}),Ae(this,"register",({methods:i})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...i])]}),Ae(this,"create",async i=>{this.isInitialized();const s=Ef(),n=await this.core.crypto.setSymKey(s),o=ss(ie.FIVE_MINUTES),f={protocol:Pc},d={topic:n,expiry:o,relay:f,active:!1,methods:i?.methods},u=I0({protocol:this.core.protocol,version:this.core.version,topic:n,symKey:s,relay:f,expiryTimestamp:o,methods:i?.methods});return this.events.emit(un.create,d),this.core.expirer.set(n,o),await this.pairings.set(n,d),await this.core.relayer.subscribe(n,{transportType:i?.transportType}),{topic:n,uri:u}}),Ae(this,"pair",async i=>{this.isInitialized();const s=this.core.eventClient.createEvent({properties:{topic:i?.uri,trace:[zr.pairing_started]}});this.isValidPair(i,s);const{topic:n,symKey:o,relay:f,expiryTimestamp:d,methods:u}=M0(i.uri);s.props.properties.topic=n,s.addTrace(zr.pairing_uri_validation_success),s.addTrace(zr.pairing_uri_not_expired);let v;if(this.pairings.keys.includes(n)){if(v=this.pairings.get(n),s.addTrace(zr.existing_pairing),v.active)throw s.setError(ei.active_pairing_already_exists),new Error(`Pairing already exists: ${n}. Please try again with a new connection URI.`);s.addTrace(zr.pairing_not_expired)}const w=d||ss(ie.FIVE_MINUTES),S={topic:n,relay:f,expiry:w,active:!1,methods:u};this.core.expirer.set(n,w),await this.pairings.set(n,S),s.addTrace(zr.store_new_pairing),i.activatePairing&&await this.activate({topic:n}),this.events.emit(un.create,S),s.addTrace(zr.emit_inactive_pairing),this.core.crypto.keychain.has(n)||await this.core.crypto.setSymKey(o,n),s.addTrace(zr.subscribing_pairing_topic);try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{s.setError(ei.no_internet_connection)}try{await this.core.relayer.subscribe(n,{relay:f})}catch(I){throw s.setError(ei.subscribe_pairing_topic_failure),I}return s.addTrace(zr.subscribe_pairing_topic_success),S}),Ae(this,"activate",async({topic:i})=>{this.isInitialized();const s=ss(ie.FIVE_MINUTES);this.core.expirer.set(i,s),await this.pairings.update(i,{active:!0,expiry:s})}),Ae(this,"ping",async i=>{this.isInitialized(),await this.isValidPing(i),this.logger.warn("ping() is deprecated and will be removed in the next major release.");const{topic:s}=i;if(this.pairings.keys.includes(s)){const n=await this.sendRequest(s,"wc_pairingPing",{}),{done:o,resolve:f,reject:d}=v6();this.events.once(sf("pairing_ping",n),({error:u})=>{u?d(u):f()}),await o()}}),Ae(this,"updateExpiry",async({topic:i,expiry:s})=>{this.isInitialized(),await this.pairings.update(i,{expiry:s})}),Ae(this,"updateMetadata",async({topic:i,metadata:s})=>{this.isInitialized(),await this.pairings.update(i,{peerMetadata:s})}),Ae(this,"getPairings",()=>(this.isInitialized(),this.pairings.values)),Ae(this,"disconnect",async i=>{this.isInitialized(),await this.isValidDisconnect(i);const{topic:s}=i;this.pairings.keys.includes(s)&&(await this.sendRequest(s,"wc_pairingDelete",ls("USER_DISCONNECTED")),await this.deletePairing(s))}),Ae(this,"formatUriFromPairing",i=>{this.isInitialized();const{topic:s,relay:n,expiry:o,methods:f}=i,d=this.core.crypto.keychain.get(s);return I0({protocol:this.core.protocol,version:this.core.version,topic:s,symKey:d,relay:n,expiryTimestamp:o,methods:f})}),Ae(this,"sendRequest",async(i,s,n)=>{const o=Rf(s,n),f=await this.core.crypto.encode(i,o),d=hn[s].req;return this.core.history.set(i,o),this.core.relayer.publish(i,f,d),o.id}),Ae(this,"sendResult",async(i,s,n)=>{const o=z0(i,n),f=await this.core.crypto.encode(s,o),d=await this.core.history.get(s,i),u=hn[d.request.method].res;await this.core.relayer.publish(s,f,u),await this.core.history.resolve(o)}),Ae(this,"sendError",async(i,s,n)=>{const o=k0(i,n),f=await this.core.crypto.encode(s,o),d=await this.core.history.get(s,i),u=hn[d.request.method]?hn[d.request.method].res:hn.unregistered_method.res;await this.core.relayer.publish(s,f,u),await this.core.history.resolve(o)}),Ae(this,"deletePairing",async(i,s)=>{await this.core.relayer.unsubscribe(i),await Promise.all([this.pairings.delete(i,ls("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(i),s?Promise.resolve():this.core.expirer.del(i)])}),Ae(this,"cleanup",async()=>{const i=this.pairings.getAll().filter(s=>Bd(s.expiry));await Promise.all(i.map(s=>this.deletePairing(s.topic)))}),Ae(this,"onRelayEventRequest",i=>{const{topic:s,payload:n}=i;switch(n.method){case"wc_pairingPing":return this.onPairingPingRequest(s,n);case"wc_pairingDelete":return this.onPairingDeleteRequest(s,n);default:return this.onUnknownRpcMethodRequest(s,n)}}),Ae(this,"onRelayEventResponse",async i=>{const{topic:s,payload:n}=i,o=(await this.core.history.get(s,n.id)).request.method;switch(o){case"wc_pairingPing":return this.onPairingPingResponse(s,n);default:return this.onUnknownRpcMethodResponse(o)}}),Ae(this,"onPairingPingRequest",async(i,s)=>{const{id:n}=s;try{this.isValidPing({topic:i}),await this.sendResult(n,i,!0),this.events.emit(un.ping,{id:n,topic:i})}catch(o){await this.sendError(n,i,o),this.logger.error(o)}}),Ae(this,"onPairingPingResponse",(i,s)=>{const{id:n}=s;setTimeout(()=>{H0(s)?this.events.emit(sf("pairing_ping",n),{}):Io(s)&&this.events.emit(sf("pairing_ping",n),{error:s.error})},500)}),Ae(this,"onPairingDeleteRequest",async(i,s)=>{const{id:n}=s;try{this.isValidDisconnect({topic:i}),await this.deletePairing(i),this.events.emit(un.delete,{id:n,topic:i})}catch(o){await this.sendError(n,i,o),this.logger.error(o)}}),Ae(this,"onUnknownRpcMethodRequest",async(i,s)=>{const{id:n,method:o}=s;try{if(this.registeredMethods.includes(o))return;const f=ls("WC_METHOD_UNSUPPORTED",o);await this.sendError(n,i,f),this.logger.error(f)}catch(f){await this.sendError(n,i,f),this.logger.error(f)}}),Ae(this,"onUnknownRpcMethodResponse",i=>{this.registeredMethods.includes(i)||this.logger.error(ls("WC_METHOD_UNSUPPORTED",i))}),Ae(this,"isValidPair",(i,s)=>{var n;if(!Sf(i)){const{message:f}=Ze("MISSING_OR_INVALID",`pair() params: ${i}`);throw s.setError(ei.malformed_pairing_uri),new Error(f)}if(!X4(i.uri)){const{message:f}=Ze("MISSING_OR_INVALID",`pair() uri: ${i.uri}`);throw s.setError(ei.malformed_pairing_uri),new Error(f)}const o=M0(i?.uri);if(!((n=o?.relay)!=null&&n.protocol)){const{message:f}=Ze("MISSING_OR_INVALID","pair() uri#relay-protocol");throw s.setError(ei.malformed_pairing_uri),new Error(f)}if(!(o!=null&&o.symKey)){const{message:f}=Ze("MISSING_OR_INVALID","pair() uri#symKey");throw s.setError(ei.malformed_pairing_uri),new Error(f)}if(o!=null&&o.expiryTimestamp&&ie.toMiliseconds(o?.expiryTimestamp)<Date.now()){s.setError(ei.pairing_expired);const{message:f}=Ze("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(f)}}),Ae(this,"isValidPing",async i=>{if(!Sf(i)){const{message:n}=Ze("MISSING_OR_INVALID",`ping() params: ${i}`);throw new Error(n)}const{topic:s}=i;await this.isValidPairingTopic(s)}),Ae(this,"isValidDisconnect",async i=>{if(!Sf(i)){const{message:n}=Ze("MISSING_OR_INVALID",`disconnect() params: ${i}`);throw new Error(n)}const{topic:s}=i;await this.isValidPairingTopic(s)}),Ae(this,"isValidPairingTopic",async i=>{if(!A0(i,!1)){const{message:s}=Ze("MISSING_OR_INVALID",`pairing topic should be a string: ${i}`);throw new Error(s)}if(!this.pairings.keys.includes(i)){const{message:s}=Ze("NO_MATCHING_KEY",`pairing topic doesn't exist: ${i}`);throw new Error(s)}if(Bd(this.pairings.get(i).expiry)){await this.deletePairing(i);const{message:s}=Ze("EXPIRED",`pairing topic: ${i}`);throw new Error(s)}}),this.core=e,this.logger=Jt(r,this.name),this.pairings=new rl(this.core,this.logger,this.name,this.storagePrefix)}get context(){return ar(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=Ze("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(Tt.message,async e=>{const{topic:r,message:i,transportType:s}=e;if(!this.pairings.keys.includes(r)||s===ji.link_mode||this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(i)))return;const n=await this.core.crypto.decode(r,i);try{K0(n)?(this.core.history.set(r,n),this.onRelayEventRequest({topic:r,payload:n})):Tf(n)&&(await this.core.history.resolve(n),await this.onRelayEventResponse({topic:r,payload:n}),this.core.history.delete(r,n.id))}catch(o){this.logger.error(o)}})}registerExpirerEvents(){this.core.expirer.on(gr.expired,async e=>{const{topic:r}=m6(e.target);r&&this.pairings.keys.includes(r)&&(await this.deletePairing(r,!0),this.events.emit(un.expire,{topic:r}))})}}var M5=Object.defineProperty,I5=(t,e,r)=>e in t?M5(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Ut=(t,e,r)=>I5(t,typeof e!="symbol"?e+"":e,r);class nl extends yp{constructor(e,r){super(e,r),this.core=e,this.logger=r,Ut(this,"records",new Map),Ut(this,"events",new br.exports.EventEmitter),Ut(this,"name",Hc),Ut(this,"version",Vc),Ut(this,"cached",[]),Ut(this,"initialized",!1),Ut(this,"storagePrefix",Dr),Ut(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(i=>this.records.set(i.id,i)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),Ut(this,"set",(i,s,n)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:i,request:s,chainId:n}),this.records.has(s.id))return;const o={id:s.id,topic:i,request:{method:s.method,params:s.params||null},chainId:n,expiry:ss(ie.THIRTY_DAYS)};this.records.set(o.id,o),this.persist(),this.events.emit(vr.created,o)}),Ut(this,"resolve",async i=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:i}),!this.records.has(i.id))return;const s=await this.getRecord(i.id);typeof s.response>"u"&&(s.response=Io(i)?{error:i.error}:{result:i.result},this.records.set(s.id,s),this.persist(),this.events.emit(vr.updated,s))}),Ut(this,"get",async(i,s)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:i,id:s}),await this.getRecord(s))),Ut(this,"delete",(i,s)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:s}),this.values.forEach(n=>{if(n.topic===i){if(typeof s<"u"&&n.id!==s)return;this.records.delete(n.id),this.events.emit(vr.deleted,n)}}),this.persist()}),Ut(this,"exists",async(i,s)=>(this.isInitialized(),this.records.has(s)?(await this.getRecord(s)).topic===i:!1)),Ut(this,"on",(i,s)=>{this.events.on(i,s)}),Ut(this,"once",(i,s)=>{this.events.once(i,s)}),Ut(this,"off",(i,s)=>{this.events.off(i,s)}),Ut(this,"removeListener",(i,s)=>{this.events.removeListener(i,s)}),this.logger=Jt(r,this.name)}get context(){return ar(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(r=>{if(typeof r.response<"u")return;const i={topic:r.topic,request:Rf(r.request.method,r.request.params,r.id),chainId:r.chainId};return e.push(i)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const r=this.records.get(e);if(!r){const{message:i}=Ze("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(i)}return r}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(vr.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:r}=Ze("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(vr.created,e=>{const r=vr.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e})}),this.events.on(vr.updated,e=>{const r=vr.updated;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e})}),this.events.on(vr.deleted,e=>{const r=vr.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e})}),this.core.heartbeat.on(on.pulse,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let e=!1;this.records.forEach(r=>{ie.toMiliseconds(r.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${r.id}`),this.records.delete(r.id),this.events.emit(vr.deleted,r,!1),e=!0)}),e&&this.persist()}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=Ze("NOT_INITIALIZED",this.name);throw new Error(e)}}}var A5=Object.defineProperty,D5=(t,e,r)=>e in t?A5(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Kt=(t,e,r)=>D5(t,typeof e!="symbol"?e+"":e,r);class sl extends Sp{constructor(e,r){super(e,r),this.core=e,this.logger=r,Kt(this,"expirations",new Map),Kt(this,"events",new br.exports.EventEmitter),Kt(this,"name",Wc),Kt(this,"version",Gc),Kt(this,"cached",[]),Kt(this,"initialized",!1),Kt(this,"storagePrefix",Dr),Kt(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(i=>this.expirations.set(i.target,i)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),Kt(this,"has",i=>{try{const s=this.formatTarget(i);return typeof this.getExpiration(s)<"u"}catch{return!1}}),Kt(this,"set",(i,s)=>{this.isInitialized();const n=this.formatTarget(i),o={target:n,expiry:s};this.expirations.set(n,o),this.checkExpiry(n,o),this.events.emit(gr.created,{target:n,expiration:o})}),Kt(this,"get",i=>{this.isInitialized();const s=this.formatTarget(i);return this.getExpiration(s)}),Kt(this,"del",i=>{if(this.isInitialized(),this.has(i)){const s=this.formatTarget(i),n=this.getExpiration(s);this.expirations.delete(s),this.events.emit(gr.deleted,{target:s,expiration:n})}}),Kt(this,"on",(i,s)=>{this.events.on(i,s)}),Kt(this,"once",(i,s)=>{this.events.once(i,s)}),Kt(this,"off",(i,s)=>{this.events.off(i,s)}),Kt(this,"removeListener",(i,s)=>{this.events.removeListener(i,s)}),this.logger=Jt(r,this.name)}get context(){return ar(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return g6(e);if(typeof e=="number")return y6(e);const{message:r}=Ze("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(r)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(gr.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:r}=Ze("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const r=this.expirations.get(e);if(!r){const{message:i}=Ze("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.warn(i),new Error(i)}return r}checkExpiry(e,r){const{expiry:i}=r;ie.toMiliseconds(i)-Date.now()<=0&&this.expire(e,r)}expire(e,r){this.expirations.delete(e),this.events.emit(gr.expired,{target:e,expiration:r})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,r)=>this.checkExpiry(r,e))}registerEventListeners(){this.core.heartbeat.on(on.pulse,()=>this.checkExpirations()),this.events.on(gr.created,e=>{const r=gr.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(gr.expired,e=>{const r=gr.expired;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(gr.deleted,e=>{const r=gr.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=Ze("NOT_INITIALIZED",this.name);throw new Error(e)}}}var O5=Object.defineProperty,R5=(t,e,r)=>e in t?O5(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,mt=(t,e,r)=>R5(t,typeof e!="symbol"?e+"":e,r);class ol extends Mp{constructor(e,r,i){super(e,r,i),this.core=e,this.logger=r,this.store=i,mt(this,"name",Yc),mt(this,"abortController"),mt(this,"isDevEnv"),mt(this,"verifyUrlV3",Xc),mt(this,"storagePrefix",Dr),mt(this,"version",Jo),mt(this,"publicKey"),mt(this,"fetchPromise"),mt(this,"init",async()=>{var s;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&ie.toMiliseconds((s=this.publicKey)==null?void 0:s.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))}),mt(this,"register",async s=>{if(!bo()||this.isDevEnv)return;const n=window.location.origin,{id:o,decryptedId:f}=s,d=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${n}&id=${o}&decryptedId=${f}`;try{const u=Ks(),v=this.startAbortTimer(ie.ONE_SECOND*5),w=await new Promise((S,I)=>{const M=()=>{window.removeEventListener("message",N),u.body.removeChild(R),I("attestation aborted")};this.abortController.signal.addEventListener("abort",M);const R=u.createElement("iframe");R.src=d,R.style.display="none",R.addEventListener("error",M,{signal:this.abortController.signal});const N=C=>{if(C.data&&typeof C.data=="string")try{const B=JSON.parse(C.data);if(B.type==="verify_attestation"){if(_a(B.attestation).payload.id!==o)return;clearInterval(v),u.body.removeChild(R),this.abortController.signal.removeEventListener("abort",M),window.removeEventListener("message",N),S(B.attestation===null?"":B.attestation)}}catch(B){this.logger.warn(B)}};u.body.appendChild(R),window.addEventListener("message",N,{signal:this.abortController.signal})});return this.logger.debug("jwt attestation",w),w}catch(u){this.logger.warn(u)}return""}),mt(this,"resolve",async s=>{if(this.isDevEnv)return"";const{attestationId:n,hash:o,encryptedId:f}=s;if(n===""){this.logger.debug("resolve: attestationId is empty, skipping");return}if(n){if(_a(n).payload.id!==f)return;const u=await this.isValidJwtAttestation(n);if(u){if(!u.isVerified){this.logger.warn("resolve: jwt attestation: origin url not verified");return}return u}}if(!o)return;const d=this.getVerifyUrl(s?.verifyUrl);return this.fetchAttestation(o,d)}),mt(this,"fetchAttestation",async(s,n)=>{this.logger.debug(`resolving attestation: ${s} from url: ${n}`);const o=this.startAbortTimer(ie.ONE_SECOND*5),f=await fetch(`${n}/attestation/${s}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(o),f.status===200?await f.json():void 0}),mt(this,"getVerifyUrl",s=>{let n=s||Wn;return Zc.includes(n)||(this.logger.info(`verify url: ${n}, not included in trusted list, assigning default: ${Wn}`),n=Wn),n}),mt(this,"fetchPublicKey",async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);const s=this.startAbortTimer(ie.FIVE_SECONDS),n=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(s),await n.json()}catch(s){this.logger.warn(s)}}),mt(this,"persistPublicKey",async s=>{this.logger.debug("persisting public key to local storage",s),await this.store.setItem(this.storeKey,s),this.publicKey=s}),mt(this,"removePublicKey",async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0}),mt(this,"isValidJwtAttestation",async s=>{const n=await this.getPublicKey();try{if(n)return this.validateAttestation(s,n)}catch(f){this.logger.error(f),this.logger.warn("error validating attestation")}const o=await this.fetchAndPersistPublicKey();try{if(o)return this.validateAttestation(s,o)}catch(f){this.logger.error(f),this.logger.warn("error validating attestation")}}),mt(this,"getPublicKey",async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey()),mt(this,"fetchAndPersistPublicKey",async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise(async n=>{const o=await this.fetchPublicKey();o&&(await this.persistPublicKey(o),n(o))});const s=await this.fetchPromise;return this.fetchPromise=void 0,s}),mt(this,"validateAttestation",(s,n)=>{const o=K4(s,n.publicKey),f={hasExpired:ie.toMiliseconds(o.exp)<Date.now(),payload:o};if(f.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),new Error("JWT attestation expired");return{origin:f.payload.origin,isScam:f.payload.isScam,isVerified:f.payload.isVerified}}),this.logger=Jt(r,this.name),this.abortController=new AbortController,this.isDevEnv=Fd(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return ar(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),ie.toMiliseconds(e))}}var T5=Object.defineProperty,N5=(t,e,r)=>e in t?T5(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,al=(t,e,r)=>N5(t,typeof e!="symbol"?e+"":e,r);class fl extends Ip{constructor(e,r){super(e,r),this.projectId=e,this.logger=r,al(this,"context",Qc),al(this,"registerDeviceToken",async i=>{const{clientId:s,token:n,notificationType:o,enableEncrypted:f=!1}=i,d=`${eh}/${this.projectId}/clients`;await fetch(d,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:s,type:o,token:n,always_raw:f})})}),this.logger=Jt(r,this.context)}}var P5=Object.defineProperty,cl=Object.getOwnPropertySymbols,C5=Object.prototype.hasOwnProperty,B5=Object.prototype.propertyIsEnumerable,Uf=(t,e,r)=>e in t?P5(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,gs=(t,e)=>{for(var r in e||(e={}))C5.call(e,r)&&Uf(t,r,e[r]);if(cl)for(var r of cl(e))B5.call(e,r)&&Uf(t,r,e[r]);return t},Dt=(t,e,r)=>Uf(t,typeof e!="symbol"?e+"":e,r);class hl extends Ap{constructor(e,r,i=!0){super(e,r,i),this.core=e,this.logger=r,Dt(this,"context",rh),Dt(this,"storagePrefix",Dr),Dt(this,"storageVersion",th),Dt(this,"events",new Map),Dt(this,"shouldPersist",!1),Dt(this,"init",async()=>{if(!Fd())try{const s={eventId:Ld(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:await this.core.crypto.getClientId(),user_agent:Td(this.core.relayer.protocol,this.core.relayer.version,Ps)}}};await this.sendEvent([s])}catch(s){this.logger.warn(s)}}),Dt(this,"createEvent",s=>{const{event:n="ERROR",type:o="",properties:{topic:f,trace:d}}=s,u=Ld(),v=this.core.projectId||"",w=Date.now(),S=gs({eventId:u,timestamp:w,props:{event:n,type:o,properties:{topic:f,trace:d}},bundleId:v,domain:this.getAppDomain()},this.setMethods(u));return this.telemetryEnabled&&(this.events.set(u,S),this.shouldPersist=!0),S}),Dt(this,"getEvent",s=>{const{eventId:n,topic:o}=s;if(n)return this.events.get(n);const f=Array.from(this.events.values()).find(d=>d.props.properties.topic===o);if(f)return gs(gs({},f),this.setMethods(f.eventId))}),Dt(this,"deleteEvent",s=>{const{eventId:n}=s;this.events.delete(n),this.shouldPersist=!0}),Dt(this,"setEventListeners",()=>{this.core.heartbeat.on(on.pulse,async()=>{this.shouldPersist&&await this.persist(),this.events.forEach(s=>{ie.fromMiliseconds(Date.now())-ie.fromMiliseconds(s.timestamp)>ih&&(this.events.delete(s.eventId),this.shouldPersist=!0)})})}),Dt(this,"setMethods",s=>({addTrace:n=>this.addTrace(s,n),setError:n=>this.setError(s,n)})),Dt(this,"addTrace",(s,n)=>{const o=this.events.get(s);o&&(o.props.properties.trace.push(n),this.events.set(s,o),this.shouldPersist=!0)}),Dt(this,"setError",(s,n)=>{const o=this.events.get(s);o&&(o.props.type=n,o.timestamp=Date.now(),this.events.set(s,o),this.shouldPersist=!0)}),Dt(this,"persist",async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1}),Dt(this,"restore",async()=>{try{const s=await this.core.storage.getItem(this.storageKey)||[];if(!s.length)return;s.forEach(n=>{this.events.set(n.eventId,gs(gs({},n),this.setMethods(n.eventId)))})}catch(s){this.logger.warn(s)}}),Dt(this,"submit",async()=>{if(!this.telemetryEnabled||this.events.size===0)return;const s=[];for(const[n,o]of this.events)o.props.type&&s.push(o);if(s.length!==0)try{if((await this.sendEvent(s)).ok)for(const n of s)this.events.delete(n.eventId),this.shouldPersist=!0}catch(n){this.logger.warn(n)}}),Dt(this,"sendEvent",async s=>{const n=this.getAppDomain()?"":"&sp=desktop";return await fetch(`${nh}?projectId=${this.core.projectId}&st=events_sdk&sv=js-${Ps}${n}`,{method:"POST",body:JSON.stringify(s)})}),Dt(this,"getAppDomain",()=>d6().url),this.logger=Jt(r,this.context),this.telemetryEnabled=i,i?this.restore().then(async()=>{await this.submit(),this.setEventListeners()}):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}}var L5=Object.defineProperty,ul=Object.getOwnPropertySymbols,F5=Object.prototype.hasOwnProperty,$5=Object.prototype.propertyIsEnumerable,zf=(t,e,r)=>e in t?L5(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,dl=(t,e)=>{for(var r in e||(e={}))F5.call(e,r)&&zf(t,r,e[r]);if(ul)for(var r of ul(e))$5.call(e,r)&&zf(t,r,e[r]);return t},dt=(t,e,r)=>zf(t,typeof e!="symbol"?e+"":e,r);class Do extends pp{constructor(e){var r;super(e),dt(this,"protocol",Yo),dt(this,"version",Jo),dt(this,"name",Vn),dt(this,"relayUrl"),dt(this,"projectId"),dt(this,"customStoragePrefix"),dt(this,"events",new br.exports.EventEmitter),dt(this,"logger"),dt(this,"heartbeat"),dt(this,"relayer"),dt(this,"crypto"),dt(this,"storage"),dt(this,"history"),dt(this,"expirer"),dt(this,"pairing"),dt(this,"verify"),dt(this,"echoClient"),dt(this,"linkModeSupportedApps"),dt(this,"eventClient"),dt(this,"initialized",!1),dt(this,"logChunkController"),dt(this,"on",(o,f)=>this.events.on(o,f)),dt(this,"once",(o,f)=>this.events.once(o,f)),dt(this,"off",(o,f)=>this.events.off(o,f)),dt(this,"removeListener",(o,f)=>this.events.removeListener(o,f)),dt(this,"dispatchEnvelope",({topic:o,message:f,sessionExists:d})=>{if(!o||!f)return;const u={topic:o,message:f,publishedAt:Date.now(),transportType:ji.link_mode};this.relayer.onLinkMessageEvent(u,{sessionExists:d})}),this.projectId=e?.projectId,this.relayUrl=e?.relayUrl||Qo,this.customStoragePrefix=e!=null&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const i=Ec({level:typeof e?.logger=="string"&&e.logger?e.logger:Sc.logger,name:Vn}),{logger:s,chunkLoggerController:n}=up({opts:i,maxSizeInBytes:e?.maxLogBlobSizeInBytes,loggerOverride:e?.logger});this.logChunkController=n,(r=this.logChunkController)!=null&&r.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var o,f;(o=this.logChunkController)!=null&&o.downloadLogsBlobInBrowser&&((f=this.logChunkController)==null||f.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=Jt(s,this.name),this.heartbeat=new qo,this.crypto=new R0(this,this.logger,e?.keychain),this.history=new nl(this,this.logger),this.expirer=new sl(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new F1(dl(dl({},Mc),e?.storageOptions)),this.relayer=new Q0({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new il(this,this.logger),this.verify=new ol(this,this.logger,this.storage),this.echoClient=new fl(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new hl(this,this.logger,e?.telemetryEnabled)}static async init(e){const r=new Do(e);await r.initialize();const i=await r.crypto.getClientId();return await r.storage.setItem(Uc,i),r}get context(){return ar(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var e;return(e=this.logChunkController)==null?void 0:e.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(e){this.linkModeSupportedApps.includes(e)||(this.linkModeSupportedApps.push(e),await this.storage.setItem(ea,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.linkModeSupportedApps=await this.storage.getItem(ea)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}}const U5=Do;Y.CORE_CONTEXT=Vn,Y.CORE_DEFAULT=Sc,Y.CORE_PROTOCOL=Yo,Y.CORE_STORAGE_OPTIONS=Mc,Y.CORE_STORAGE_PREFIX=Dr,Y.CORE_VERSION=Jo,Y.CRYPTO_CLIENT_SEED=Xo,Y.CRYPTO_CONTEXT=Ic,Y.CRYPTO_JWT_TTL=Ac,Y.Core=U5,Y.Crypto=R0,Y.ECHO_CONTEXT=Qc,Y.ECHO_URL=eh,Y.EVENTS_CLIENT_API_URL=nh,Y.EVENTS_STORAGE_CLEANUP_INTERVAL=ih,Y.EVENTS_STORAGE_CONTEXT=rh,Y.EVENTS_STORAGE_VERSION=th,Y.EVENT_CLIENT_AUTHENTICATE_ERRORS=$p,Y.EVENT_CLIENT_AUTHENTICATE_TRACES=Fp,Y.EVENT_CLIENT_CONTEXT=Cp,Y.EVENT_CLIENT_PAIRING_ERRORS=ei,Y.EVENT_CLIENT_PAIRING_TRACES=zr,Y.EVENT_CLIENT_SESSION_ERRORS=Lp,Y.EVENT_CLIENT_SESSION_TRACES=Bp,Y.EXPIRER_CONTEXT=Wc,Y.EXPIRER_DEFAULT_TTL=Np,Y.EXPIRER_EVENTS=gr,Y.EXPIRER_STORAGE_VERSION=Gc,Y.EchoClient=fl,Y.EventClient=hl,Y.Expirer=sl,Y.HISTORY_CONTEXT=Hc,Y.HISTORY_EVENTS=vr,Y.HISTORY_STORAGE_VERSION=Vc,Y.JsonRpcHistory=nl,Y.KEYCHAIN_CONTEXT=Dc,Y.KEYCHAIN_STORAGE_VERSION=Oc,Y.KeyChain=O0,Y.MESSAGES_CONTEXT=Rc,Y.MESSAGES_STORAGE_VERSION=Tc,Y.MessageTracker=T0,Y.PAIRING_CONTEXT=jc,Y.PAIRING_DEFAULT_TTL=Tp,Y.PAIRING_EVENTS=un,Y.PAIRING_RPC_OPTS=hn,Y.PAIRING_STORAGE_VERSION=Kc,Y.PENDING_SUB_RESOLUTION_TIMEOUT=qc,Y.PUBLISHER_CONTEXT=Nc,Y.PUBLISHER_DEFAULT_TTL=Zo,Y.Pairing=il,Y.RELAYER_CONTEXT=Bc,Y.RELAYER_DEFAULT_LOGGER=Cc,Y.RELAYER_DEFAULT_PROTOCOL=Pc,Y.RELAYER_DEFAULT_RELAY_URL=Qo,Y.RELAYER_EVENTS=Tt,Y.RELAYER_PROVIDER_EVENTS=fr,Y.RELAYER_RECONNECT_TIMEOUT=Fc,Y.RELAYER_SDK_VERSION=Ps,Y.RELAYER_STORAGE_OPTIONS=Dp,Y.RELAYER_SUBSCRIBER_SUFFIX=Lc,Y.RELAYER_TRANSPORT_CUTOFF=Op,Y.Relayer=Q0,Y.STORE_STORAGE_VERSION=$c,Y.SUBSCRIBER_CONTEXT=zc,Y.SUBSCRIBER_DEFAULT_TTL=Rp,Y.SUBSCRIBER_EVENTS=Xt,Y.SUBSCRIBER_STORAGE_VERSION=kc,Y.Store=rl,Y.Subscriber=J0,Y.TRANSPORT_TYPES=ji,Y.TRUSTED_VERIFY_URLS=Zc,Y.VERIFY_CONTEXT=Yc,Y.VERIFY_SERVER=Wn,Y.VERIFY_SERVER_V3=Xc,Y.Verify=ol,Y.WALLETCONNECT_CLIENT_ID=Uc,Y.WALLETCONNECT_LINK_MODE_APPS=ea,Y.default=Do,Object.defineProperty(Y,"__esModule",{value:!0})});
//# sourceMappingURL=index.umd.js.map
